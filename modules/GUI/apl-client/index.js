!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.APLClient=t():e.APLClient=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kPropertyScrollDirection=0]="kPropertyScrollDirection",e[e.kPropertyAccessibilityLabel=1]="kPropertyAccessibilityLabel",e[e.kPropertyAlign=2]="kPropertyAlign",e[e.kPropertyAlignItems=3]="kPropertyAlignItems",e[e.kPropertyAlignSelf=4]="kPropertyAlignSelf",e[e.kPropertyAudioTrack=5]="kPropertyAudioTrack",e[e.kPropertyAutoplay=6]="kPropertyAutoplay",e[e.kPropertyBackgroundColor=7]="kPropertyBackgroundColor",e[e.kPropertyBorderBottomLeftRadius=8]="kPropertyBorderBottomLeftRadius",e[e.kPropertyBorderBottomRightRadius=9]="kPropertyBorderBottomRightRadius",e[e.kPropertyBorderColor=10]="kPropertyBorderColor",e[e.kPropertyBorderRadius=11]="kPropertyBorderRadius",e[e.kPropertyBorderRadii=12]="kPropertyBorderRadii",e[e.kPropertyBorderTopLeftRadius=13]="kPropertyBorderTopLeftRadius",e[e.kPropertyBorderTopRightRadius=14]="kPropertyBorderTopRightRadius",e[e.kPropertyBorderWidth=15]="kPropertyBorderWidth",e[e.kPropertyBottom=16]="kPropertyBottom",e[e.kPropertyBounds=17]="kPropertyBounds",e[e.kPropertyChecked=18]="kPropertyChecked",e[e.kPropertyColor=19]="kPropertyColor",e[e.kPropertyColorKaraokeTarget=20]="kPropertyColorKaraokeTarget",e[e.kPropertyColorNonKaraoke=21]="kPropertyColorNonKaraoke",e[e.kPropertyDescription=22]="kPropertyDescription",e[e.kPropertyDirection=23]="kPropertyDirection",e[e.kPropertyDisabled=24]="kPropertyDisabled",e[e.kPropertyDisplay=25]="kPropertyDisplay",e[e.kPropertyEntities=26]="kPropertyEntities",e[e.kPropertyFastScrollScale=27]="kPropertyFastScrollScale",e[e.kPropertyFilters=28]="kPropertyFilters",e[e.kPropertyFontFamily=29]="kPropertyFontFamily",e[e.kPropertyFontSize=30]="kPropertyFontSize",e[e.kPropertyFontStyle=31]="kPropertyFontStyle",e[e.kPropertyFontWeight=32]="kPropertyFontWeight",e[e.kPropertyGraphic=33]="kPropertyGraphic",e[e.kPropertyGrow=34]="kPropertyGrow",e[e.kPropertyHandleKeyDown=35]="kPropertyHandleKeyDown",e[e.kPropertyHandleKeyUp=36]="kPropertyHandleKeyUp",e[e.kPropertyHeight=37]="kPropertyHeight",e[e.kPropertyId=38]="kPropertyId",e[e.kPropertyInitialPage=39]="kPropertyInitialPage",e[e.kPropertyInnerBounds=40]="kPropertyInnerBounds",e[e.kPropertyJustifyContent=41]="kPropertyJustifyContent",e[e.kPropertyLeft=42]="kPropertyLeft",e[e.kPropertyLetterSpacing=43]="kPropertyLetterSpacing",e[e.kPropertyLineHeight=44]="kPropertyLineHeight",e[e.kPropertyMaxHeight=45]="kPropertyMaxHeight",e[e.kPropertyMaxLines=46]="kPropertyMaxLines",e[e.kPropertyMaxWidth=47]="kPropertyMaxWidth",e[e.kPropertyMediaBounds=48]="kPropertyMediaBounds",e[e.kPropertyMinHeight=49]="kPropertyMinHeight",e[e.kPropertyMinWidth=50]="kPropertyMinWidth",e[e.kPropertyNavigation=51]="kPropertyNavigation",e[e.kPropertyNotifyChildrenChanged=52]="kPropertyNotifyChildrenChanged",e[e.kPropertyNumbered=53]="kPropertyNumbered",e[e.kPropertyNumbering=54]="kPropertyNumbering",e[e.kPropertyOnBlur=55]="kPropertyOnBlur",e[e.kPropertyOnEnd=56]="kPropertyOnEnd",e[e.kPropertyOnFocus=57]="kPropertyOnFocus",e[e.kPropertyOnMount=58]="kPropertyOnMount",e[e.kPropertyOnPageChanged=59]="kPropertyOnPageChanged",e[e.kPropertyOnPause=60]="kPropertyOnPause",e[e.kPropertyOnPlay=61]="kPropertyOnPlay",e[e.kPropertyOnPress=62]="kPropertyOnPress",e[e.kPropertyOnScroll=63]="kPropertyOnScroll",e[e.kPropertyOnTimeUpdate=64]="kPropertyOnTimeUpdate",e[e.kPropertyOnTrackUpdate=65]="kPropertyOnTrackUpdate",e[e.kPropertyOpacity=66]="kPropertyOpacity",e[e.kPropertyOverlayColor=67]="kPropertyOverlayColor",e[e.kPropertyOverlayGradient=68]="kPropertyOverlayGradient",e[e.kPropertyPaddingBottom=69]="kPropertyPaddingBottom",e[e.kPropertyPaddingLeft=70]="kPropertyPaddingLeft",e[e.kPropertyPaddingRight=71]="kPropertyPaddingRight",e[e.kPropertyPaddingTop=72]="kPropertyPaddingTop",e[e.kPropertyPosition=73]="kPropertyPosition",e[e.kPropertyRight=74]="kPropertyRight",e[e.kPropertyScale=75]="kPropertyScale",e[e.kPropertyShadowColor=76]="kPropertyShadowColor",e[e.kPropertyShadowHorizontalOffset=77]="kPropertyShadowHorizontalOffset",e[e.kPropertyShadowRadius=78]="kPropertyShadowRadius",e[e.kPropertyShadowVerticalOffset=79]="kPropertyShadowVerticalOffset",e[e.kPropertyShrink=80]="kPropertyShrink",e[e.kPropertySnap=81]="kPropertySnap",e[e.kPropertySource=82]="kPropertySource",e[e.kPropertySpacing=83]="kPropertySpacing",e[e.kPropertySpeech=84]="kPropertySpeech",e[e.kPropertyText=85]="kPropertyText",e[e.kPropertyTextAlign=86]="kPropertyTextAlign",e[e.kPropertyTextAlignVertical=87]="kPropertyTextAlignVertical",e[e.kPropertyTransform=88]="kPropertyTransform",e[e.kPropertyTransformAssigned=89]="kPropertyTransformAssigned",e[e.kPropertyTop=90]="kPropertyTop",e[e.kPropertyUser=91]="kPropertyUser",e[e.kPropertyWidth=92]="kPropertyWidth",e[e.kPropertyOnCursorEnter=93]="kPropertyOnCursorEnter",e[e.kPropertyOnCursorExit=94]="kPropertyOnCursorExit"}(t.PropertyKey||(t.PropertyKey={}))},function(e,t,r){var n;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=r.document,s=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,d=o.indexOf,h={},p=h.toString,f=h.hasOwnProperty,g=f.toString,y=g.call(Object),m={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},T={type:!0,src:!0,nonce:!0,noModule:!0};function P(e,t,r){var n,i,o=(r=r||a).createElement("script");if(o.text=e,t)for(n in T)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&o.setAttribute(n,i);r.head.appendChild(o).parentNode.removeChild(o)}function S(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[p.call(e)]||"object":typeof e}var k=function(e,t){return new k.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function E(e){var t=!!e&&"length"in e&&e.length,r=S(e);return!v(e)&&!b(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}k.fn=k.prototype={jquery:"3.4.1",constructor:k,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var e,t,r,n,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&a!==n&&(c&&n&&(k.isPlainObject(n)||(i=Array.isArray(n)))?(r=a[t],o=i&&!Array.isArray(r)?[]:i||k.isPlainObject(r)?r:{},i=!1,a[t]=k.extend(c,o,n)):void 0!==n&&(a[t]=n));return a},k.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==p.call(e)||(t=s(e))&&("function"!=typeof(r=f.call(t,"constructor")&&t.constructor)||g.call(r)!==y))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){P(e,{nonce:t&&t.nonce})},each:function(e,t){var r,n=0;if(E(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(E(Object(e))?k.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:d.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,a=!r;i<o;i++)!t(e[i],i)!==a&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,a=[];if(E(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&a.push(i);return c.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var A=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,r,n,i,o,a,s,l,c,u,d,h,p,f,g,y,m,v,b,T="sizzle"+1*new Date,P=e.document,S=0,k=0,w=le(),E=le(),A=le(),x=le(),C=function(e,t){return e===t&&(d=!0),0},_={}.hasOwnProperty,L=[],R=L.pop,O=L.push,D=L.push,I=L.slice,M=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+N+"*("+B+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+N+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",G=new RegExp(N+"+","g"),K=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),H=new RegExp("^"+N+"*,"+N+"*"),W=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp(N+"|>"),q=new RegExp(j),z=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),re=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){h()},ae=Te((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{D.apply(L=I.call(P.childNodes),P.childNodes),L[P.childNodes.length].nodeType}catch(e){D={apply:L.length?function(e,t){O.apply(e,I.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function se(e,t,n,i){var o,s,c,u,d,f,m,v=t&&t.ownerDocument,S=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return n;if(!i&&((t?t.ownerDocument||t:P)!==p&&h(t),t=t||p,g)){if(11!==S&&(d=Z.exec(e)))if(o=d[1]){if(9===S){if(!(c=t.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(v&&(c=v.getElementById(o))&&b(t,c)&&c.id===o)return n.push(c),n}else{if(d[2])return D.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&r.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(o)),n}if(r.qsa&&!x[e+" "]&&(!y||!y.test(e))&&(1!==S||"object"!==t.nodeName.toLowerCase())){if(m=e,v=t,1===S&&V.test(e)){for((u=t.getAttribute("id"))?u=u.replace(ne,ie):t.setAttribute("id",u=T),s=(f=a(e)).length;s--;)f[s]="#"+u+" "+be(f[s]);m=f.join(","),v=ee.test(e)&&me(t.parentNode)||t}try{return D.apply(n,v.querySelectorAll(m)),n}catch(t){x(e,!0)}finally{u===T&&t.removeAttribute("id")}}}return l(e.replace(K,"$1"),t,n,i)}function le(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function ce(e){return e[T]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function he(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ye(e){return ce((function(t){return t=+t,ce((function(r,n){for(var i,o=e([],r.length,t),a=o.length;a--;)r[i=o[a]]&&(r[i]=!(n[i]=r[i]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,r=(e.ownerDocument||e).documentElement;return!$.test(t||r&&r.nodeName||"HTML")},h=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:P;return a!==p&&9===a.nodeType&&a.documentElement?(f=(p=a).documentElement,g=!o(p),P!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),r.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=J.test(p.getElementsByClassName),r.getById=ue((function(e){return f.appendChild(e).id=T,!p.getElementsByName||!p.getElementsByName(T).length})),r.getById?(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r,n,i,o=t.getElementById(e);if(o){if((r=o.getAttributeNode("id"))&&r.value===e)return[o];for(i=t.getElementsByName(e),n=0;o=i[n++];)if((r=o.getAttributeNode("id"))&&r.value===e)return[o]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],y=[],(r.qsa=J.test(p.querySelectorAll))&&(ue((function(e){f.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+N+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+T+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||y.push(".#.+[+~]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")}))),(r.matchesSelector=J.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){r.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),m.push("!=",j)})),y=y.length&&new RegExp(y.join("|")),m=m.length&&new RegExp(m.join("|")),t=J.test(f.compareDocumentPosition),b=t||J.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===P&&b(P,e)?-1:t===p||t.ownerDocument===P&&b(P,t)?1:u?M(u,e)-M(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===p?-1:t===p?1:i?-1:o?1:u?M(u,e)-M(u,t):0;if(i===o)return he(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;a[n]===s[n];)n++;return n?he(a[n],s[n]):a[n]===P?-1:s[n]===P?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),r.matchesSelector&&g&&!x[t+" "]&&(!m||!m.test(t))&&(!y||!y.test(t)))try{var n=v.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){x(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=n.attrHandle[t.toLowerCase()],o=i&&_.call(n.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:r.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(ne,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],i=0,o=0;if(d=!r.detectDuplicates,u=!r.sortStable&&e.slice(0),e.sort(C),d){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return u=null,e},i=se.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},(n=se.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&q.test(r)&&(t=a(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=se.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(G," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var c,u,d,h,p,f,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,m=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(y){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?y.firstChild:y.lastChild],a&&v){for(b=(p=(c=(u=(d=(h=y)[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&c[1])&&c[2],h=p&&y.childNodes[p];h=++p&&h&&h[g]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){u[e]=[S,p,b];break}}else if(v&&(b=p=(c=(u=(d=(h=t)[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&c[1]),!1===b)for(;(h=++p&&h&&h[g]||(b=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++b||(v&&((u=(d=h[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[S,b]),h!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[T]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,r){for(var n,o=i(e,t),a=o.length;a--;)e[n=M(e,o[a])]=!(r[n]=o[a])})):function(e){return i(e,0,r)}):i}},pseudos:{not:ce((function(e){var t=[],r=[],n=s(e.replace(K,"$1"));return n[T]?ce((function(e,t,r,i){for(var o,a=n(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,n(t,null,o,r),t[0]=null,!r.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,re),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ce((function(e){return z.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ye((function(){return[0]})),last:ye((function(e,t){return[t-1]})),eq:ye((function(e,t,r){return[r<0?r+t:r]})),even:ye((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ye((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ye((function(e,t,r){for(var n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e})),gt:ye((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ve(){}function be(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function Te(e,t,r){var n=t.dir,i=t.next,o=i||n,a=r&&"parentNode"===o,s=k++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||a)return e(t,r,i);return!1}:function(t,r,l){var c,u,d,h=[S,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=(d=t[T]||(t[T]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=u[o])&&c[0]===S&&c[1]===s)return h[2]=c[2];if(u[o]=h,h[2]=e(t,r,l))return!0}return!1}}function Pe(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function Se(e,t,r,n,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(r&&!r(o,n,i)||(a.push(o),c&&t.push(s)));return a}function ke(e,t,r,n,i,o){return n&&!n[T]&&(n=ke(n)),i&&!i[T]&&(i=ke(i,o)),ce((function(o,a,s,l){var c,u,d,h=[],p=[],f=a.length,g=o||function(e,t,r){for(var n=0,i=t.length;n<i;n++)se(e,t[n],r);return r}(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:Se(g,h,e,s,l),m=r?i||(o?e:f||n)?[]:a:y;if(r&&r(y,m,s,l),n)for(c=Se(m,p),n(c,[],s,l),u=c.length;u--;)(d=c[u])&&(m[p[u]]=!(y[p[u]]=d));if(o){if(i||e){if(i){for(c=[],u=m.length;u--;)(d=m[u])&&c.push(y[u]=d);i(null,m=[],c,l)}for(u=m.length;u--;)(d=m[u])&&(c=i?M(o,d):h[u])>-1&&(o[c]=!(a[c]=d))}}else m=Se(m===a?m.splice(f,m.length):m),i?i(null,a,m,l):D.apply(a,m)}))}function we(e){for(var t,r,i,o=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],l=a?1:0,u=Te((function(e){return e===t}),s,!0),d=Te((function(e){return M(t,e)>-1}),s,!0),h=[function(e,r,n){var i=!a&&(n||r!==c)||((t=r).nodeType?u(e,r,n):d(e,r,n));return t=null,i}];l<o;l++)if(r=n.relative[e[l].type])h=[Te(Pe(h),r)];else{if((r=n.filter[e[l].type].apply(null,e[l].matches))[T]){for(i=++l;i<o&&!n.relative[e[i].type];i++);return ke(l>1&&Pe(h),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(K,"$1"),r,l<i&&we(e.slice(l,i)),i<o&&we(e=e.slice(i)),i<o&&be(e))}h.push(r)}return Pe(h)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,a=se.tokenize=function(e,t){var r,i,o,a,s,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=n.preFilter;s;){for(a in r&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=W.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(K," ")}),s=s.slice(r.length)),n.filter)!(i=Y[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return t?s.length:s?se.error(e):E(e,l).slice(0)},s=se.compile=function(e,t){var r,i=[],o=[],s=A[e+" "];if(!s){for(t||(t=a(e)),r=t.length;r--;)(s=we(t[r]))[T]?i.push(s):o.push(s);(s=A(e,function(e,t){var r=t.length>0,i=e.length>0,o=function(o,a,s,l,u){var d,f,y,m=0,v="0",b=o&&[],T=[],P=c,k=o||i&&n.find.TAG("*",u),w=S+=null==P?1:Math.random()||.1,E=k.length;for(u&&(c=a===p||a||u);v!==E&&null!=(d=k[v]);v++){if(i&&d){for(f=0,a||d.ownerDocument===p||(h(d),s=!g);y=e[f++];)if(y(d,a||p,s)){l.push(d);break}u&&(S=w)}r&&((d=!y&&d)&&m--,o&&b.push(d))}if(m+=v,r&&v!==m){for(f=0;y=t[f++];)y(b,T,a,s);if(o){if(m>0)for(;v--;)b[v]||T[v]||(T[v]=R.call(l));T=Se(T)}D.apply(l,T),u&&!o&&T.length>0&&m+t.length>1&&se.uniqueSort(l)}return u&&(S=w,c=P),b};return r?ce(o):o}(o,i))).selector=e}return s},l=se.select=function(e,t,r,i){var o,l,c,u,d,h="function"==typeof e&&e,p=!i&&a(e=h.selector||e);if(r=r||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(te,re),t)||[])[0]))return r;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Y.needsContext.test(e)?0:l.length;o--&&(c=l[o],!n.relative[u=c.type]);)if((d=n.find[u])&&(i=d(c.matches[0].replace(te,re),ee.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return D.apply(r,i),r;break}}return(h||s(e,p))(i,t,!g,r,!t||ee.test(e)&&me(t.parentNode)||t),r},r.sortStable=T.split("").sort(C).join("")===T,r.detectDuplicates=!!d,h(),r.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(F,(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),se}(r);k.find=A,k.expr=A.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=A.uniqueSort,k.text=A.getText,k.isXMLDoc=A.isXML,k.contains=A.contains,k.escapeSelector=A.escape;var x=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(r))break;n.push(e)}return n},C=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},_=k.expr.match.needsContext;function L(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,r){return v(t)?k.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?k.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?k.grep(e,(function(e){return d.call(t,e)>-1!==r})):k.filter(t,e,r)}k.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?k.find.matchesSelector(n,e)?[n]:[]:k.find.matches(e,k.grep(t,(function(e){return 1===e.nodeType})))},k.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter((function(){for(t=0;t<n;t++)if(k.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)k.find(e,i[t],r);return n>1?k.uniqueSort(r):r},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&_.test(e)?k(e):e||[],!1).length}});var D,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||D,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),R.test(n[1])&&k.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=a.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==r.ready?r.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,D=k(a);var M=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(k.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!_.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&k.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?d.call(k(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,r){return x(e,"parentNode",r)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,r){return x(e,"nextSibling",r)},prevUntil:function(e,t,r){return x(e,"previousSibling",r)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(L(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},(function(e,t){k.fn[e]=function(r,n){var i=k.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=k.filter(n,i)),this.length>1&&(F[e]||k.uniqueSort(i),M.test(e)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function U(e){return e}function j(e){throw e}function G(e,t,r,n){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(r):e&&v(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(B)||[],(function(e,r){t[r]=!0})),t}(e):k.extend({},e);var t,r,n,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,n=t=!0;a.length;s=-1)for(r=a.shift();++s<o.length;)!1===o[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},c={add:function(){return o&&(r&&!t&&(s=o.length-1,a.push(r)),function t(r){k.each(r,(function(r,n){v(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==S(n)&&t(n)}))}(arguments),r&&!t&&l()),this},remove:function(){return k.each(arguments,(function(e,t){for(var r;(r=k.inArray(t,o,r))>-1;)o.splice(r,1),r<=s&&s--})),this},has:function(e){return e?k.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=a=[],r||t||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],a.push(r),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred((function(r){k.each(t,(function(t,n){var i=v(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function a(e,t,n,i){return function(){var s=this,l=arguments,c=function(){var r,c;if(!(e<o)){if((r=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,v(c)?i?c.call(r,a(o,t,U,i),a(o,t,j,i)):(o++,c.call(r,a(o,t,U,i),a(o,t,j,i),a(o,t,U,t.notifyWith))):(n!==U&&(s=void 0,l=[r]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,u.stackTrace),e+1>=o&&(n!==j&&(s=void 0,l=[r]),t.rejectWith(s,l))}};e?u():(k.Deferred.getStackHook&&(u.stackTrace=k.Deferred.getStackHook()),r.setTimeout(u))}}return k.Deferred((function(r){t[0][3].add(a(0,r,v(i)?i:U,r.notifyWith)),t[1][3].add(a(0,r,v(e)?e:U)),t[2][3].add(a(0,r,v(n)?n:j))})).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},o={};return k.each(t,(function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,r=t,n=Array(r),i=l.call(arguments),o=k.Deferred(),a=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?l.call(arguments):r,--t||o.resolveWith(n,i)}};if(t<=1&&(G(e,o.done(a(r)).resolve,o.reject,!t),"pending"===o.state()||v(i[r]&&i[r].then)))return o.then();for(;r--;)G(i[r],a(r),o.reject);return o.promise()}});var K=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&K.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){r.setTimeout((function(){throw e}))};var H=k.Deferred();function W(){a.removeEventListener("DOMContentLoaded",W),r.removeEventListener("load",W),k.ready()}k.fn.ready=function(e){return H.then(e).catch((function(e){k.readyException(e)})),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||H.resolveWith(a,[k]))}}),k.ready.then=H.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?r.setTimeout(k.ready):(a.addEventListener("DOMContentLoaded",W),r.addEventListener("load",W));var V=function(e,t,r,n,i,o,a){var s=0,l=e.length,c=null==r;if("object"===S(r))for(s in i=!0,r)V(e,t,s,r[s],!0,o,a);else if(void 0!==n&&(i=!0,v(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,r){return c.call(k(e),r)})),t))for(;s<l;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return i?e:c?t.call(e):l?t(e[0],r):o},q=/^-ms-/,z=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function $(e){return e.replace(q,"ms-").replace(z,Y)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=k.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[$(t)]=r;else for(n in t)i[$(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map($):(t=$(t))in n?[t]:t.match(B)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||k.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var J=new Q,Z=new Q,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(e){}Z.set(e,t,r)}else r=void 0;return r}k.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,r){return Z.access(e,t,r)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,r){return J.access(e,t,r)},_removeData:function(e,t){J.remove(e,t)}}),k.fn.extend({data:function(e,t){var r,n,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&0===(n=a[r].name).indexOf("data-")&&(n=$(n.slice(5)),re(o,n,i[n]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){Z.set(this,e)})):V(this,(function(t){var r;if(o&&void 0===t)return void 0!==(r=Z.get(o,e))?r:void 0!==(r=re(o,e))?r:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),k.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=J.get(e,t),r&&(!n||Array.isArray(r)?n=J.access(e,t,k.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=k.queue(e,t),n=r.length,i=r.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,(function(){k.dequeue(e,t)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return J.get(e,r)||J.access(e,r,{empty:k.Callbacks("once memory").add((function(){J.remove(e,[t+"queue",r])}))})}}),k.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?k.queue(this[0],e):void 0===t?this:this.each((function(){var r=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&k.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){k.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=k.Deferred(),o=this,a=this.length,s=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=J.get(o[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=a.documentElement,se=function(e){return k.contains(e.ownerDocument,e)},le={composed:!0};ae.getRootNode&&(se=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===k.css(e,"display")},ue=function(e,t,r,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=r.apply(e,n||[]),t)e.style[o]=a[o];return i};function de(e,t,r,n){var i,o,a=20,s=n?function(){return n.cur()}:function(){return k.css(e,t,"")},l=s(),c=r&&r[3]||(k.cssNumber[t]?"":"px"),u=e.nodeType&&(k.cssNumber[t]||"px"!==c&&+l)&&ie.exec(k.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)k.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,k.style(e,t,u+c),r=r||[]}return r&&(u=+u||+l||0,i=r[1]?u+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=u,n.end=i)),i}var he={};function pe(e){var t,r=e.ownerDocument,n=e.nodeName,i=he[n];return i||(t=r.body.appendChild(r.createElement(n)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),he[n]=i,i)}function fe(e,t){for(var r,n,i=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(r=n.style.display,t?("none"===r&&(i[o]=J.get(n,"display")||null,i[o]||(n.style.display="")),""===n.style.display&&ce(n)&&(i[o]=pe(n))):"none"!==r&&(i[o]="none",J.set(n,"display",r)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?k(this).show():k(this).hide()}))}});var ge=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i,ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&L(e,t)?k.merge([e],r):r}function Te(e,t){for(var r=0,n=e.length;r<n;r++)J.set(e[r],"globalEval",!t||J.get(t[r],"globalEval"))}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td;var Pe,Se,ke=/<|&#?\w+;/;function we(e,t,r,n,i){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===S(o))k.merge(h,o.nodeType?[o]:o);else if(ke.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(ye.exec(o)||["",""])[1].toLowerCase(),l=ve[s]||ve._default,a.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;k.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(n&&k.inArray(o,n)>-1)i&&i.push(o);else if(c=se(o),a=be(d.appendChild(o),"script"),c&&Te(a),r)for(u=0;o=a[u++];)me.test(o.type||"")&&r.push(o);return d}Pe=a.createDocumentFragment().appendChild(a.createElement("div")),(Se=a.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),Pe.appendChild(Se),m.checkClone=Pe.cloneNode(!0).cloneNode(!0).lastChild.checked,Pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Pe.cloneNode(!0).lastChild.defaultValue;var Ee=/^key/,Ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function _e(){return!1}function Le(e,t){return e===function(){try{return a.activeElement}catch(e){}}()==("focus"===t)}function Re(e,t,r,n,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof r&&(n=n||r,r=void 0),t)Re(e,s,r,n,t[s],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=_e;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each((function(){k.event.add(this,t,i,n,r)}))}function Oe(e,t,r){r?(J.set(e,t,!1),k.event.add(e,t,{namespace:!1,handler:function(e){var n,i,o=J.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(k.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=l.call(arguments),J.set(this,t,o),n=r(this,t),this[t](),o!==(i=J.get(this,t))||n?J.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(J.set(this,t,{value:k.event.trigger(k.extend(o[0],k.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&k.event.add(e,t,Ce)}k.event={global:{},add:function(e,t,r,n,i){var o,a,s,l,c,u,d,h,p,f,g,y=J.get(e);if(y)for(r.handler&&(r=(o=r).handler,i=o.selector),i&&k.find.matchesSelector(ae,i),r.guid||(r.guid=k.guid++),(l=y.events)||(l=y.events={}),(a=y.handle)||(a=y.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(B)||[""]).length;c--;)p=g=(s=xe.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(d=k.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=k.event.special[p]||{},u=k.extend({type:p,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:f.join(".")},o),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,f,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),k.event.global[p]=!0)},remove:function(e,t,r,n,i){var o,a,s,l,c,u,d,h,p,f,g,y=J.hasData(e)&&J.get(e);if(y&&(l=y.events)){for(c=(t=(t||"").match(B)||[""]).length;c--;)if(p=g=(s=xe.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=k.event.special[p]||{},h=l[p=(n?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!i&&g!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,y.handle)||k.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)k.event.remove(e,p+t[c],r,n,!0);k.isEmptyObject(l)&&J.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,o,a,s=k.event.fix(e),l=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],u=k.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=k.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,n,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},r=0;r<l;r++)void 0===a[i=(n=t[r]).selector+" "]&&(a[i]=n.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),a[i]&&o.push(n);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&L(t,"input")&&Oe(t,"click",Ce),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&L(t,"input")&&Oe(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&L(t,"input")&&J.get(t,"click")||L(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ae.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(e,t){k.event.special[e]={setup:function(){return Oe(this,e,Le),!1},trigger:function(){return Oe(this,e),!0},delegateType:t}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===n||k.contains(n,i))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}})),k.fn.extend({on:function(e,t,r,n){return Re(this,e,t,r,n)},one:function(e,t,r,n){return Re(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,k(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=_e),this.each((function(){k.event.remove(this,e,r,t)}))}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return L(e,"table")&&L(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var r,n,i,o,a,s,l,c;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(r=0,n=c[i].length;r<n;r++)k.event.add(t,i,c[i][r]);Z.hasData(e)&&(s=Z.access(e),l=k.extend({},s),Z.set(t,l))}}function Ge(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ge.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Ke(e,t,r,n){t=c.apply([],t);var i,o,a,s,l,u,d=0,h=e.length,p=h-1,f=t[0],g=v(f);if(g||h>1&&"string"==typeof f&&!m.checkClone&&Me.test(f))return e.each((function(i){var o=e.eq(i);g&&(t[0]=f.call(this,i,o.html())),Ke(o,t,r,n)}));if(h&&(o=(i=we(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(s=(a=k.map(be(i,"script"),Be)).length;d<h;d++)l=i,d!==p&&(l=k.clone(l,!0,!0),s&&k.merge(a,be(l,"script"))),r.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,k.map(a,Ue),d=0;d<s;d++)l=a[d],me.test(l.type||"")&&!J.access(l,"globalEval")&&k.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?k._evalUrl&&!l.noModule&&k._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):P(l.textContent.replace(Fe,""),l,u))}return e}function He(e,t,r){for(var n,i=t?k.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||k.cleanData(be(n)),n.parentNode&&(r&&se(n)&&Te(be(n,"script")),n.parentNode.removeChild(n));return e}k.extend({htmlPrefilter:function(e){return e.replace(De,"<$1></$2>")},clone:function(e,t,r){var n,i,o,a,s=e.cloneNode(!0),l=se(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=be(s),n=0,i=(o=be(e)).length;n<i;n++)Ge(o[n],a[n]);if(t)if(r)for(o=o||be(e),a=a||be(s),n=0,i=o.length;n<i;n++)je(o[n],a[n]);else je(e,s);return(a=be(s,"script")).length>0&&Te(a,!l&&be(e,"script")),s},cleanData:function(e){for(var t,r,n,i=k.event.special,o=0;void 0!==(r=e[o]);o++)if(X(r)){if(t=r[J.expando]){if(t.events)for(n in t.events)i[n]?k.event.remove(r,n):k.removeEvent(r,n,t.handle);r[J.expando]=void 0}r[Z.expando]&&(r[Z.expando]=void 0)}}}),k.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return V(this,(function(e){return void 0===e?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return k.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!ve[(ye.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(k.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ke(this,arguments,(function(t){var r=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(be(this)),r&&r.replaceChild(t,this))}),e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){k.fn[e]=function(e){for(var r,n=[],i=k(e),o=i.length-1,a=0;a<=o;a++)r=a===o?this:this.clone(!0),k(i[a])[t](r),u.apply(n,r.get());return this.pushStack(n)}}));var We=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},qe=new RegExp(oe.join("|"),"i");function ze(e,t,r){var n,i,o,a,s=e.style;return(r=r||Ve(e))&&(""!==(a=r.getPropertyValue(t)||r[t])||se(e)||(a=k.style(e,t)),!m.pixelBoxStyles()&&We.test(a)&&qe.test(t)&&(n=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(c).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),i=36===t(e.width),u.style.position="absolute",o=12===t(u.offsetWidth/3),ae.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,s,l,c=a.createElement("div"),u=a.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var $e=["Webkit","Moz","ms"],Xe=a.createElement("div").style,Qe={};function Je(e){return k.cssProps[e]||Qe[e]||(e in Xe?e:Qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=$e.length;r--;)if((e=$e[r]+t)in Xe)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,et=/^--/,tt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,r){var n=ie.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function it(e,t,r,n,i,o){var a="width"===t?1:0,s=0,l=0;if(r===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===r&&(l+=k.css(e,r+oe[a],!0,i)),n?("content"===r&&(l-=k.css(e,"padding"+oe[a],!0,i)),"margin"!==r&&(l-=k.css(e,"border"+oe[a]+"Width",!0,i))):(l+=k.css(e,"padding"+oe[a],!0,i),"padding"!==r?l+=k.css(e,"border"+oe[a]+"Width",!0,i):s+=k.css(e,"border"+oe[a]+"Width",!0,i));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function ot(e,t,r){var n=Ve(e),i=(!m.boxSizingReliable()||r)&&"border-box"===k.css(e,"boxSizing",!1,n),o=i,a=ze(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(a)){if(!r)return a;a="auto"}return(!m.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,n),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,r||(i?"border":"content"),o,n,a)+"px"}function at(e,t,r,n,i){return new at.prototype.init(e,t,r,n,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=ze(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=$(t),l=et.test(t),c=e.style;if(l||(t=Je(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(i=a.get(e,!1,n))?i:c[t];"string"==(o=typeof r)&&(i=ie.exec(r))&&i[1]&&(r=de(e,t,i),o="number"),null!=r&&r==r&&("number"!==o||l||(r+=i&&i[3]||(k.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,n))||(l?c.setProperty(t,r):c[t]=r))}},css:function(e,t,r,n){var i,o,a,s=$(t);return et.test(t)||(t=Je(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,r)),void 0===i&&(i=ze(e,t,n)),"normal"===i&&t in rt&&(i=rt[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),k.each(["height","width"],(function(e,t){k.cssHooks[t]={get:function(e,r,n){if(r)return!Ze.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,t,n):ue(e,tt,(function(){return ot(e,t,n)}))},set:function(e,r,n){var i,o=Ve(e),a=!m.scrollboxSize()&&"absolute"===o.position,s=(a||n)&&"border-box"===k.css(e,"boxSizing",!1,o),l=n?it(e,t,n,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-it(e,t,"border",!1,o)-.5)),l&&(i=ie.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=k.css(e,t)),nt(0,r,l)}}})),k.cssHooks.marginLeft=Ye(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(e,t){k.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+oe[n]+t]=o[n]||o[n-2]||o[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=nt)})),k.fn.extend({css:function(e,t){return V(this,(function(e,t,r){var n,i,o={},a=0;if(Array.isArray(t)){for(n=Ve(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,n);return o}return void 0!==r?k.style(e,t,r):k.css(e,t)}),e,t,arguments.length>1)}}),k.Tween=at,at.prototype={constructor:at,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(k.cssNumber[r]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,r=at.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):at.propHooks._default.set(this),this}},at.prototype.init.prototype=at.prototype,at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},at.propHooks.scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=at.prototype.init,k.fx.step={};var st,lt,ct=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function dt(){lt&&(!1===a.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(dt):r.setTimeout(dt,k.fx.interval),k.fx.tick())}function ht(){return r.setTimeout((function(){st=void 0})),st=Date.now()}function pt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=oe[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function ft(e,t,r){for(var n,i=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(n=i[o].call(r,t,e))return n}function gt(e,t,r){var n,i,o=0,a=gt.prefilters.length,s=k.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=st||ht(),r=Math.max(0,c.startTime+c.duration-t),n=1-(r/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(n);return s.notifyWith(e,[c,n,r]),n<1&&a?r:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},r),originalProperties:t,originalOptions:r,startTime:st||ht(),duration:r.duration,tweens:[],createTween:function(t,r){var n=k.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var r=0,n=t?c.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)c.tweens[r].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var r,n,i,o,a;for(r in e)if(i=t[n=$(r)],o=e[r],Array.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(a=k.cssHooks[n])&&"expand"in a)for(r in o=a.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(u,c.opts.specialEasing);o<a;o++)if(n=gt.prefilters[o].call(c,e,u,c.opts))return v(n.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return k.map(u,ft,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(gt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return de(r.elem,e,ie.exec(t),r),r}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(B);for(var r,n=0,i=e.length;n<i;n++)r=e[n],gt.tweeners[r]=gt.tweeners[r]||[],gt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,a,s,l,c,u,d="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&ce(e),y=J.get(e,"fxshow");for(n in r.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[n],ct.test(i)){if(delete t[n],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[n])continue;g=!0}p[n]=y&&y[n]||k.style(e,n)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(p))for(n in d&&1===e.nodeType&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=y&&y.display)&&(c=J.get(e,"display")),"none"===(u=k.css(e,"display"))&&(c?u=c:(fe([e],!0),c=e.style.display||c,u=k.css(e,"display"),fe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(e,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),r.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]}))),l=!1,p)l||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:c}),o&&(y.hidden=!g),g&&fe([e],!0),h.done((function(){for(n in g||fe([e]),J.remove(e,"fxshow"),p)k.style(e,n,p[n])}))),l=ft(g?y[n]:0,n,h),n in y||(y[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),k.speed=function(e,t,r){var n=e&&"object"==typeof e?k.extend({},e):{complete:r||!r&&t||v(e)&&e,duration:e,easing:r&&t||t&&!v(t)&&t};return k.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in k.fx.speeds?n.duration=k.fx.speeds[n.duration]:n.duration=k.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&k.dequeue(this,n.queue)},n},k.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=k.isEmptyObject(e),o=k.speed(t,r,n),a=function(){var t=gt(this,k.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=k.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&ut.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||k.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=J.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=k.timers,a=n?n.length:0;for(r.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),k.each(["toggle","show","hide"],(function(e,t){var r=k.fn[t];k.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(pt(t,!0),e,n,i)}})),k.each({slideDown:pt("show"),slideUp:pt("hide"),slideToggle:pt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){k.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),k.timers=[],k.fx.tick=function(){var e,t=0,r=k.timers;for(st=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||k.fx.stop(),st=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){lt||(lt=!0,dt())},k.fx.stop=function(){lt=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var yt,mt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return V(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){k.removeAttr(this,e)}))}}),k.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?k.prop(e,t,r):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?yt:void 0)),void 0!==r?null===r?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=k.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&L(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),yt={set:function(e,t,r){return!1===t?k.removeAttr(e,r):e.setAttribute(r,r),r}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=mt[t]||k.find.attr;mt[t]=function(e,t,n){var i,o,a=t.toLowerCase();return n||(o=mt[a],mt[a]=i,i=null!=r(e,t,n)?a:null,mt[a]=o),i}}));var vt=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;function Tt(e){return(e.match(B)||[]).join(" ")}function Pt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}k.fn.extend({prop:function(e,t){return V(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[k.propFix[e]||e]}))}}),k.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(e){var t,r,n,i,o,a,s,l=0;if(v(e))return this.each((function(t){k(this).addClass(e.call(this,t,Pt(this)))}));if((t=St(e)).length)for(;r=this[l++];)if(i=Pt(r),n=1===r.nodeType&&" "+Tt(i)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(s=Tt(n))&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,i,o,a,s,l=0;if(v(e))return this.each((function(t){k(this).removeClass(e.call(this,t,Pt(this)))}));if(!arguments.length)return this.attr("class","");if((t=St(e)).length)for(;r=this[l++];)if(i=Pt(r),n=1===r.nodeType&&" "+Tt(i)+" "){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(s=Tt(n))&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(r){k(this).toggleClass(e.call(this,r,Pt(this),t),t)})):this.each((function(){var t,i,o,a;if(n)for(i=0,o=k(this),a=St(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==r||((t=Pt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+Tt(Pt(r))+" ").indexOf(t)>-1)return!0;return!1}});var kt=/\r/g;k.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=v(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,k(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,(function(e){return null==e?"":e+""}))),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(kt,""):null==r?"":r:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:Tt(k.text(e))}},select:{get:function(e){var t,r,n,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(n=o<0?l:a?o:0;n<l;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!L(r.parentNode,"optgroup"))){if(t=k(r).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,o=k.makeArray(t),a=i.length;a--;)((n=i[a]).selected=k.inArray(k.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},m.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,i){var o,s,l,c,u,d,h,p,g=[n||a],y=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(s=p=l=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!wt.test(y+k.event.triggered)&&(y.indexOf(".")>-1&&(m=y.split("."),y=m.shift(),m.sort()),u=y.indexOf(":")<0&&"on"+y,(e=e[k.expando]?e:new k.Event(y,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),h=k.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!b(n)){for(c=h.delegateType||y,wt.test(c+y)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(n.ownerDocument||a)&&g.push(l.defaultView||l.parentWindow||r)}for(o=0;(s=g[o++])&&!e.isPropagationStopped();)p=s,e.type=o>1?c:h.bindType||y,(d=(J.get(s,"events")||{})[e.type]&&J.get(s,"handle"))&&d.apply(s,t),(d=u&&s[u])&&d.apply&&X(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=y,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(g.pop(),t)||!X(n)||u&&v(n[y])&&!b(n)&&((l=n[u])&&(n[u]=null),k.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,Et),n[y](),e.isPropagationStopped()&&p.removeEventListener(y,Et),k.event.triggered=void 0,l&&(n[u]=l)),e.result}},simulate:function(e,t,r){var n=k.extend(new k.Event,r,{type:e,isSimulated:!0});k.event.trigger(n,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each((function(){k.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return k.event.trigger(e,t,r,!0)}}),m.focusin||k.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){k.event.simulate(t,e.target,k.event.fix(e))};k.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=J.access(n,t);i||n.addEventListener(e,r,!0),J.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=J.access(n,t)-1;i?J.access(n,t,i):(n.removeEventListener(e,r,!0),J.remove(n,t))}}}));var At=r.location,xt=Date.now(),Ct=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var _t=/\[\]$/,Lt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,r,n){var i;if(Array.isArray(t))k.each(t,(function(t,i){r||_t.test(e)?n(e,i):Dt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==S(t))n(e,t);else for(i in t)Dt(e+"["+i+"]",t[i],r,n)}k.param=function(e,t){var r,n=[],i=function(e,t){var r=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,(function(){i(this.name,this.value)}));else for(r in e)Dt(r,e[r],t,i);return n.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Ot.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var r=k(this).val();return null==r?null:Array.isArray(r)?k.map(r,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:r.replace(Lt,"\r\n")}})).get()}});var It=/%20/g,Mt=/#.*$/,Ft=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:GET|HEAD)$/,Ut=/^\/\//,jt={},Gt={},Kt="*/".concat("*"),Ht=a.createElement("a");function Wt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(B)||[];if(v(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Vt(e,t,r,n){var i={},o=e===Gt;function a(s){var l;return i[s]=!0,k.each(e[s]||[],(function(e,s){var c=s(t,r,n);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function qt(e,t){var r,n,i=k.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&k.extend(!0,e,n),e}Ht.href=At.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,k.ajaxSettings),t):qt(k.ajaxSettings,e)},ajaxPrefilter:Wt(jt),ajaxTransport:Wt(Gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,s,l,c,u,d,h,p,f=k.ajaxSetup({},t),g=f.context||f,y=f.context&&(g.nodeType||g.jquery)?k(g):k.event,m=k.Deferred(),v=k.Callbacks("once memory"),b=f.statusCode||{},T={},P={},S="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Nt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=P[e.toLowerCase()]=P[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)w.always(e[w.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||S;return n&&n.abort(t),E(0,t),this}};if(m.promise(w),f.url=((e||f.url||At.href)+"").replace(Ut,At.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(B)||[""],null==f.crossDomain){c=a.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ht.protocol+"//"+Ht.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),Vt(jt,f,t,w),u)return w;for(h in(d=k.event&&f.global)&&0==k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Bt.test(f.type),i=f.url.replace(Mt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(p=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Ct.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Ft,"$1"),p=(Ct.test(i)?"&":"?")+"_="+xt+++p),f.url=i+p),f.ifModified&&(k.lastModified[i]&&w.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&w.setRequestHeader("If-None-Match",k.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Kt+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(g,w,f)||u))return w.abort();if(S="abort",v.add(f.complete),w.done(f.success),w.fail(f.error),n=Vt(Gt,f,t,w)){if(w.readyState=1,d&&y.trigger("ajaxSend",[w,f]),u)return w;f.async&&f.timeout>0&&(l=r.setTimeout((function(){w.abort("timeout")}),f.timeout));try{u=!1,n.send(T,E)}catch(e){if(u)throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,a,s){var c,h,p,T,P,S=t;u||(u=!0,l&&r.clearTimeout(l),n=void 0,o=s||"",w.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(T=function(e,t,r){for(var n,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in s)if(s[i]&&s[i].test(n)){l.unshift(i);break}if(l[0]in r)o=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),r[o]}(f,w,a)),T=function(e,t,r,n){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,T,w,c),c?(f.ifModified&&((P=w.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=P),(P=w.getResponseHeader("etag"))&&(k.etag[i]=P)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=T.state,h=T.data,c=!(p=T.error))):(p=S,!e&&S||(S="error",e<0&&(e=0))),w.status=e,w.statusText=(t||S)+"",c?m.resolveWith(g,[h,S,w]):m.rejectWith(g,[w,S,p]),w.statusCode(b),b=void 0,d&&y.trigger(c?"ajaxSuccess":"ajaxError",[w,f,c?h:p]),v.fireWith(g,[w,S]),d&&(y.trigger("ajaxComplete",[w,f]),--k.active||k.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,r){return k.get(e,t,r,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],(function(e,t){k[t]=function(e,r,n,i){return v(r)&&(i=i||n,n=r,r=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:r,success:n},k.isPlainObject(e)&&e))}})),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){k(this).wrapInner(e.call(this,t))})):this.each((function(){var t=k(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(r){k(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Yt=k.ajaxSettings.xhr();m.cors=!!Yt&&"withCredentials"in Yt,m.ajax=Yt=!!Yt,k.ajaxTransport((function(e){var t,n;if(m.cors||Yt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),k.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),k.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=k("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){r&&r()}}}));var $t,Xt=[],Qt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||k.expando+"_"+xt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,a,s=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Qt,"$1"+i):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||k.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?k(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(i)),a&&v(o)&&o(a[0]),a=o=void 0})),"script"})),m.createHTMLDocument=(($t=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),k.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(m.createHTMLDocument?((n=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(n)):t=a),o=!r&&[],(i=R.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var n,i,o},k.fn.load=function(e,t,r){var n,i,o,a=this,s=e.indexOf(" ");return s>-1&&(n=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(n?k("<div>").append(k.parseHTML(e)).find(n):e)})).always(r&&function(e,t){a.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){k.fn[t]=function(e){return this.on(t,e)}})),k.expr.pseudos.animated=function(e){return k.grep(k.timers,(function(t){return e===t.elem})).length},k.offset={setOffset:function(e,t,r){var n,i,o,a,s,l,c=k.css(e,"position"),u=k(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=k.css(e,"top"),l=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(n=u.position()).top,i=n.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),v(t)&&(t=t.call(e,r,k.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):u.css(d)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){k.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===k.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(n,"marginTop",!0),left:t.left-i.left-k.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||ae}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;k.fn[e]=function(n){return V(this,(function(e,n,i){var o;if(b(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):e[n]=i}),e,n,arguments.length)}})),k.each(["top","left"],(function(e,t){k.cssHooks[t]=Ye(m.pixelPosition,(function(e,r){if(r)return r=ze(e,t),We.test(r)?k(e).position()[t]+"px":r}))})),k.each({Height:"height",Width:"width"},(function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){k.fn[n]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===o?"margin":"border");return V(this,(function(t,r,i){var o;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?k.css(t,r,s):k.style(t,r,i,s)}),t,a?i:void 0,a)}}))})),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){k.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),k.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=l.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(l.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=L,k.isFunction=v,k.isWindow=b,k.camelCase=$,k.type=S,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return k}.apply(t,[]))||(e.exports=n);var Jt=r.jQuery,Zt=r.$;return k.noConflict=function(e){return r.$===k&&(r.$=Zt),e&&r.jQuery===k&&(r.jQuery=Jt),k},i||(r.jQuery=r.$=k),k}))},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(13),a=r(5),s={[o.EventType.kEventTypeSendEvent]:"SendEvent",[o.EventType.kEventTypeControlMedia]:"ControlMedia",[o.EventType.kEventTypePlayMedia]:"PlayMedia",[o.EventType.kEventTypeScrollTo]:"ScrollTo",[o.EventType.kEventTypeSetPage]:"SetPage",[o.EventType.kEventTypeRequestFirstLineBounds]:"RequestFirstLineBounds",[o.EventType.kEventTypePreroll]:"Preroll",[o.EventType.kEventTypeSpeak]:"Speak",[o.EventType.kEventTypeFocus]:"Focus",[o.EventType.kEventTypeOpenURL]:"OpenURL"};t.Event=class{constructor(e,t){this.event=e,this.renderer=t,this.isTerminated=!1,this.logger=a.LoggerFactory.getLogger(s[e.getType()]||"Event"),e.addTerminateCallback(()=>{this.terminate()})}terminate(){this.isTerminated=!0}resolve(){this.event.resolve()}waitForValidLayout(e){return n(this,void 0,void 0,(function*(){for(;;){const t=e.getCalculatedByKey(i.PropertyKey.kPropertyBounds);if(t.width>0&&t.width<1e6)break;yield this.waitAFrame()}}))}wait(e){return new Promise(t=>{setTimeout(t,e)})}waitAFrame(){const e=Date.now();return new Promise(t=>{requestAnimationFrame(()=>{t(Date.now()-e)})})}destroy(){this.renderer=void 0,this.event=void 0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kEventPropertyAlign=0]="kEventPropertyAlign",e[e.kEventPropertyArguments=1]="kEventPropertyArguments",e[e.kEventPropertyAudioTrack=2]="kEventPropertyAudioTrack",e[e.kEventPropertyCommand=3]="kEventPropertyCommand",e[e.kEventPropertyComponent=4]="kEventPropertyComponent",e[e.kEventPropertyComponents=5]="kEventPropertyComponents",e[e.kEventPropertyDirection=6]="kEventPropertyDirection",e[e.kEventPropertyHighlightMode=7]="kEventPropertyHighlightMode",e[e.kEventPropertyPosition=8]="kEventPropertyPosition",e[e.kEventPropertySource=9]="kEventPropertySource",e[e.kEventPropertyValue=10]="kEventPropertyValue"}(t.EventProperty||(t.EventProperty={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(80),i=r(1),o=r(81),a=r(0),s=r(10),l=r(8),c=r(5),u={[l.ComponentType.kComponentTypeContainer]:"Container",[l.ComponentType.kComponentTypeFrame]:"Frame",[l.ComponentType.kComponentTypeImage]:"Image",[l.ComponentType.kComponentTypePager]:"Pager",[l.ComponentType.kComponentTypeScrollView]:"ScrollView",[l.ComponentType.kComponentTypeSequence]:"Sequence",[l.ComponentType.kComponentTypeText]:"Text",[l.ComponentType.kComponentTypeTouchWrapper]:"TouchWrapper",[l.ComponentType.kComponentTypeVideo]:"Video",[l.ComponentType.kComponentTypeVectorGraphic]:"VectorGraphic"};t.Component=class extends n{constructor(e,t,r,n){super(),this.renderer=e,this.component=t,this.factory=r,this.parent=n,this.container=document.createElement("div"),this.$container=i(this.container),this.children=[],this.props={},this.isDestroyed=!1,this.state={[s.UpdateType.kUpdatePagerPosition]:0,[s.UpdateType.kUpdatePressState]:0,[s.UpdateType.kUpdatePressed]:0,[s.UpdateType.kUpdateScrollPosition]:0,[s.UpdateType.kUpdateTakeFocus]:0},this.executors=new Map,this.propExecutor=(e,...t)=>{for(const r of t)this.executors.set(r,r=>{const n=Object.keys(t);for(const e of n)delete r[parseInt(e,10)];e()});return this.propExecutor},this.setTransform=()=>{const e=this.props[a.PropertyKey.kPropertyTransform];this.$container.css({transform:e})},this.setOpacity=()=>{this.$container.css("opacity",this.props[a.PropertyKey.kPropertyOpacity])},this.setBoundsAndDisplay=()=>{this.bounds=this.props[a.PropertyKey.kPropertyBounds];let e=this.props[a.PropertyKey.kPropertyDisplay];switch(this.hasValidBounds()||(e=o.Display.kDisplayInvisible),e){case o.Display.kDisplayInvisible:case o.Display.kDisplayNone:this.$container.css({display:"none"});break;case o.Display.kDisplayNormal:this.$container.css({display:""});break;default:this.logger.warn(`Incorrect display type: ${e}`)}let t=0,r=0;if(this.parent&&this.parent.component.getType()===l.ComponentType.kComponentTypeFrame){const e=this.parent.component.getCalculatedByKey(a.PropertyKey.kPropertyBorderWidth);t-=e,r-=e}this.bounds={top:this.bounds.top+t,left:this.bounds.left+r,height:this.bounds.height,width:this.bounds.width},this.$container.css("top",this.bounds.top),this.$container.css("left",this.bounds.left),this.$container.css("width",this.bounds.width),this.$container.css("height",this.bounds.height),this.innerBounds=this.props[a.PropertyKey.kPropertyInnerBounds],this.$container.css("padding-left",this.innerBounds.left),this.$container.css("padding-right",this.bounds.width-this.innerBounds.left-this.innerBounds.width),this.$container.css("padding-top",this.innerBounds.top),this.$container.css("padding-bottom",this.bounds.height-this.innerBounds.top-this.innerBounds.height),this.boundsUpdated()},this.setUserProperties=()=>{if(!this.renderer)return;const e=this.renderer.getDeveloperToolOptions();if(!e)return;const t=this.props[a.PropertyKey.kPropertyUser],r=e.mappingKey;if(r&&t.hasOwnProperty(r)){const e=t[r]+this.id;this.renderer.componentByMappingKey.set(e,this)}const n=e.writeKeys;if(n&&Array.isArray(n))for(const e of n)t.hasOwnProperty(e)&&this.container.setAttribute(["data",e].join("-"),t[e])},this.setShadow=()=>{const e=`${this.props[a.PropertyKey.kPropertyShadowHorizontalOffset]}px ${this.props[a.PropertyKey.kPropertyShadowVerticalOffset]}px ${this.props[a.PropertyKey.kPropertyShadowRadius]}px ${this.numberToColor(this.props[a.PropertyKey.kPropertyShadowColor])}`;this.applyCssShadow(e)},this.applyCssShadow=e=>{this.$container.css("box-shadow",e)},this.logger=c.LoggerFactory.getLogger(u[t.getType()]||"Component"),this.$container.css({position:"absolute","transform-origin":"0% 0%","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),this.id=t.getUniqueId(),this.$container.attr("id",this.id),this.assignedId=t.getId(),e&&(e.componentMap[this.id]=this,e.componentIdMap[this.assignedId]=this),this.container.classList.add("apl-"+this.constructor.name.toLowerCase()),this.parent=n,this.propExecutor(this.setTransform,a.PropertyKey.kPropertyTransform)(this.setBoundsAndDisplay,a.PropertyKey.kPropertyBounds,a.PropertyKey.kPropertyInnerBounds,a.PropertyKey.kPropertyDisplay)(this.setOpacity,a.PropertyKey.kPropertyOpacity)(this.setUserProperties,a.PropertyKey.kPropertyUser)(this.setShadow,a.PropertyKey.kPropertyShadowHorizontalOffset,a.PropertyKey.kPropertyShadowVerticalOffset,a.PropertyKey.kPropertyShadowRadius,a.PropertyKey.kPropertyShadowColor)}init(){const e=this.component.getChildCount();for(let t=0;t<e;t++){const e=this.component.getChildAt(t),r=this.factory(this.renderer,e,this);this.container.appendChild(r.container),this.children[t]=r}const t=this.component.getCalculated();this.setProperties(t),this.alignSize();for(const e of this.children)e.init()}onPropertiesUpdated(){}setProperties(e){Object.keys(e).forEach(t=>{const r=parseInt(t,10);this.props[r]=e[r]}),Object.keys(e).forEach(t=>{const r=parseInt(t,10);if(r in e){const t=this.executors.get(r);t&&t(e)}}),this.onPropertiesUpdated()}updateDirtyProps(){const e=this.component.getDirtyProps();this.setProperties(e)}update(e,t){this.state[e]=t,this.component.update(e,t)}destroy(e=!1){this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.isDestroyed=!0,this.parent=void 0,delete this.renderer.componentMap[this.id],delete this.renderer.componentMap[this.assignedId],this.renderer=void 0;for(const t of this.children)t.destroy(e);this.children=void 0,e&&(this.component.delete(),this.component=void 0)}numberToColor(e){return`rgba(${255&e>>24}, ${255&e>>16}, ${255&e>>8}, ${(255&e)/255})`}hasValidBounds(){return this.bounds.width>0&&this.bounds.width<1e6}inflateAndAddChild(e,t){const r=this.component.inflateChild(t);let n;return this.component.insertChild(r,e)&&(n=this.factory(this.renderer,r,this,!0,e),this.children.splice(e,0,n)),n}remove(){return!!this.component.remove()&&(this.parent&&this.parent.children&&this.parent.children.splice(this.parent.children.indexOf(this),1),this.destroy(!0),!0)}boundsUpdated(){}isLayout(){return!1}alignSize(){let e=this.bounds.width,t=this.bounds.height;if(this.parent&&this.parent.component.getType()===l.ComponentType.kComponentTypeContainer&&this.isLayout()&&(this.bounds.width+this.bounds.left>this.parent.bounds.width||this.bounds.height+this.bounds.top>this.parent.bounds.height)){if(e=Math.min(this.parent.bounds.width-this.bounds.left,this.bounds.width),t=Math.min(this.parent.bounds.height-this.bounds.top,this.bounds.height),this.logger.warn(`Component ${this.id} has bounds that is bigger than parent bounds.\n`+"Check your template correctness.\n"+`Adjusting ${this.id} to parent ${this.parent.id}\n`+`WIDTH: ${this.bounds.width} => ${e}\n`+`HEIGHT: ${this.bounds.height} => ${t}`),this.bounds={left:this.bounds.left,top:this.bounds.top,width:e,height:t},this.innerBounds.width>this.bounds.width||this.innerBounds.height>this.bounds.height){const r=this.bounds.width-e,n=this.bounds.height-t;this.innerBounds={left:this.innerBounds.left,top:this.innerBounds.top,width:this.innerBounds.width-r,height:this.innerBounds.height-n}}this.$container.css("width",e),this.$container.css("height",t),this.$container.css("padding-left",this.innerBounds.left),this.$container.css("padding-right",e-this.innerBounds.left-this.innerBounds.width),this.$container.css("padding-top",this.innerBounds.top),this.$container.css("padding-bottom",t-this.innerBounds.top-this.innerBounds.height),this.boundsUpdated()}}getProperties(){return this.component.getCalculated()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(67);class i{static initialize(e,t){this.rootLogger.setDefaultLevel(e),this.rootLogger.methodFactory=(e,r,n)=>{const o=i.originalFactory(e,r,n);return r=>{t?t(e,n,r):o(`${e[0].toUpperCase()} ${n}:  ${r}`)}},this.rootLogger.setLevel(this.rootLogger.getLevel()),this.initialized=!0}static getLogger(e){return this.initialized||this.initialize("info"),this.rootLogger.getLogger(e)}}i.rootLogger=n,i.originalFactory=i.rootLogger.methodFactory,i.initialized=!1,t.LoggerFactory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(96);var i;t.FOCUSABLE_ELEMENT="focusable-element",t.DEFAULT_SECTION="section-default",t.SCROLL_INTO_VIEW="scrollIntoView",function(e){e.NONE="none",e.SELF_FIRST="self-first",e.SELF_ONLY="self-only"}(i=t.SectionType||(t.SectionType={}));class o{static init(){this.navigationEnabled||(n.init(),this.navigationEnabled=!0)}static uninit(){this.navigationEnabled&&(n.clear(),n.uninit(),this.navigationEnabled=!1)}static enabled(){return this.navigationEnabled}static createSectionName(e,t="x"){return`section-${e.replace(/\W/g,"")}-${t.replace(/\W/g,"")}`}static addSection(e,r=i.NONE,o=!1){if(!this.navigationEnabled)return;const a=`.${t.FOCUSABLE_ELEMENT}.${e}`;n.add(e,{selector:a,restrict:r,straightOnly:o}),n.makeFocusable(e)}static makeNavigable(e,r=t.DEFAULT_SECTION,n=(()=>{}),i=(()=>{}),o=(()=>!0),a){this.navigationEnabled&&(e.classList.add(t.FOCUSABLE_ELEMENT),e.classList.add(r),e.addEventListener("sn:willfocus",r=>{if(a&&!o(a,e.id))return void r.preventDefault();const n=new CustomEvent(t.SCROLL_INTO_VIEW,{bubbles:!0,detail:{id:e.id}});e.dispatchEvent(n)}),e.addEventListener("sn:focused",e=>{e.stopPropagation(),n&&n()}),e.addEventListener("sn:unfocused",e=>{e.stopPropagation(),i&&i()}),e.tabIndex=-1)}static setFocusableComponents(){this.navigationEnabled&&(o.addSection(t.DEFAULT_SECTION),n.setDefaultSection(t.DEFAULT_SECTION),n.makeFocusable())}static set(e,t){this.navigationEnabled&&n.set(e,t)}static enable(e){this.navigationEnabled&&n.enable(e)}static disable(e){this.navigationEnabled&&n.disable(e)}static pause(){this.navigationEnabled&&n.pause()}static resume(){this.navigationEnabled&&n.resume()}static focus(e=t.DEFAULT_SECTION){this.navigationEnabled&&n.focus(e)}static move(e){this.navigationEnabled&&n.move(e)}}o.navigationEnabled=!1,t.SpatialNavigation=o},function(e,t,r){var n,i,o;!function(r,a){"use strict";i=[t],void 0!==(o="function"==typeof(n=function(e){var t,r=(t=[],function(e){return t[0]=128==(128&e)?"1":"0",t[1]=64==(64&e)?"1":"0",t[2]=32==(32&e)?"1":"0",t[3]=16==(16&e)?"1":"0",t[4]=8==(8&e)?"1":"0",t[5]=4==(4&e)?"1":"0",t[6]=2==(2&e)?"1":"0",t[7]=1==(1&e)?"1":"0",t.join("")});e.getFrameByteLength=function(t,r,n,i,o){var a=e.sampleLengthMap[i][o],s=n?"11"===o?4:1:0,l=1e3*t/8;return Math.floor(a*l/r+s)},e.getXingOffset=function(e,t){var r="11"===t;return"11"===e?r?21:36:r?13:21},e.v1l1Bitrates={"0000":"free","0001":32,"0010":64,"0011":96,"0100":128,"0101":160,"0110":192,"0111":224,1e3:256,1001:288,1010:320,1011:352,1100:384,1101:416,1110:448,1111:"bad"},e.v1l2Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:160,1010:192,1011:224,1100:256,1101:320,1110:384,1111:"bad"},e.v1l3Bitrates={"0000":"free","0001":32,"0010":40,"0011":48,"0100":56,"0101":64,"0110":80,"0111":96,1e3:112,1001:128,1010:160,1011:192,1100:224,1101:256,1110:320,1111:"bad"},e.v2l1Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:144,1010:160,1011:176,1100:192,1101:224,1110:256,1111:"bad"},e.v2l2Bitrates={"0000":"free","0001":8,"0010":16,"0011":24,"0100":32,"0101":40,"0110":48,"0111":56,1e3:64,1001:80,1010:96,1011:112,1100:128,1101:144,1110:160,1111:"bad"},e.v2l3Bitrates=e.v2l2Bitrates,e.v1SamplingRates={"00":44100,"01":48e3,10:32e3,11:"reserved"},e.v2SamplingRates={"00":22050,"01":24e3,10:16e3,11:"reserved"},e.v25SamplingRates={"00":11025,"01":12e3,10:8e3,11:"reserved"},e.channelModes={"00":"Stereo","01":"Joint stereo (Stereo)",10:"Dual channel (Stereo)",11:"Single channel (Mono)"},e.mpegVersionDescription={"00":"MPEG Version 2.5 (unofficial)","01":"reserved",10:"MPEG Version 2 (ISO/IEC 13818-3)",11:"MPEG Version 1 (ISO/IEC 11172-3)"},e.layerDescription={"00":"reserved","01":"Layer III",10:"Layer II",11:"Layer I"},e.bitrateMap={11:{"01":e.v1l3Bitrates,10:e.v1l2Bitrates,11:e.v1l1Bitrates},10:{"01":e.v2l3Bitrates,10:e.v2l2Bitrates,11:e.v2l1Bitrates}},e.samplingRateMap={"00":e.v25SamplingRates,10:e.v2SamplingRates,11:e.v1SamplingRates},e.v1SampleLengths={"01":1152,10:1152,11:384},e.v2SampleLengths={"01":576,10:1152,11:384},e.sampleLengthMap={"01":e.v2SampleLengths,10:e.v2SampleLengths,11:e.v1SampleLengths},e.wordSeqFromStr=function(e){for(var t=e.length-1,r=[];t>=0;--t)r[t]=e.charCodeAt(t);return r},e.seq={id3:e.wordSeqFromStr("ID3"),xing:e.wordSeqFromStr("Xing"),info:e.wordSeqFromStr("Info")},e.noOp=function(){},e.unsynchsafe=function(e){for(var t=0,r=2130706432;r;)t>>=1,t|=e&r,r>>=8;return t},e.isSeq=function(e,t,r){for(var n=e.length-1;n>=0;n--)if(e[n]!==t.getUint8(r+n))return!1;return!0},e.locateSeq=function(t,r,n,i){for(var o=0,a=i-t.length+1;o<a;++o)if(e.isSeq(t,r,n+o))return n+o;return-1},e.locateStrTrm={iso:function(t,r,n){return e.locateSeq([0],t,r,n)},ucs:function(t,r,n){var i=e.locateSeq([0,0],t,r,n);return-1===i?-1:((i-r)%2!=0&&++i,i)}},e.readStr={iso:function(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer,t,r))},ucs:function(e,t,r){65534!==e.getUint16(t)&&65279!==e.getUint16(t)||(t+=2,r-=2);var n=e.buffer;return t%2==1&&(n=n.slice(t,t+r),t=0),String.fromCharCode.apply(null,new Uint16Array(n,t,r/2))}},e.readTrmStr={iso:function(t,r,n){var i=e.locateStrTrm.iso(t,r,n);return-1!==i&&(n=i-r),e.readStr.iso(t,r,n)},ucs:function(t,r,n){var i=e.locateStrTrm.ucs(t,r,n);return-1!==i&&(n=i-r),e.readStr.ucs(t,r,n)}},e.readFrameHeader=function(t,n){if(n||(n=0),t.byteLength-n<=4)return null;if(255!==t.getUint8(n))return null;var i=t.getUint8(n+1);if(i<224)return null;var o=r(i).substr(3,2),a=r(i).substr(5,2),s={_section:{type:"frameHeader",byteLength:4,offset:n},mpegAudioVersionBits:o,mpegAudioVersion:e.mpegVersionDescription[o],layerDescriptionBits:a,layerDescription:e.layerDescription[a],isProtected:1&i};if(s.protectionBit=s.isProtected?"1":"0","reserved"===s.mpegAudioVersion)return null;if("reserved"===s.layerDescription)return null;var l=t.getUint8(n+2);if(l=r(l),s.bitrateBits=l.substr(0,4),s.bitrate=e.bitrateMap[o][a][s.bitrateBits],"bad"===s.bitrate)return null;if(s.samplingRateBits=l.substr(4,2),s.samplingRate=e.samplingRateMap[o][s.samplingRateBits],"reserved"===s.samplingRate)return null;s.frameIsPaddedBit=l.substr(6,1),s.frameIsPadded="1"===s.frameIsPaddedBit,s.framePadding=s.frameIsPadded?1:0,s.privateBit=l.substr(7,1);var c=t.getUint8(n+3);return s.channelModeBits=r(c).substr(0,2),s.channelMode=e.channelModes[s.channelModeBits],s},e.readFrame=function(t,r,n){r||(r=0);var i={_section:{type:"frame",offset:r},header:e.readFrameHeader(t,r)},o=i.header;if(!o)return null;i._section.sampleLength=e.sampleLengthMap[o.mpegAudioVersionBits][o.layerDescriptionBits],i._section.byteLength=e.getFrameByteLength(o.bitrate,o.samplingRate,o.framePadding,o.mpegAudioVersionBits,o.layerDescriptionBits),i._section.nextFrameIndex=r+i._section.byteLength;var a=e.getXingOffset(o.mpegAudioVersionBits,o.channelModeBits);return e.isSeq(e.seq.xing,t,r+a)||e.isSeq(e.seq.info,t,r+a)?null:n&&!e.readFrameHeader(t,i._section.nextFrameIndex)?null:i}})?n.apply(t,i):n)&&(e.exports=o)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kComponentTypeContainer=0]="kComponentTypeContainer",e[e.kComponentTypeFrame=1]="kComponentTypeFrame",e[e.kComponentTypeImage=2]="kComponentTypeImage",e[e.kComponentTypePager=3]="kComponentTypePager",e[e.kComponentTypeScrollView=4]="kComponentTypeScrollView",e[e.kComponentTypeSequence=5]="kComponentTypeSequence",e[e.kComponentTypeText=6]="kComponentTypeText",e[e.kComponentTypeTouchWrapper=7]="kComponentTypeTouchWrapper",e[e.kComponentTypeVectorGraphic=8]="kComponentTypeVectorGraphic",e[e.kComponentTypeVideo=9]="kComponentTypeVideo"}(t.ComponentType||(t.ComponentType={}))},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(26),o=r(0),a=r(27),s=r(28),l=r(4),c=r(82),u=r(85),d=r(29),h=r(30);class p extends l.Component{constructor(e,t,r,l){super(e,t,r,l),this.textContainer=document.createElement("p"),this.$textContainer=n(this.textContainer),this.textCss={display:"table-cell","overflow-wrap":"break-word","white-space":"pre-wrap","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},this.setDimensions=()=>{this.setBoundsAndDisplay(),this.$textContainer.css(this.textCss),this.$textContainer.css("width",this.innerBounds.width),this.$textContainer.css("height",this.innerBounds.height),this.$textContainer.css("word-break","break-word"),this.$textContainer.css("hyphens","auto")},this.setTextOpacity=()=>{this.setOpacity(),this.$textContainer.css("opacity",this.props[o.PropertyKey.kPropertyOpacity])},this.setTextClamping=()=>{this.maxLines=this.props[o.PropertyKey.kPropertyMaxLines]},this.setText=()=>{this.styledText=this.props[o.PropertyKey.kPropertyText]},this.setFontStyle=()=>{this.props[o.PropertyKey.kPropertyFontStyle]===i.FontStyle.kFontStyleItalic&&this.$textContainer.css("font-style","italic")},this.setFontWeight=()=>{this.$textContainer.css("font-weight",this.props[o.PropertyKey.kPropertyFontWeight])},this.setLetterSpacing=()=>{this.$textContainer.css("letter-spacing",this.props[o.PropertyKey.kPropertyLetterSpacing])},this.setFontSize=()=>{this.$textContainer.css("font-size",this.props[o.PropertyKey.kPropertyFontSize])},this.setLineHeight=()=>{this.$textContainer.css("line-height",this.props[o.PropertyKey.kPropertyLineHeight])},this.setFontFamily=()=>{const e=d.FontUtils.getFont(this.props[o.PropertyKey.kPropertyFontFamily]);this.$textContainer.css("font-family",e)},this.setTextAlign=()=>{switch(this.props[o.PropertyKey.kPropertyTextAlign]){case a.TextAlign.kTextAlignCenter:this.$container.css("text-align","center");break;case a.TextAlign.kTextAlignLeft:this.$container.css("text-align","left");break;case a.TextAlign.kTextAlignRight:this.$container.css("text-align","right");break;case a.TextAlign.kTextAlignAuto:break;default:this.logger.warn(`Incorrect TextAlign type: ${this.props[o.PropertyKey.kPropertyTextAlign]}`)}},this.setTextAlignVertical=()=>{switch(this.props[o.PropertyKey.kPropertyTextAlignVertical]){case s.TextAlignVertical.kTextAlignVerticalCenter:this.$textContainer.css("vertical-align","middle");break;case s.TextAlignVertical.kTextAlignVerticalBottom:this.$textContainer.css("vertical-align","bottom");break;case s.TextAlignVertical.kTextAlignVerticalTop:this.$textContainer.css("vertical-align","top");break;case s.TextAlignVertical.kTextAlignVerticalAuto:break;default:this.logger.warn(`Incorrect TextAlignVertical type: ${this.props[o.PropertyKey.kPropertyTextAlign]}`)}},this.setColor=()=>{const e=this.props[o.PropertyKey.kPropertyColor];this.$textContainer.css("color",this.numberToColor(e))},this.setKaraokeColors=()=>{this.renderer&&this.renderer.getLegacyKaraoke()?(this.colorKaraoke=this.props[o.PropertyKey.kPropertyColor],this.colorNonKaraoke=this.props[o.PropertyKey.kPropertyColorNonKaraoke],this.$textContainer.css("color",this.numberToColor(this.colorNonKaraoke))):(this.colorKaraoke=this.props[o.PropertyKey.kPropertyColorKaraokeTarget],this.colorNonKaraoke=this.props[o.PropertyKey.kPropertyColor])},this.applyCssShadow=e=>{this.$textContainer.css("text-shadow",e)},this.richTextParser=new c.RichTextParser,this.propExecutor(this.setDimensions,o.PropertyKey.kPropertyBounds,o.PropertyKey.kPropertyInnerBounds)(this.setText,o.PropertyKey.kPropertyText)(this.setFontStyle,o.PropertyKey.kPropertyFontStyle)(this.setFontWeight,o.PropertyKey.kPropertyFontWeight)(this.setLetterSpacing,o.PropertyKey.kPropertyLetterSpacing)(this.setFontSize,o.PropertyKey.kPropertyFontSize)(this.setLineHeight,o.PropertyKey.kPropertyLineHeight)(this.setFontFamily,o.PropertyKey.kPropertyFontFamily)(this.setTextAlign,o.PropertyKey.kPropertyTextAlign)(this.setTextAlignVertical,o.PropertyKey.kPropertyTextAlignVertical)(this.setTextClamping,o.PropertyKey.kPropertyMaxLines)(this.setColor,o.PropertyKey.kPropertyColor)(this.setKaraokeColors,o.PropertyKey.kPropertyColorKaraokeTarget,o.PropertyKey.kPropertyColorNonKaraoke)(this.setTextOpacity,o.PropertyKey.kPropertyOpacity)}getLineRanges(){return this.lineRanges}getPlainText(){return this.styledText.text}highlight(e,t){const r=(e,r)=>{const n=this.textContainer.childNodes[e];r?n.style.color=this.numberToColor(this.colorKaraoke):t?n.style.removeProperty("color"):n.style.color=this.numberToColor(this.colorNonKaraoke)};for(let t=0;t<this.textContainer.childNodes.length;t++)r(t,void 0===e||e===t)}unhighlight(){this.highlight(-1,!0)}reCreateDOM(){this.textContainer=this.richTextParser.processStyledText(this.styledText,this.textContainer),this.container.appendChild(this.textContainer)}doSplit(){const e=new u.Geometry(this.textContainer,this.innerBounds.top);this.lineRanges=e.splitByLine();let t=!0,r=3;for(;t&&--r>=0;){t=!1;const r=e.splitByLine();if(this.lineRanges.length!==r.length)t=!0;else for(let e=0;e<r.length;++e)if(this.lineRanges[e].start!==r[e].start){t=!0;break}this.lineRanges=r}}clipMaxLines(){let e=!1;if(0===this.maxLines)return e;for(let t=this.textContainer.childNodes.length-1;t>=this.maxLines;t--){const r=this.textContainer.childNodes[t];this.textContainer.removeChild(r),e=!0}return e}addEllipsis(){const e=n(this.textContainer.childNodes[this.textContainer.childNodes.length-1]);let t=e.find("data:not(:has(*))").last();if(t&&"â¦"===t.text()&&(t.remove(),t=e.find("data:not(:has(*))").last()),!t)return;const r=t.text();let i=r.replace(/\W*\s(\S)*$/,"â¦");i===r&&(i=i.replace(/\w\W*$/,"â¦")),t.text(i)}onPropertiesUpdated(){const{width:e,height:t}=this.innerBounds,r=new f(this.component,e,t);for(r.init(),r.onMeasure(e,h.MeasureMode.Exactly,t,h.MeasureMode.Exactly);this.textContainer.firstChild;)this.textContainer.removeChild(this.textContainer.firstChild);const n=r.getContents();for(const e of n)this.textContainer.appendChild(e);this.container.appendChild(this.textContainer),this.lineRanges=r.getLineRanges()}}t.Text=p;class f extends p{constructor(e,t,r){super(null,e,null,null),this.measurementBox=document.createElement("div"),this.$measurementBox=n(this.measurementBox),this.$measurementBox.css("isolation","isolate"),this.$measurementBox.css("width",t+1),this.$measurementBox.css("height",r+1)}addComponent(){document.body.appendChild(this.measurementBox),this.measurementBox.appendChild(this.textContainer)}removeComponent(){this.measurementBox.removeChild(this.textContainer),document.body.removeChild(this.measurementBox)}getContents(){const e=this.textContainer.childNodes,t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r].cloneNode(!0);return t}onMeasure(e,t,r,n){this.$textContainer.css("width",""),this.$textContainer.css("height",""),this.addComponent();const i={width:0,height:0};switch(t){case h.MeasureMode.Exactly:i.width=e;break;case h.MeasureMode.AtMost:case h.MeasureMode.Undefined:default:i.width=Math.min(e,this.textContainer.clientWidth+1)}this.$textContainer.css("width",i.width),this.doSplit();let a=100;for(;this.clipMaxLines()&&--a>0;)this.addEllipsis(),this.doSplit();const s=0===this.textContainer.clientHeight?this.props[o.PropertyKey.kPropertyFontSize]*this.props[o.PropertyKey.kPropertyLineHeight]:this.textContainer.clientHeight;return n===h.MeasureMode.Exactly?i.height=r:n===h.MeasureMode.AtMost?i.height=Math.min(r,s+1):n===h.MeasureMode.Undefined&&(i.height=s+1),this.$textContainer.css("height",i.height),this.removeComponent(),i}onPropertiesUpdated(){this.reCreateDOM()}}t.TextMeasurement=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kUpdatePressed=0]="kUpdatePressed",e[e.kUpdateTakeFocus=1]="kUpdateTakeFocus",e[e.kUpdatePressState=2]="kUpdatePressState",e[e.kUpdateScrollPosition=3]="kUpdateScrollPosition",e[e.kUpdatePagerPosition=4]="kUpdatePagerPosition",e[e.kUpdatePagerByEvent=5]="kUpdatePagerByEvent"}(t.UpdateType||(t.UpdateType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kGraphicPropertyFill=0]="kGraphicPropertyFill",e[e.kGraphicPropertyFillOpacity=1]="kGraphicPropertyFillOpacity",e[e.kGraphicPropertyHeightActual=2]="kGraphicPropertyHeightActual",e[e.kGraphicPropertyHeightOriginal=3]="kGraphicPropertyHeightOriginal",e[e.kGraphicPropertyOpacity=4]="kGraphicPropertyOpacity",e[e.kGraphicPropertyPathData=5]="kGraphicPropertyPathData",e[e.kGraphicPropertyPivotX=6]="kGraphicPropertyPivotX",e[e.kGraphicPropertyPivotY=7]="kGraphicPropertyPivotY",e[e.kGraphicPropertyRotation=8]="kGraphicPropertyRotation",e[e.kGraphicPropertyScaleX=9]="kGraphicPropertyScaleX",e[e.kGraphicPropertyScaleY=10]="kGraphicPropertyScaleY",e[e.kGraphicPropertyViewportHeightActual=11]="kGraphicPropertyViewportHeightActual",e[e.kGraphicPropertyViewportWidthActual=12]="kGraphicPropertyViewportWidthActual",e[e.kGraphicPropertyScaleTypeHeight=13]="kGraphicPropertyScaleTypeHeight",e[e.kGraphicPropertyScaleTypeWidth=14]="kGraphicPropertyScaleTypeWidth",e[e.kGraphicPropertyStroke=15]="kGraphicPropertyStroke",e[e.kGraphicPropertyStrokeOpacity=16]="kGraphicPropertyStrokeOpacity",e[e.kGraphicPropertyStrokeWidth=17]="kGraphicPropertyStrokeWidth",e[e.kGraphicPropertyTranslateX=18]="kGraphicPropertyTranslateX",e[e.kGraphicPropertyTranslateY=19]="kGraphicPropertyTranslateY",e[e.kGraphicPropertyVersion=20]="kGraphicPropertyVersion",e[e.kGraphicPropertyViewportHeightOriginal=21]="kGraphicPropertyViewportHeightOriginal",e[e.kGraphicPropertyViewportWidthOriginal=22]="kGraphicPropertyViewportWidthOriginal",e[e.kGraphicPropertyWidthActual=23]="kGraphicPropertyWidthActual",e[e.kGraphicPropertyWidthOriginal=24]="kGraphicPropertyWidthOriginal"}(t.GraphicPropertyKey||(t.GraphicPropertyKey={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=class{constructor(){this.downloadState="pending"}setDownloadState(e){this.downloadState=e}getDownloadState(){return this.downloadState}getBuffer(){return this.buffer}setBuffer(e){this.buffer=e}},function(e){e.PENDING="pending",e.PREPARED="prepared",e.PLAYING="playing",e.PAUSED="paused"}(t.ResourceState||(t.ResourceState={})),function(e){e.PLAY="play",e.PAUSE="pause",e.NEXT="next",e.PREVIOUS="previous",e.REWIND="rewind",e.SEEK="seek",e.SETTRACK="setTrack"}(t.ControlMediaCommandName||(t.ControlMediaCommandName={})),function(e){e.IDLE="idling",e.LOADED="loaded",e.PLAYING="playing",e.ENDED="ended",e.PAUSED="paused",e.BUFFERING="buffering",e.ERROR="error"}(t.PlaybackState||(t.PlaybackState={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kEventTypeControlMedia=0]="kEventTypeControlMedia",e[e.kEventTypeFocus=1]="kEventTypeFocus",e[e.kEventTypeOpenURL=2]="kEventTypeOpenURL",e[e.kEventTypePlayMedia=3]="kEventTypePlayMedia",e[e.kEventTypePreroll=4]="kEventTypePreroll",e[e.kEventTypeRequestFirstLineBounds=5]="kEventTypeRequestFirstLineBounds",e[e.kEventTypeScrollTo=6]="kEventTypeScrollTo",e[e.kEventTypeSendEvent=7]="kEventTypeSendEvent",e[e.kEventTypeSetPage=8]="kEventTypeSetPage",e[e.kEventTypeSpeak=9]="kEventTypeSpeak"}(t.EventType||(t.EventType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kAudioTrackBackground=0]="kAudioTrackBackground",e[e.kAudioTrackForeground=1]="kAudioTrackForeground",e[e.kAudioTrackNone=2]="kAudioTrackNone"}(t.AudioTrack||(t.AudioTrack={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandHighlightModeLine=0]="kCommandHighlightModeLine",e[e.kCommandHighlightModeBlock=1]="kCommandHighlightModeBlock"}(t.CommandHighlightMode||(t.CommandHighlightMode={}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=r(17),a=r(11),s=r(0),l=r(4),c=r(32),u=r(19);var d=r(18);t.AVG=d.AVG;var h=r(32);t.Group=h.Group;var p=r(19);t.Path=p.Path;class f extends l.Component{constructor(e,t,r,n){super(e,t,r,n),this.elements=[],this.svg=document.createElementNS(f.SVG_NS,"svg"),this.container.appendChild(this.svg),this.$container.css("overflow","hidden")}setProperties(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){if(t("setProperties").call(this,e),this.graphic)return;if(this.graphic=this.component.getCalculatedByKey(s.PropertyKey.kPropertyGraphic),!this.graphic){const e=this.component.getCalculatedByKey(s.PropertyKey.kPropertySource),t=yield this.renderer.onRequestGraphic(e);return void(t&&this.component.updateGraphic(t)||this.logger.warn(`Invalid graphic at source ${e}`))}const r=this.graphic.getRoot();if(!r||r.getType()!==o.GraphicElementType.kGraphicElementTypeContainer)return;for(let e=0;e<r.getChildCount();e++){const t=r.getChildAt(e);if(t.getType()===o.GraphicElementType.kGraphicElementTypeGroup){const e=new c.Group(t,this,this.svg,this.logger);this.elements.push(e)}else if(t.getType()===o.GraphicElementType.kGraphicElementTypePath){const e=new u.Path(t,this,this.svg,this.logger);this.elements.push(e)}}const n=r.getValue(a.GraphicPropertyKey.kGraphicPropertyHeightActual),l=r.getValue(a.GraphicPropertyKey.kGraphicPropertyWidthActual),d=r.getValue(a.GraphicPropertyKey.kGraphicPropertyViewportHeightActual),h=r.getValue(a.GraphicPropertyKey.kGraphicPropertyViewportWidthActual);this.svg.setAttributeNS("","viewBox",`0 0 ${h} ${d}`);const p=this.component.getCalculatedByKey(s.PropertyKey.kPropertyMediaBounds),f=l/h,g=n/d;i(this.svg).css({display:"inline-block",height:d,left:p.left,position:"absolute",top:p.top,transform:`scale(${f}, ${g})`,transformOrigin:"top left",width:h});for(const e of this.elements)e.setAllProperties()}))}}f.SVG_NS="http://www.w3.org/2000/svg",t.VectorGraphic=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kGraphicElementTypeContainer=0]="kGraphicElementTypeContainer",e[e.kGraphicElementTypeGroup=1]="kGraphicElementTypeGroup",e[e.kGraphicElementTypePath=2]="kGraphicElementTypePath"}(t.GraphicElementType||(t.GraphicElementType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17),i=r(16);t.AVG=class{constructor(e,t,r,o){let a;if(this.graphic=e,this.component=t,this.parent=r,this.logger=o,e.getType()===n.GraphicElementType.kGraphicElementTypeGroup)a="g";else{if(e.getType()!==n.GraphicElementType.kGraphicElementTypePath)return void this.logger.debug(`GraphicElement type ${e.getType()} is not supported`);a="path"}this.element=document.createElementNS(i.VectorGraphic.SVG_NS,a),r.appendChild(this.element)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(11),i=r(18);class o extends i.AVG{constructor(e,t,r,n){super(e,t,r,n)}setAllProperties(){const e=this.component.numberToColor(this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyFill)),t=this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyFillOpacity),r=this.component.numberToColor(this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyStroke)),i=this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyStrokeWidth),o=this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyStrokeOpacity),a=this.graphic.getValue(n.GraphicPropertyKey.kGraphicPropertyPathData);this.element.setAttributeNS("","fill",e),this.element.setAttributeNS("","fill-opacity",t.toString()),this.element.setAttributeNS("","stroke",r),this.element.setAttributeNS("","stroke-width",i.toString()),this.element.setAttributeNS("","stroke-opacity",o.toString()),this.element.setAttributeNS("","d",a)}updateDirty(){this.logger.debug("Path: update dirty")}}t.Path=o},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(4),o=r(6);class a extends i.Component{constructor(e,t,r,i){super(e,t,r,i),this.focused=!1,this.focus=()=>{!this.focused&&o.SpatialNavigation.enabled()&&(this.focused=!0,this.update(n.UpdateType.kUpdateTakeFocus,1))},this.blur=()=>{this.focused&&o.SpatialNavigation.enabled()&&(this.focused=!1,this.update(n.UpdateType.kUpdateTakeFocus,0))},o.SpatialNavigation.enabled()&&(this.container.tabIndex=-1)}}t.ActionableComponent=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kScrollDirectionVertical=0]="kScrollDirectionVertical",e[e.kScrollDirectionHorizontal=1]="kScrollDirectionHorizontal"}(t.ScrollDirection||(t.ScrollDirection={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(4);class o extends i.Component{constructor(e,t,r,i){super(e,t,r,i),this.setScaleFromProp=()=>{this.setScale(this.props[n.PropertyKey.kPropertyScale])},this.setAudioTrackFromProp=()=>{this.setAudioTrack(this.props[n.PropertyKey.kPropertyAudioTrack])},this.setSourceFromProp=()=>{this.setSource(this.props[n.PropertyKey.kPropertySource])},this.propExecutor(this.setScaleFromProp,n.PropertyKey.kPropertyScale)(this.setAudioTrackFromProp,n.PropertyKey.kPropertyAudioTrack)(this.setSourceFromProp,n.PropertyKey.kPropertySource)}}t.AbstractVideoComponent=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(60);const i=r(65);t.default=i.default;var o=r(111);t.Content=o.Content;var a=r(24);t.commandFactory=a.commandFactory;var s=r(31);t.componentFactory=s.componentFactory,n(r(55)),n(r(54)),n(r(59)),n(r(34)),n(r(4)),n(r(33)),n(r(35)),n(r(41)),n(r(44)),n(r(45)),n(r(22)),n(r(48)),n(r(47)),n(r(53)),n(r(30)),n(r(9)),n(r(39)),n(r(16)),n(r(46)),n(r(14)),n(r(25)),n(r(49)),n(r(15)),n(r(112)),n(r(3)),n(r(113)),n(r(114)),n(r(8)),n(r(115)),n(r(13)),n(r(116)),n(r(117)),n(r(26)),n(r(36)),n(r(37)),n(r(118)),n(r(40)),n(r(119)),n(r(0)),n(r(21)),n(r(27)),n(r(28)),n(r(10)),n(r(50)),n(r(11)),n(r(51)),n(r(12)),n(r(29)),n(r(38)),n(r(5))},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(13),i=r(66),o=r(68),a=r(69),s=r(70),l=r(71),c=r(72),u=r(73),d=r(77),h=r(78),p=r(79);t.commandFactory=(e,t)=>{if(f[e.getType()])return f[e.getType()](e,t);throw new Error(`Cannot create command with type ${e.getType()}`)};const f={[n.EventType.kEventTypeSendEvent]:(e,t)=>{const r=new l.SendEvent(e,t);return r.execute(),r},[n.EventType.kEventTypeControlMedia]:(e,t)=>{const r=new i.ControlMedia(e,t);return r.execute(),r},[n.EventType.kEventTypePlayMedia]:(e,t)=>{const r=new a.PlayMedia(e,t);return r.execute(),r},[n.EventType.kEventTypeScrollTo]:(e,t)=>{const r=new s.ScrollTo(e,t);return r.execute(),r},[n.EventType.kEventTypeSetPage]:(e,t)=>{const r=new c.SetPage(e,t);return r.execute(),r},[n.EventType.kEventTypeRequestFirstLineBounds]:(e,t)=>{const r=new p.RequestFirstLineBounds(e,t);return r.execute(),r},[n.EventType.kEventTypePreroll]:(e,t)=>{const r=new d.Preroll(e,t);return r.execute(),r},[n.EventType.kEventTypeSpeak]:(e,t)=>{const r=new u.Speak(e,t);return r.execute(),r},[n.EventType.kEventTypeFocus]:(e,t)=>{const r=new h.Focus(e,t);return r.execute(),r},[n.EventType.kEventTypeOpenURL]:(e,t)=>{const r=new o.OpenUrl(e,t);return r.execute(),r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandAudioTrackBackground=0]="kCommandAudioTrackBackground",e[e.kCommandAudioTrackForeground=1]="kCommandAudioTrackForeground",e[e.kCommandAudioTrackNone=2]="kCommandAudioTrackNone"}(t.CommandAudioTrack||(t.CommandAudioTrack={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kFontStyleNormal=0]="kFontStyleNormal",e[e.kFontStyleItalic=1]="kFontStyleItalic"}(t.FontStyle||(t.FontStyle={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kTextAlignAuto=0]="kTextAlignAuto",e[e.kTextAlignLeft=1]="kTextAlignLeft",e[e.kTextAlignCenter=2]="kTextAlignCenter",e[e.kTextAlignRight=3]="kTextAlignRight"}(t.TextAlign||(t.TextAlign={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kTextAlignVerticalAuto=0]="kTextAlignVerticalAuto",e[e.kTextAlignVerticalTop=1]="kTextAlignVerticalTop",e[e.kTextAlignVerticalCenter=2]="kTextAlignVerticalCenter",e[e.kTextAlignVerticalBottom=3]="kTextAlignVerticalBottom"}(t.TextAlignVertical||(t.TextAlignVertical={}))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(5),o=r(87);class a{static initialize(){return n(this,void 0,void 0,(function*(){if(!this.initialized){const e=new Promise(e=>{this.initializationCallback=e}),t={custom:{families:["amazon-ember-display:n1,n2,n3,n4,n5,n6,n7,n8,n9,i1,i2,i3,i4,i5,i6,i7,i8,i9","Bookerly:n1,n2,n5,i1,i4,i5"]},active:()=>{this.logger.debug("Fonts active"),this.initializationCallback()},inactive:()=>{this.logger.warn("Fonts inactive"),this.initializationCallback()},fontinactive:(e,t)=>{this.logger.warn(`Failed to load: ${e} : ${t}`)}};o.load(t),this.initialized=!0,yield e}}))}static getFont(e){return e.trim().toLowerCase()in a.FONT_ALIAS_MAPPING?a.FONT_ALIAS_MAPPING[e.trim().toLowerCase()]:e.trim()}}a.logger=i.LoggerFactory.getLogger("FontUtils"),a.AMAZON_EMBER_DISPLAY="amazon-ember-display",a.BOOKERLY="Bookerly",a.FONT_ALIAS_MAPPING={"amazon ember display":a.AMAZON_EMBER_DISPLAY,"amazon ember":a.AMAZON_EMBER_DISPLAY,"sans-serif":a.AMAZON_EMBER_DISPLAY,serif:a.BOOKERLY},a.initialized=!1,t.FontUtils=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Undefined=0]="Undefined",e[e.Exactly=1]="Exactly",e[e.AtMost=2]="AtMost"}(t.MeasureMode||(t.MeasureMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16),i=r(33),o=r(34),a=r(35),s=r(39),l=r(41),c=r(44),u=r(9),d=r(45),h=r(8);t.componentFactory=(e,t,r,n=!1,i=-1)=>{const o=t.getUniqueId();if(e.componentMap[o]){const t=e.componentMap[o];return t.parent=r,n&&t instanceof u.Text&&(t.setDimensions(),r&&(i>=0&&r.container.children.length>0&&i<r.container.children.length?r.container.insertBefore(t.container,r.container.children.item(i)):r.container.appendChild(t.container))),t}if(p[t.getType()]){const o=p[t.getType()](e,t,r);return n&&(o instanceof u.Text&&o.init(),o.component.ensureLayout(),o.init(),r&&(i>=0&&r.container.children.length>0&&i<r.container.children.length?r.container.insertBefore(o.container,r.container.children.item(i)):r.container.appendChild(o.container))),o}throw new Error(`Cannot create component with type ${t.getType()}`)};const p={[h.ComponentType.kComponentTypeContainer]:(e,r,n)=>new i.Container(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeFrame]:(e,r,n)=>new o.Frame(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeImage]:(e,r,n)=>new a.Image(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypePager]:(e,r,n)=>new s.PagerComponent(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeScrollView]:(e,r,n)=>new l.ScrollView(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeSequence]:(e,r,n)=>new c.Sequence(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeText]:(e,r,n)=>new u.Text(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeTouchWrapper]:(e,r,n)=>new d.TouchWrapper(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeVideo]:(e,r,n)=>e.videoFactory.create(e,r,t.componentFactory,n),[h.ComponentType.kComponentTypeVectorGraphic]:(e,r,i)=>new n.VectorGraphic(e,r,t.componentFactory,i)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17),i=r(11),o=r(18),a=r(19);class s extends o.AVG{constructor(e,t,r,i){super(e,t,r,i),this.children=[];for(let r=0;r<e.getChildCount();r++){const o=e.getChildAt(r);if(o.getType()===n.GraphicElementType.kGraphicElementTypeGroup){const e=new s(o,t,this.element,i);this.children.push(e)}else if(o.getType()===n.GraphicElementType.kGraphicElementTypePath){const e=new a.Path(o,t,this.element,i);this.children.push(e)}}}setAllProperties(){const e=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyScaleX),t=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyScaleY),r=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyPivotX),n=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyPivotY),o=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyTranslateX),a=this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyTranslateY),s=`scale(${e}, ${t}) rotate(${this.graphic.getValue(i.GraphicPropertyKey.kGraphicPropertyRotation)}, ${r}, ${n}) translate(${o}, ${a})`;this.element.setAttributeNS("","transform",s);for(const e of this.children)e.setAllProperties()}updateDirty(){this.logger.debug("Group: updateDirty")}}t.Group=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4);class i extends n.Component{constructor(e,t,r,n){super(e,t,r,n),this.$container.css({overflow:"hidden"})}isLayout(){return!0}}t.Container=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(4);class o extends i.Component{constructor(e,t,r,i){super(e,t,r,i),this.setBackgroundColor=()=>{this.$container.css("background-color",this.numberToColor(this.props[n.PropertyKey.kPropertyBackgroundColor]))},this.setBorderRadii=()=>{const e=this.props[n.PropertyKey.kPropertyBorderRadii];this.$container.css("border-top-left-radius",e.topLeft()),this.$container.css("border-top-right-radius",e.topRight()),this.$container.css("border-bottom-right-radius",e.bottomRight()),this.$container.css("border-bottom-left-radius",e.bottomLeft())},this.setBorderColor=()=>{this.$container.css("border-color",this.numberToColor(this.props[n.PropertyKey.kPropertyBorderColor]))},this.setBorderWidth=()=>{this.$container.css("border-width",this.props[n.PropertyKey.kPropertyBorderWidth])},this.$container.css({"border-style":"solid",overflow:"hidden"}),this.propExecutor(this.setBackgroundColor,n.PropertyKey.kPropertyBackgroundColor)(this.setBorderRadii,n.PropertyKey.kPropertyBorderRadii)(this.setBorderColor,n.PropertyKey.kPropertyBorderColor)(this.setBorderWidth,n.PropertyKey.kPropertyBorderWidth)}isLayout(){return!0}}t.Frame=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(36),i=r(37),o=r(0),a=r(88),s=r(89),l=r(4),c=r(1);window.jQuery=c,r(90);const u=r(91),d=r(93);function h(e){return e.type===a.FilterType.kFilterTypeBlur&&void 0!==e.radius}function p(e){return e.type===a.FilterType.kFilterTypeNoise}t.isIBlur=h,t.isINoise=p;class f extends l.Component{constructor(e,t,r,n){super(e,t,r,n),this.imgPlaceHolder=document.createElement("div"),this.$imgPlaceHolder=c(this.imgPlaceHolder),this.imageOverlay=document.createElement("div"),this.$imageOverlay=c(this.imageOverlay),this.imageElement=document.createElement("img"),this.$imageElement=c(this.imageElement),this.canvasElement=document.createElement("canvas"),this.$canvasElement=c(this.canvasElement),this.allFiltersInCanvas=!1,this.hasFiltersInCanvas=!1,this.setBorderRadius=()=>{const e=this.props[o.PropertyKey.kPropertyBorderRadius];this.$imageElement.css("border-radius",e),this.$canvasElement.css("border-radius",e),this.$imageOverlay.css("border-radius",e)},this.applyCssShadow=e=>{this.$imageElement.css("box-shadow",e)},this.setBorderColor=()=>{const e=this.numberToColor(this.props[o.PropertyKey.kPropertyBorderColor]);this.$imageElement.css("border-color",e),this.$canvasElement.css("border-color",e)},this.setBorderWidth=()=>{const e=this.props[o.PropertyKey.kPropertyBorderWidth];this.$imageElement.css("border-width",e),this.$canvasElement.css("border-width",e)},this.setFilters=()=>{const e=this.props[o.PropertyKey.kPropertyFilters];if(this.checkFilters(e),this.hasFiltersInCanvas||this.imgPlaceHolder.removeChild(this.canvasElement),!this.allFiltersInCanvas){const t=this.getCssFilterFromApl(e);this.$imageElement.css("filter",t),this.$canvasElement.css("filter",t),this.allFiltersInCanvas=!1}},this.setOverlayColor=()=>{this.$imageOverlay.css("background-color",this.numberToColor(this.props[o.PropertyKey.kPropertyOverlayColor]))},this.setOverlayGradient=()=>{this.$imageOverlay.css("background-image",this.getCssGradient(this.props[o.PropertyKey.kPropertyOverlayGradient]))},this.setSource=()=>{this.hasValidBounds()&&(this.imageElement.src=this.props[o.PropertyKey.kPropertySource],c(this.imageElement).on("load",()=>{this.setImageScale(),this.hasFiltersInCanvas&&(clearTimeout(this.applyFiltersTimeout),this.applyFiltersTimeout=setTimeout(this.applyFiltersOnCanvas,10))}))},this.checkFilters=e=>{let t=!1;this.allFiltersInCanvas=!e.every(e=>h(e)?t=!0:(this.hasFiltersInCanvas=!0,!(t&&p(e))))},this.applyFiltersOnCanvas=()=>{const e=this.canvasElement.width,t=this.canvasElement.height;if(e<=0||t<=0)return;const r=this.canvasElement.getContext("2d"),n=this.props[o.PropertyKey.kPropertyFilters];let i;r.drawImage(this.imageElement,0,0,e,t);try{i=r.getImageData(0,0,e,t)}catch(e){this.imageElement.crossOrigin?(this.logger.error("Failed to apply filters in Canvas, removing canvas element."),this.imgPlaceHolder.removeChild(this.canvasElement)):(this.imageElement.crossOrigin="anonymous",this.setSource())}i&&(n.forEach(e=>{h(e)?this.allFiltersInCanvas&&new d.Blur(e.radius).apply(i):p(e)?new u.Noise(e.useColor,e.kind,e.sigma).addNoise(i):this.logger.warn("unknown filter for canvas")}),r.putImageData(i,0,0))},this.$imageElement.css({"background-clip":"padding-box","border-style":"solid","border-width":"0px",display:"none",overflow:"hidden",position:"absolute"}),this.$canvasElement.css({"background-clip":"padding-box","border-style":"solid","border-width":"0px",display:"none",overflow:"hidden",position:"absolute"}),this.$imgPlaceHolder.css({overflow:"hidden",position:"relative",isolation:"isolate"}),this.$imageOverlay.css("position","absolute"),this.imageElement.classList.add("image"),this.canvasElement.classList.add("image"),this.imgPlaceHolder.classList.add("imageHolder"),this.imageOverlay.classList.add("imageOverlay"),this.imgPlaceHolder.appendChild(this.imageElement),this.imgPlaceHolder.appendChild(this.canvasElement),this.imgPlaceHolder.appendChild(this.imageOverlay),this.container.appendChild(this.imgPlaceHolder),this.propExecutor(this.setBorderRadius,o.PropertyKey.kPropertyBorderRadius)(this.setBorderColor,o.PropertyKey.kPropertyBorderColor)(this.setBorderWidth,o.PropertyKey.kPropertyBorderWidth)(this.setFilters,o.PropertyKey.kPropertyFilters)(this.setOverlayColor,o.PropertyKey.kPropertyOverlayColor)(this.setOverlayGradient,o.PropertyKey.kPropertyOverlayGradient)(this.setSource,o.PropertyKey.kPropertySource,o.PropertyKey.kPropertyScale)}boundsUpdated(){this.hasValidBounds()&&(this.$imgPlaceHolder.css({height:this.innerBounds.height,width:this.innerBounds.width}),this.setSource())}convertFilterComponentToCss(e){let t="";switch(e.type){case a.FilterType.kFilterTypeBlur:h(e)&&(t=`blur(${e.radius}px)`);break;case a.FilterType.kFilterTypeNoise:break;default:this.logger.warn("Incorrect filter type")}return t}getCssFilterFromApl(e){return e.map(this.convertFilterComponentToCss,this).join(" ")}getCssGradient(e){if(!e)return"";let t="";const r=e.inputRange||[],n=e.colorRange.map((e,t)=>r.length>t?`${this.numberToColor(e)} ${100*r[t]}%`:this.numberToColor(e)).join(",");switch(e.type){case s.GradientType.LINEAR:t=`linear-gradient(${e.angle||0}deg, ${n})`;break;case s.GradientType.RADIAL:t=`radial-gradient(${n})`;break;default:this.logger.warn("Incorrect gardient type")}return t}setImageScale(){const e=this.imageElement.naturalWidth,t=this.imageElement.naturalHeight;this.$imageElement.css("width",e),this.$imageElement.css("height",t),this.$imageElement.css("display",""),this.$imageElement.imageScale({scale:this.getImageScale()});const r=c(this.imageElement).width(),n=c(this.imageElement).height();this.canvasElement.width=r,this.canvasElement.height=n,this.$canvasElement.css("display",""),this.$canvasElement.css("width",r),this.$canvasElement.css("height",n),this.$imageOverlay.css("width",r),this.$imageOverlay.css("height",n),0!==this.innerBounds.height&&0!==this.innerBounds.width&&this.$imgPlaceHolder.css("overflow","unset"),this.setImageAlignment()}getImageScale(){switch(this.props[o.PropertyKey.kPropertyScale]){case i.ImageScale.kImageScaleBestFill:return"best-fill";case i.ImageScale.kImageScaleBestFit:return"best-fit";case i.ImageScale.kImageScaleBestFitDown:return"best-fit-down";case i.ImageScale.kImageScaleFill:return"fill";case i.ImageScale.kImageScaleNone:return"none";default:return this.logger.error("bad image scale property enum",this.props[o.PropertyKey.kPropertyScale]),"best-fit"}}setImageAlignment(){const e=this.innerBounds.width,t=this.innerBounds.height,r=c(this.imageElement).width(),i=c(this.imageElement).height();let a=(e-r)/2,s=(t-i)/2;switch(this.props[o.PropertyKey.kPropertyAlign]){case n.ImageAlign.kImageAlignBottom:s=t-i;break;case n.ImageAlign.kImageAlignBottomLeft:s=t-i,a=0;break;case n.ImageAlign.kImageAlignBottomRight:s=t-i,a=e-r;break;case n.ImageAlign.kImageAlignCenter:break;case n.ImageAlign.kImageAlignLeft:a=0;break;case n.ImageAlign.kImageAlignRight:a=e-r;break;case n.ImageAlign.kImageAlignTop:s=0;break;case n.ImageAlign.kImageAlignTopLeft:s=0,a=0;break;case n.ImageAlign.kImageAlignTopRight:s=0,a=e-r;break;default:this.logger.error("Bad image alignment property key",this.props[o.PropertyKey.kPropertyAlign])}c(this.imageElement).css({top:s,left:a}),c(this.imageOverlay).css({top:s,left:a}),c(this.canvasElement).css({top:s,left:a})}}t.Image=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kImageAlignBottom=0]="kImageAlignBottom",e[e.kImageAlignBottomLeft=1]="kImageAlignBottomLeft",e[e.kImageAlignBottomRight=2]="kImageAlignBottomRight",e[e.kImageAlignCenter=3]="kImageAlignCenter",e[e.kImageAlignLeft=4]="kImageAlignLeft",e[e.kImageAlignRight=5]="kImageAlignRight",e[e.kImageAlignTop=6]="kImageAlignTop",e[e.kImageAlignTopLeft=7]="kImageAlignTopLeft",e[e.kImageAlignTopRight=8]="kImageAlignTopRight"}(t.ImageAlign||(t.ImageAlign={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kImageScaleNone=0]="kImageScaleNone",e[e.kImageScaleFill=1]="kImageScaleFill",e[e.kImageScaleBestFill=2]="kImageScaleBestFill",e[e.kImageScaleBestFit=3]="kImageScaleBestFit",e[e.kImageScaleBestFitDown=4]="kImageScaleBestFitDown"}(t.ImageScale||(t.ImageScale={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static seed(e){this.seedValue=Math.round(e)}static random(){const e=1103515245*n.seedValue+12345&2147483647;return this.seedValue=e,e%n.DECIMAL_MASK/n.DECIMAL_MASK}}n.DECIMAL_MASK=1e8,t.SoftRandom=n},function(e,t,r){"use strict";
/*!
 * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1);r(94);const o=r(40),a=r(0),s=r(10),l=r(20),c=r(6);i.fn.viewPager=r(97);class u extends l.ActionableComponent{constructor(e,t,r,n){super(e,t,r,n),this.pagerContainer=document.createElement("div"),this.pagerContainer.className="ViewPager",this.container.appendChild(this.pagerContainer)}isLayout(){return!0}init(){super.init(),i(this.pagerContainer).ViewPager({id:this.id,animationDelay:u.ANIMATION_DELAY,callback:()=>{this.currentPage=this.getCurrentPage(),this.setPagePromise?(this.component.update(s.UpdateType.kUpdatePagerByEvent,this.currentPage),this.setPageCallback(),this.setPagePromise=void 0):this.component.update(s.UpdateType.kUpdatePagerPosition,this.currentPage),this.emit("onPageEnded",this.getCurrentPage())},index:this.currentPage,wrap:this.navigation===o.Navigation.kNavigationWrap,allowBackwardsNav:this.allowBackwardsNav,allowForwardsNav:this.allowForwardsNav,focus:super.focus,blur:super.blur}),this.configureNavigation(),this.container.addEventListener("focus",this.focusCurrentPage)}setProperties(e){super.setProperties(e),a.PropertyKey.kPropertyInitialPage in e&&(this.currentPage=this.props[a.PropertyKey.kPropertyInitialPage]),a.PropertyKey.kPropertyNavigation in e&&(this.navigation=this.props[a.PropertyKey.kPropertyNavigation],this.allowForwardsNav=this.navigation!==o.Navigation.kNavigationNone,this.allowBackwardsNav=this.navigation!==o.Navigation.kNavigationNone&&this.navigation!==o.Navigation.kNavigationForwardOnly),i(this.container).children().each((e,t)=>{i(this.pagerContainer).append(i(t))}),i(this.pagerContainer).css({height:this.innerBounds.height,width:this.innerBounds.width,position:"absolute"})}setPage(e){return n(this,void 0,void 0,(function*(){this.emit("onPageStarted",this.getCurrentPage(),e),this.setPagePromise=new Promise(e=>{this.setPageCallback=e}),i(this.pagerContainer).showViewPage(e),yield this.setPagePromise}))}getPageCount(){return i(this.pagerContainer).getPageCount()}getCurrentPage(){return i(this.pagerContainer).getCurrentPage()}stopAnimation(){i(this.pagerContainer).stopAnimation()}getValue(){return this.getCurrentPage()}configureNavigation(){const e=this.allowForwardsNav?function(){i(this).showViewPageDelta(1)}:void 0,t=this.allowBackwardsNav?function(){i(this).showViewPageDelta(-1)}:void 0,r=i.extend({},{swipeLeft:e},{swipeRight:t});i(this.pagerContainer).swipe(r)}focusCurrentPage(e){e.stopPropagation();const t=i(this.children[0]).getCurrentPage(),r=c.SpatialNavigation.createSectionName(this.id,t.toString());c.SpatialNavigation.focus(r)}}u.ANIMATION_DELAY=600,t.PagerComponent=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kNavigationNormal=0]="kNavigationNormal",e[e.kNavigationNone=1]="kNavigationNone",e[e.kNavigationWrap=2]="kNavigationWrap",e[e.kNavigationForwardOnly=3]="kNavigationForwardOnly"}(t.Navigation||(t.Navigation={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(42),o=r(43);class a extends o.Scrollable{constructor(e,t,r,n){super(e,t,r,n),this.container.classList.add("scrollView")}init(){if(super.init(),this.scrollbar=new i.default(this.container,{handlers:["drag-thumb","touch","wheel"],suppressScrollX:!0}),this.$container.css("overflow","hidden"),this.registerScrollHandler(e=>{this.component&&this.component.updateScrollPosition(e)}),super.configureNavigation(),this.children&&this.children.length>0){const e=this.children[0];this.$startGap.css({top:e.bounds.top}),this.$endGap.css({height:this.bounds.height-this.innerBounds.height-this.innerBounds.top,top:e.bounds.top+e.bounds.height})}}getChildTopOffset(e){if(0===this.children.length)return 0;const t=this.container;let r=e.container,n=0;do{n+=r.offsetTop||0,r=r.offsetParent}while(r&&r!==t);return n}destroy(){super.destroy(),n(this.container).off("scroll"),this.scrollbar.destroy(),this.scrollbar=void 0}}t.ScrollView=a},function(e,t,r){"use strict";
/*!
 * perfect-scrollbar v1.4.0
 * (c) 2018 Hyunje Jun
 * @license MIT
 */function n(e){return getComputedStyle(e)}function i(e,t){for(var r in t){var n=t[r];"number"==typeof n&&(n+="px"),e.style[r]=n}return e}function o(e){var t=document.createElement("div");return t.className=e,t}r.r(t);var a="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function s(e,t){if(!a)throw new Error("No element matching method supported");return a.call(e,t)}function l(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){return Array.prototype.filter.call(e.children,(function(e){return s(e,t)}))}var u={main:"ps",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},d={x:null,y:null};function h(e,t){var r=e.element.classList,n=u.state.scrolling(t);r.contains(n)?clearTimeout(d[t]):r.add(n)}function p(e,t){d[t]=setTimeout((function(){return e.isAlive&&e.element.classList.remove(u.state.scrolling(t))}),e.settings.scrollingThreshold)}var f=function(e){this.element=e,this.handlers={}},g={isEmpty:{configurable:!0}};f.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},f.prototype.unbind=function(e,t){var r=this;this.handlers[e]=this.handlers[e].filter((function(n){return!(!t||n===t)||(r.element.removeEventListener(e,n,!1),!1)}))},f.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},g.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every((function(t){return 0===e.handlers[t].length}))},Object.defineProperties(f.prototype,g);var y=function(){this.eventElements=[]};function m(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}y.prototype.eventElement=function(e){var t=this.eventElements.filter((function(t){return t.element===e}))[0];return t||(t=new f(e),this.eventElements.push(t)),t},y.prototype.bind=function(e,t,r){this.eventElement(e).bind(t,r)},y.prototype.unbind=function(e,t,r){var n=this.eventElement(e);n.unbind(t,r),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},y.prototype.unbindAll=function(){this.eventElements.forEach((function(e){return e.unbindAll()})),this.eventElements=[]},y.prototype.once=function(e,t,r){var n=this.eventElement(e),i=function(e){n.unbind(t,i),r(e)};n.bind(t,i)};var v=function(e,t,r,n,i){var o;if(void 0===n&&(n=!0),void 0===i&&(i=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,r,n,i){var o=r[0],a=r[1],s=r[2],l=r[3],c=r[4],u=r[5];void 0===n&&(n=!0),void 0===i&&(i=!1);var d=e.element;e.reach[l]=null,d[s]<1&&(e.reach[l]="start"),d[s]>e[o]-e[a]-1&&(e.reach[l]="end"),t&&(d.dispatchEvent(m("ps-scroll-"+l)),t<0?d.dispatchEvent(m("ps-scroll-"+c)):t>0&&d.dispatchEvent(m("ps-scroll-"+u)),n&&function(e,t){h(e,t),p(e,t)}(e,l)),e.reach[l]&&(t||i)&&d.dispatchEvent(m("ps-"+l+"-reach-"+e.reach[l]))}(e,r,o,n,i)};function b(e){return parseInt(e,10)||0}var T={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},P=function(e){var t=e.element,r=Math.floor(t.scrollTop);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(c(t,u.element.rail("x")).forEach((function(e){return l(e)})),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(c(t,u.element.rail("y")).forEach((function(e){return l(e)})),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=S(e,b(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=b((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=S(e,b(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=b(r*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,t){var r={width:t.railXWidth},n=Math.floor(e.scrollTop);t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:r.left=e.scrollLeft,t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-n:r.top=t.scrollbarXTop+n,i(t.scrollbarXRail,r);var o={top:n,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?o.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:o.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?o.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:o.left=t.scrollbarYLeft+e.scrollLeft,i(t.scrollbarYRail,o),i(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(t,e),e.scrollbarXActive?t.classList.add(u.state.active("x")):(t.classList.remove(u.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),e.scrollbarYActive?t.classList.add(u.state.active("y")):(t.classList.remove(u.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)};function S(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function k(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=e.element,g=null,y=null,m=null;function v(t){f[l]=g+m*(t[i]-y),h(e,c),P(e),t.stopPropagation(),t.preventDefault()}function b(){p(e,c),e[d].classList.remove(u.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",v)}e.event.bind(e[a],"mousedown",(function(t){g=f[l],y=t[i],m=(e[n]-e[r])/(e[o]-e[s]),e.event.bind(e.ownerDocument,"mousemove",v),e.event.once(e.ownerDocument,"mouseup",b),e[d].classList.add(u.state.clicking),t.stopPropagation(),t.preventDefault()}))}var w={"click-rail":function(e){e.event.bind(e.scrollbarY,"mousedown",(function(e){return e.stopPropagation()})),e.event.bind(e.scrollbarYRail,"mousedown",(function(t){var r=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=r*e.containerHeight,P(e),t.stopPropagation()})),e.event.bind(e.scrollbarX,"mousedown",(function(e){return e.stopPropagation()})),e.event.bind(e.scrollbarXRail,"mousedown",(function(t){var r=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=r*e.containerWidth,P(e),t.stopPropagation()}))},"drag-thumb":function(e){k(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),k(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",(function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&(s(t,":hover")||s(e.scrollbarX,":focus")||s(e.scrollbarY,":focus"))){var n,i=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(i){if("IFRAME"===i.tagName)i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(s(n=i,"input,[contenteditable]")||s(n,"select,[contenteditable]")||s(n,"textarea,[contenteditable]")||s(n,"button,[contenteditable]"))return}var o=0,a=0;switch(r.which){case 37:o=r.metaKey?-e.contentWidth:r.altKey?-e.containerWidth:-30;break;case 38:a=r.metaKey?e.contentHeight:r.altKey?e.containerHeight:30;break;case 39:o=r.metaKey?e.contentWidth:r.altKey?e.containerWidth:30;break;case 40:a=r.metaKey?-e.contentHeight:r.altKey?-e.containerHeight:-30;break;case 32:a=r.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==o||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=o,P(e),function(r,n){var i=Math.floor(t.scrollTop);if(0===r){if(!e.scrollbarYActive)return!1;if(0===i&&n>0||i>=e.contentHeight-e.containerHeight&&n<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===o&&r<0||o>=e.contentWidth-e.containerWidth&&r>0)return!e.settings.wheelPropagation}return!0}(o,a)&&r.preventDefault())}}))},wheel:function(e){var t=e.element;function r(r){var i=function(e){var t=e.deltaX,r=-1*e.deltaY;return void 0!==t&&void 0!==r||(t=-1*e.wheelDeltaX/6,r=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,r*=10),t!=t&&r!=r&&(t=0,r=e.wheelDelta),e.shiftKey?[-r,-t]:[t,r]}(r),o=i[0],a=i[1];if(!function(e,r,i){if(!T.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(u.element.consuming))return!0;var a=n(o);if([a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&i>0||o.scrollTop===s&&i<0))return!0;var l=o.scrollWidth-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&r<0||o.scrollLeft===l&&r>0))return!0}o=o.parentNode}return!1}(r.target,o,a)){var s=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?t.scrollTop-=a*e.settings.wheelSpeed:t.scrollTop+=o*e.settings.wheelSpeed,s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(o?t.scrollLeft+=o*e.settings.wheelSpeed:t.scrollLeft-=a*e.settings.wheelSpeed,s=!0):(t.scrollTop-=a*e.settings.wheelSpeed,t.scrollLeft+=o*e.settings.wheelSpeed),P(e),(s=s||function(r,n){var i=Math.floor(t.scrollTop),o=0===t.scrollTop,a=i+t.offsetHeight===t.scrollHeight,s=0===t.scrollLeft,l=t.scrollLeft+t.offsetWidth===t.scrollWidth;return!(Math.abs(n)>Math.abs(r)?o||a:s||l)||!e.settings.wheelPropagation}(o,a))&&!r.ctrlKey&&(r.stopPropagation(),r.preventDefault())}}void 0!==window.onwheel?e.event.bind(t,"wheel",r):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",r)},touch:function(e){if(T.supportsTouch||T.supportsIePointer){var t=e.element,r={},i=0,o={},a=null;T.supportsTouch?(e.event.bind(t,"touchstart",d),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",p)):T.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",d),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",p)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",d),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",p)))}function s(r,n){t.scrollTop-=n,t.scrollLeft-=r,P(e)}function l(e){return e.targetTouches?e.targetTouches[0]:e}function c(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function d(e){if(c(e)){var t=l(e);r.pageX=t.pageX,r.pageY=t.pageY,i=(new Date).getTime(),null!==a&&clearInterval(a)}}function h(a){if(c(a)){var d=l(a),h={pageX:d.pageX,pageY:d.pageY},p=h.pageX-r.pageX,f=h.pageY-r.pageY;if(function(e,r,i){if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(u.element.consuming))return!0;var a=n(o);if([a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&i>0||o.scrollTop===s&&i<0))return!0;var l=o.scrollLeft-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&r<0||o.scrollLeft===l&&r>0))return!0}o=o.parentNode}return!1}(a.target,p,f))return;s(p,f),r=h;var g=(new Date).getTime(),y=g-i;y>0&&(o.x=p/y,o.y=f/y,i=g),function(r,n){var i=Math.floor(t.scrollTop),o=t.scrollLeft,a=Math.abs(r),s=Math.abs(n);if(s>a){if(n<0&&i===e.contentHeight-e.containerHeight||n>0&&0===i)return 0===window.scrollY&&n>0&&T.isChrome}else if(a>s&&(r<0&&o===e.contentWidth-e.containerWidth||r>0&&0===o))return!0;return!0}(p,f)&&a.preventDefault()}}function p(){e.settings.swipeEasing&&(clearInterval(a),a=setInterval((function(){e.isInitialized?clearInterval(a):o.x||o.y?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?clearInterval(a):(s(30*o.x,30*o.y),o.x*=.8,o.y*=.8):clearInterval(a)}),10))}}},E=function(e,t){var r=this;if(void 0===t&&(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=e,e.classList.add(u.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},t)r.settings[a]=t[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s,l,c=function(){return e.classList.add(u.state.focus)},d=function(){return e.classList.remove(u.state.focus)};this.isRtl="rtl"===n(e).direction,this.isNegativeScroll=(l=e.scrollLeft,e.scrollLeft=-1,s=e.scrollLeft<0,e.scrollLeft=l,s),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new y,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=o(u.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=o(u.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",c),this.event.bind(this.scrollbarX,"blur",d),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=n(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=b(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=b(h.borderLeftWidth)+b(h.borderRightWidth),i(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=b(h.marginLeft)+b(h.marginRight),i(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=o(u.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=o(u.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",c),this.event.bind(this.scrollbarY,"blur",d),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var p=n(this.scrollbarYRail);this.scrollbarYRight=parseInt(p.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=b(p.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(e){var t=n(e);return b(t.width)+b(t.paddingLeft)+b(t.paddingRight)+b(t.borderLeftWidth)+b(t.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=b(p.borderTopWidth)+b(p.borderBottomWidth),i(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=b(p.marginTop)+b(p.marginBottom),i(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(e){return w[e](r)})),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",(function(e){return r.onScroll(e)})),P(this)};E.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,i(this.scrollbarXRail,{display:"block"}),i(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=b(n(this.scrollbarXRail).marginLeft)+b(n(this.scrollbarXRail).marginRight),this.railYMarginHeight=b(n(this.scrollbarYRail).marginTop)+b(n(this.scrollbarYRail).marginBottom),i(this.scrollbarXRail,{display:"none"}),i(this.scrollbarYRail,{display:"none"}),P(this),v(this,"top",0,!1,!0),v(this,"left",0,!1,!0),i(this.scrollbarXRail,{display:""}),i(this.scrollbarYRail,{display:""}))},E.prototype.onScroll=function(e){this.isAlive&&(P(this),v(this,"top",this.element.scrollTop-this.lastScrollTop),v(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},E.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),l(this.scrollbarX),l(this.scrollbarY),l(this.scrollbarXRail),l(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},E.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(e){return!e.match(/^ps([-_].+|)$/)})).join(" ")},t.default=E},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=r(98),a=r(21),s=r(6),l=r(20);class c extends l.ActionableComponent{constructor(){super(...arguments),this.direction=a.ScrollDirection.kScrollDirectionVertical,this.length="height",this.scrollSize="scrollHeight",this.scrollSide="scrollTop",this.side="top",this.hasFocusableChildren=!1,this.startGap=document.createElement("div"),this.$startGap=i(this.startGap),this.endGap=document.createElement("div"),this.$endGap=i(this.endGap),this.gapCount=0}isLayout(){return!0}scrollToPosition(e,t){return n(this,void 0,void 0,(function*(){const r=this.container[this.scrollSide],n=this.getPageSize(),o=Math.abs(e-r)/n/Math.abs(t)*1e3;yield new Promise(t=>{const r={};r[this.scrollSide]=e,i(this.container).animate(r,{duration:o,complete:()=>{this.skipNextUpdate=!0,t()}})}),this.scrollHandler(e)}))}scroll(e,t){return n(this,void 0,void 0,(function*(){const r=this.container[this.scrollSide],n=this.getPageSize(),i=r+e*n;yield this.scrollToPosition(i,t)}))}stopScroll(){i(this.container).stop()}registerScrollHandler(e){this.scrollHandler=e,i(this.container).off("scroll"),i(this.container).scroll(o(()=>{const e=this.container[this.scrollSide];this.skipNextUpdate?this.skipNextUpdate=!1:this.scrollHandler(e)},100,{trailing:!0,leading:!0}))}allowFocus(e,t){return!(e>this.getPageSize()+parseInt(t.style[this.length],10))}moveAllowed(e,t){const r=e.container.querySelector(`#${t}`),n=r.style,i=parseInt(n[e.side],10)-e.getScrollPosition(),o=parseInt(n[e.length],10);let a=0;return i<0&&i+o<0?a=Math.abs(i):i+o>e.getPageSize()&&(a=i-e.getPageSize()+o),!!e.allowFocus(a,r)||(i<0?e.scroll(-1,c.FOCUS_SCROLL_VELOCITY):e.scroll(1,c.FOCUS_SCROLL_VELOCITY),e.focus(),!1)}initScrollGap(e,t){const r=i(e);e.id=`gap-${this.id.replace(/\W/g,"")}-${this.gapCount}`,this.gapCount++;const n={position:"absolute",width:"scrollLeft"===this.scrollSide?0:this.bounds.width,height:"scrollLeft"===this.scrollSide?this.bounds.height:0};r.css(n),s.SpatialNavigation.makeNavigable(e,t,super.focus,super.blur,this.moveAllowed,this)}overrideSpatialNavigationSection(e){let t=!1;return Array.from(e.getElementsByClassName(s.FOCUSABLE_ELEMENT)).forEach(e=>{e.classList.remove(s.DEFAULT_SECTION),e.classList.add(this.spatialNavigationSection),t=!0}),t}configureNavigation(){this.spatialNavigationSection=s.SpatialNavigation.createSectionName(this.id),this.container.addEventListener(s.SCROLL_INTO_VIEW,e=>{if(e.detail.id.startsWith("gap")){const t=this.container.querySelector(`#${e.detail.id}`),r=parseInt(i(t).css(this.side),10);r<this.getScrollPosition()?this.scrollToPosition(r,c.FOCUS_SCROLL_VELOCITY):r>this.getScrollPosition()+this.getPageSize()&&this.scrollToPosition(r-this.getPageSize(),c.FOCUS_SCROLL_VELOCITY)}else this.scrollComponentInView(e.detail.id)}),this.initScrollGap(this.startGap,this.spatialNavigationSection),this.container.insertBefore(this.startGap,this.container.children[0]),this.initScrollGap(this.endGap,this.spatialNavigationSection),this.container.appendChild(this.endGap),s.SpatialNavigation.enabled()&&(this.overrideSpatialNavigationSection(this.container)||(this.hasFocusableChildren=!0),s.SpatialNavigation.addSection(this.spatialNavigationSection,s.SectionType.SELF_FIRST),this.container.addEventListener("focus",e=>{e.stopPropagation(),s.SpatialNavigation.focus(this.spatialNavigationSection)}))}scrollComponentInView(e){const t=this.renderer.componentMap[e].component.getBoundsInParent(this.component),r=t[this.side],n=this.adjustVisible(r-this.getScrollPosition(),this.getPageSize(),t[this.length]);this.scrollToPosition(this.getScrollPosition()+n,c.FOCUS_SCROLL_VELOCITY)}getScrollPosition(){return this.container[this.scrollSide]}getScrollLength(){return this.container[this.scrollSize]}getPageSize(){return this.bounds[this.length]}getDirection(){return this.direction}adjustVisible(e,t,r){if(e<=0){if(e+r>t)return 0;if(r<t)return e}else{if(e+r<t)return 0;if(r>t)return e}return e-(t-r)}}c.FOCUS_SCROLL_VELOCITY=5,t.Scrollable=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(21),o=r(43),a=r(9),s=r(42).default;class l extends o.Scrollable{constructor(e,t,r,o){super(e,t,r,o),this.firstChildContainerIndex=0,this.fullyLoaded=!1,this.setScrollDirection=()=>{switch(this.props[n.PropertyKey.kPropertyScrollDirection]){case i.ScrollDirection.kScrollDirectionHorizontal:this.direction=i.ScrollDirection.kScrollDirectionHorizontal,this.length="width",this.scrollSide="scrollLeft",this.scrollSize="scrollWidth",this.side="left";break;case i.ScrollDirection.kScrollDirectionVertical:this.direction=i.ScrollDirection.kScrollDirectionVertical,this.length="height",this.scrollSide="scrollTop",this.scrollSize="scrollHeight",this.side="top";break;default:this.logger.warn("Incorrect ScrollDirection type")}},this.onUpdate=()=>{if(this.isDestroyed)return;const e=this.container[this.scrollSide],t=this.bounds[this.length]/2,r=e-t,n=e+this.bounds[this.length]+t;let i=this.first.index,o=this.first.component.component.getBoundsInParent(this.component);for(;i<this.childCount-1&&o[this.side]+o[this.length]<r;){this.first.component.destroy();const e=this.first.next;this.first.next=void 0,e.prev=void 0,this.first=e,i=this.first.index,o=this.first.component.component.getBoundsInParent(this.component)}for(;i>0&&o[this.side]>r;){const e=this.createItem(i-1,this.firstChildContainerIndex);this.first.prev=e,e.next=this.first,this.first=e,i=this.first.index,o=this.first.component.component.getBoundsInParent(this.component);const t={};t[this.side]=Math.min(o[this.side],parseInt(this.$startGap.css(this.side),10)),this.$startGap.css(t)}for(i=this.last.index,o=this.last.component.component.getBoundsInParent(this.component);i>0&&o[this.side]>n;){this.last.component.destroy();const e=this.last.prev;this.last.prev=void 0,e.next=void 0,this.last=e,i=this.last.index,o=this.last.component.component.getBoundsInParent(this.component)}for(;i<this.childCount-1&&o[this.side]+o[this.length]<=n;){const e=this.createItem(i+1,this.container.children.length-1);this.last.next=e,e.prev=this.last,this.last=e,i=this.last.index,o=this.last.component.component.getBoundsInParent(this.component);const t={};t[this.side]=Math.max(o[this.side]+o[this.length],parseInt(this.$startGap.css(this.side),10)),this.$endGap.css(t),i===this.childCount-1&&(this.fullyLoaded=!0)}requestAnimationFrame(this.onUpdate)},this.container.classList.add("scrollView"),this.childCount=t.getChildCount(),this.propExecutor(this.setScrollDirection,n.PropertyKey.kPropertyScrollDirection)}init(){const e=this.component.getCalculated();this.setProperties(e),this.alignSize(),this.$container.css("overflow","hidden");const t={handlers:["drag-thumb","touch","wheel"],scrollXMarginOffset:this.bounds.width-this.innerBounds.width,scrollYMarginOffset:this.bounds.height-this.innerBounds.height,suppressScrollX:this.direction===i.ScrollDirection.kScrollDirectionVertical,suppressScrollY:this.direction===i.ScrollDirection.kScrollDirectionHorizontal,useBothWheelAxes:!0};if(this.registerScrollHandler(this.onScroll.bind(this)),this.childCount>0){this.scrollbar=new s(this.container,t),this.first=this.last=this.createItem(0),this.firstChildContainerIndex=this.container.children.length-1;const e=this.component.getChildAt(this.component.getChildCount()-1).ensureLayout();e instanceof Promise?e.then(()=>{requestAnimationFrame(this.onUpdate)}):requestAnimationFrame(this.onUpdate)}super.configureNavigation();const r=parseInt(this.$endGap.css("width"),10),n=parseInt(this.$endGap.css("height"),10);this.$endGap.css({position:"absolute",width:r||Math.max(1,this.bounds.width-this.innerBounds.width-this.innerBounds.left),height:n||Math.max(1,this.bounds.height-this.innerBounds.height-this.innerBounds.top)})}onScroll(e){this.component&&this.component.updateScrollPosition(e)}createItem(e,t=-1){const r=this.factory(this.renderer,this.component.getChildAt(e),this,!0,t);return this.overrideSpatialNavigationSection(this.container),r instanceof a.Text&&r.setDimensions(),{component:r,index:e}}allowFocus(e,t){return!(e>this.getPageSize()+parseInt(t.style[this.length],10))&&(t!==this.endGap||this.fullyLoaded)}}t.Sequence=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(6),o=r(20),a="Enter";class s extends o.ActionableComponent{constructor(e,t,r,o){super(e,t,r,o),this.pressedDown=!1,this.onMouseDown=()=>{this.pressedDown||(this.update(n.UpdateType.kUpdatePressState,1),this.pressedDown=!0)},this.onMouseLeave=()=>{this.pressedDown&&(this.update(n.UpdateType.kUpdatePressState,0),this.pressedDown=!1)},this.onMouseUp=()=>{this.pressedDown&&(this.update(n.UpdateType.kUpdatePressState,0),this.component.pressed(),this.pressedDown=!1)},this.keydown=e=>{e.key===a&&this.onMouseDown()},this.keyup=e=>{e.key===a&&this.onMouseUp()},this.container.classList.add("noSwipe"),this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mousedown",this.onMouseDown),this.container.addEventListener("mouseleave",this.onMouseLeave),i.SpatialNavigation.enabled()&&(this.container.addEventListener("keydown",this.keydown),this.container.addEventListener("keyup",this.keyup),i.SpatialNavigation.makeNavigable(this.container,i.DEFAULT_SECTION,this.focus,this.blur))}isLayout(){return!0}}t.TouchWrapper=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kAnimationQualityNone=0]="kAnimationQualityNone",e[e.kAnimationQualitySlow=1]="kAnimationQualitySlow",e[e.kAnimationQualityNormal=2]="kAnimationQualityNormal"}(t.AnimationQuality||(t.AnimationQuality={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(48),i=r(53);t.VideoFactory=class{create(e,t,r,o){return e.options.environment.disallowVideo?new i.VideoHolder(e,t,r,o):new n.Video(e,t,r,o)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(14),o=r(49),a=r(0),s=r(50),l=r(51),c=r(12),u=r(102),d=r(22);class h extends d.AbstractVideoComponent{constructor(e,t,r,n){super(e,t,r,n),this.player=new u.HLSVideoPlayer(this),this.currentMediaState={currentTime:0,duration:0,ended:!1,paused:!0,trackCount:0,trackIndex:0},this.videoState=c.PlaybackState.IDLE,this.fromEvent=!1,this.applyCssShadow=e=>{this.player&&this.player.applyCssShadow(e)},this.player=new u.HLSVideoPlayer(this),this.playbackManager=new l.PlaybackManager}onEvent(e){switch(e){case c.PlaybackState.PLAYING:this.currentMediaState.ended=!1,this.currentMediaState.paused=!1;break;case c.PlaybackState.PAUSED:this.currentMediaState.paused=!0;break;case c.PlaybackState.ENDED:this.playbackManager.repeat()?this.rewind().then(()=>this.play()):this.playbackManager.hasNext()?this.next().then(()=>this.play()):this.currentMediaState.ended=!0;break;case c.PlaybackState.ERROR:this.logger.error("Playback error."),this.currentMediaState.ended=!0,this.currentMediaState.paused=!0;break;case c.PlaybackState.LOADED:this.currentMediaResource.loaded=!0;break;case c.PlaybackState.BUFFERING:case c.PlaybackState.IDLE:default:return}this.videoState=e,this.updateMediaState()}playMedia(e,t){return n(this,void 0,void 0,(function*(){this.fromEvent=!0,this.playbackManager.setup(e),this.audioTrack=t,this.currentMediaResource=this.playbackManager.getCurrent(),yield this.seek(this.currentMediaResource.offset),yield this.play(this.audioTrack===i.AudioTrack.kAudioTrackForeground),this.fromEvent=!1}))}controlMedia(e,t){return n(this,void 0,void 0,(function*(){switch(this.fromEvent=!0,e){case o.CommandControlMedia.kCommandControlMediaPlay:yield this.play();break;case o.CommandControlMedia.kCommandControlMediaPause:yield this.pause();break;case o.CommandControlMedia.kCommandControlMediaNext:yield this.next();break;case o.CommandControlMedia.kCommandControlMediaPrevious:yield this.previous();break;case o.CommandControlMedia.kCommandControlMediaRewind:yield this.rewind();break;case o.CommandControlMedia.kCommandControlMediaSeek:yield this.seek(t);break;case o.CommandControlMedia.kCommandControlMediaSetTrack:yield this.setTrack(t);break;default:this.logger.warn("Incorrect CommandControlMedia operation type")}this.fromEvent=!1}))}play(e=!1){return n(this,void 0,void 0,(function*(){this.currentMediaResource=this.playbackManager.getCurrent(),this.audioTrack===i.AudioTrack.kAudioTrackNone?this.player.mute():this.player.unmute(),this.resetPlayPromise(),yield this.ensureLoaded(),yield this.player.play(this.currentMediaResource.id,this.currentMediaResource.url,this.currentMediaResource.offset),yield this.playPromise,e&&(this.resetPausePromise(),yield this.pausePromise)}))}pause(){return n(this,void 0,void 0,(function*(){this.videoState!==c.PlaybackState.PLAYING&&this.videoState!==c.PlaybackState.BUFFERING||(this.resetPausePromise(),this.player.pause(),yield this.pausePromise)}))}next(){return n(this,void 0,void 0,(function*(){yield this.pause(),this.playbackManager.hasNext()?(this.currentMediaResource=this.playbackManager.next(),yield this.ensureLoaded()):(yield this.player.setCurrentTime(this.player.getDuration()-.001),this.updateMediaState())}))}previous(){return n(this,void 0,void 0,(function*(){yield this.pause(),this.currentMediaResource=this.playbackManager.previous(),yield this.ensureLoaded()}))}rewind(){return n(this,void 0,void 0,(function*(){yield this.seek(this.currentMediaResource.offset)}))}seek(e){return n(this,void 0,void 0,(function*(){yield this.pause();const t=this.playbackManager.getCurrent().offset+e;yield this.ensureLoaded(),this.player.getDuration()<=t/1e3?this.player.setCurrentTime(this.player.getDuration()-.001):this.player.setCurrentTime(t/1e3),this.updateMediaState()}))}setTrack(e){return n(this,void 0,void 0,(function*(){yield this.pause(),this.playbackManager.setCurrent(e),this.currentMediaResource=this.playbackManager.getCurrent(),yield this.ensureLoaded()}))}setScale(e){let t="contain";switch(e){case s.VideoScale.kVideoScaleBestFit:t="contain";break;case s.VideoScale.kVideoScaleBestFill:t="cover";break;default:this.logger.warn("Incorrect VideoScale type")}this.player.configure(this.container,t)}setAudioTrack(e){this.audioTrack=e}setSource(e){this.playbackManager.setup(e),this.props[a.PropertyKey.kPropertyAutoplay]&&this.play()}updateMediaState(){this.currentMediaState.currentTime=1e3*this.player.getCurrentPlaybackPosition(),this.currentMediaState.duration=this.player.getDuration(),this.currentMediaState.trackCount=this.playbackManager.getTrackCount(),this.currentMediaState.trackIndex=this.playbackManager.getCurrentIndex(),this.component.updateMediaState(this.currentMediaState,this.fromEvent),this.emit("onUpdateMediaState",this.currentMediaState,this.fromEvent),this.loadPromise&&this.currentMediaResource.loaded&&(this.loadPromise=void 0,this.loadCallback()),this.playPromise&&!1===this.currentMediaState.ended&&!1===this.currentMediaState.paused&&(this.playPromise=void 0,this.playCallback()),!this.pausePromise||!0!==this.currentMediaState.paused&&!0!==this.currentMediaState.ended||(this.pausePromise=void 0,this.pauseCallback())}resetPausePromise(){this.pausePromise&&this.pauseCallback(),this.pausePromise=new Promise(e=>{this.pauseCallback=e})}resetPlayPromise(){this.playPromise&&this.playCallback(),this.playPromise=new Promise(e=>{this.playCallback=e})}resetLoadPromise(){this.loadPromise&&this.loadCallback(),this.loadPromise=new Promise(e=>{this.loadCallback=e})}ensureLoaded(){return n(this,void 0,void 0,(function*(){this.currentMediaResource.loaded?this.updateMediaState():(this.resetLoadPromise(),yield this.player.load(this.currentMediaResource.id,this.currentMediaResource.url),yield this.loadPromise)}))}}t.Video=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandControlMediaPlay=0]="kCommandControlMediaPlay",e[e.kCommandControlMediaPause=1]="kCommandControlMediaPause",e[e.kCommandControlMediaNext=2]="kCommandControlMediaNext",e[e.kCommandControlMediaPrevious=3]="kCommandControlMediaPrevious",e[e.kCommandControlMediaRewind=4]="kCommandControlMediaRewind",e[e.kCommandControlMediaSeek=5]="kCommandControlMediaSeek",e[e.kCommandControlMediaSetTrack=6]="kCommandControlMediaSetTrack"}(t.CommandControlMedia||(t.CommandControlMedia={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kVideoScaleBestFill=0]="kVideoScaleBestFill",e[e.kVideoScaleBestFit=1]="kVideoScaleBestFit"}(t.VideoScale||(t.VideoScale={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(52);t.PlaybackManager=class{constructor(){this.resources=new Map}setup(e){if(this.resources.clear(),Array.isArray(e)){let t=0;for(const r of e)this.addToPlaylist(t,r),t++}else this.addToPlaylist(0,e);this.current=0}getCurrentIndex(){return this.current}getTrackCount(){return this.resources.size}getCurrent(){const e=this.resources.get(this.current);if(!e)throw new Error("Sources misconfigured.");return e}next(){return this.current<this.resources.size-1&&(this.resources.get(this.current).loaded=!1,this.current++),this.reset(),this.getCurrent()}previous(){return this.current>0&&(this.resources.get(this.current).loaded=!1,this.current--),this.reset(),this.getCurrent()}setCurrent(e){this.current!==e&&(this.resources.get(this.current).loaded=!1),this.current=e,this.reset()}hasNext(){return!(!this.resources.get(this.current)||!this.resources.get(this.current+1))}repeat(){const e=this.resources.get(this.current);return!(!e||-1!==e.repeatCount)||!!(e&&e.toRepeat>0)&&(e.toRepeat--,!0)}addToPlaylist(e,t){const r={description:t.description,id:n(),offset:t.offset,repeatCount:t.repeatCount,toRepeat:t.repeatCount,trackIndex:e,url:t.url,loaded:!1};this.resources.set(e,r)}reset(){const e=this.resources.get(this.current);e&&(e.toRepeat=e.repeatCount)}}},function(e,t,r){var n=r(100),i=r(101);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(22);class o extends i.AbstractVideoComponent{constructor(e,t,r,n){super(e,t,r,n)}onEvent(e){}playMedia(e,t){return n(this,void 0,void 0,(function*(){}))}controlMedia(e,t){return n(this,void 0,void 0,(function*(){}))}play(e=!1){return n(this,void 0,void 0,(function*(){}))}pause(){return n(this,void 0,void 0,(function*(){}))}next(){return n(this,void 0,void 0,(function*(){}))}previous(){return n(this,void 0,void 0,(function*(){}))}rewind(){return n(this,void 0,void 0,(function*(){}))}seek(e){return n(this,void 0,void 0,(function*(){}))}setTrack(e){return n(this,void 0,void 0,(function*(){}))}setScale(e){}setAudioTrack(e){}setSource(e){}}t.VideoHolder=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(55),i=r(59);class o extends n.AudioPlayer{constructor(e){super(e),this.contextProvider=new i.DefaultAudioContextProvider}play(e){this.contextProvider.getAudioContext().then(t=>{super.playWithContext(e,t)}).catch(e=>{})}}t.DefaultAudioPlayer=o},function(e,t,r){"use strict";
/*!
 * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(52),i=r(12),o=r(108),a=r(109),s=r(58);t.AudioPlayer=class{constructor(e){if(!e)throw new Error("eventListener is null");this.eventListener=e,this.resourceMap=new Map}prepare(e,t){const r=n(),s=new i.Resource;this.resourceMap.set(r,s);let l=!1;return fetch(e).then(e=>{if("cancelled"===s.getDownloadState())return l=!0,Promise.reject(void 0);if(!e.ok)throw new Error(`Provided URL download failed with status code ${e.status}`);return e.arrayBuffer()}).then(e=>{if("cancelled"===s.getDownloadState())return l=!0,Promise.reject(void 0);const n=(new a.Demuxer).demux(e);if(t){const t=o.extractTextFrames(e);t.length>0&&this.eventListener.onMarker(r,t)}s.setBuffer(n),s.setDownloadState("complete"),this.eventListener.onPrepared(r)}).catch(e=>{l||this.onError(r,e),this.resourceMap.delete(r)}),r}onPlaybackFinished(e){this.eventListener.onPlaybackFinished(e)}onError(e,t){this.eventListener.onError(e,t)}playWithContext(e,t){const r=this.resourceMap.get(e);r&&r.getBuffer()?this.decodePromise||this.currentSource?this.onError(e,"Previous request not complete"):this.decodePromise=new s.CancelablePromise(t.decodeAudioData(r.getBuffer()),r=>{this.currentSource=t.createBufferSource(),this.currentSource.buffer=r,this.currentSource.connect(t.destination),this.currentSource.onended=t=>{this.currentSource.disconnect(),this.currentSource=null,this.onPlaybackFinished(e),this.resourceMap.delete(e)},this.currentSource.start(),this.eventListener.onPlaybackStarted(e),this.decodePromise=null},t=>{this.onError(e,t),this.decodePromise=null}):this.onError(e,"Not prepared")}cancelPendingAndRemoveCompleted(){const e=[];this.resourceMap.forEach((t,r)=>{const n=t.getDownloadState();"pending"===n?t.setDownloadState("cancelled"):"complete"===n&&e.push(r)}),e.forEach(e=>{this.resourceMap.delete(e)})}flush(){this.decodePromise?(this.decodePromise.cancel(),this.decodePromise=null):this.currentSource&&this.currentSource.stop(),this.cancelPendingAndRemoveCompleted()}}},function(e,t,r){var n,i,o;!function(a,s){"use strict";i=[t,r(7)],void 0!==(o="function"==typeof(n=function(e,t){var r={AENC:"Audio encryption",APIC:"Attached picture",CHAP:"Chapter",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},n={T:function(e,r,n){var i={encoding:e.getUint8(r)};return i.value=t.readStr[0===i.encoding?"iso":"ucs"](e,r+1,n-1),i},TXXX:function(e,r,n){var i={encoding:e.getUint8(r)};if(n<2)return i;var o=0===i.encoding?"iso":"ucs",a=r+1,s=t.locateStrTrm[o](e,a,n-4);return-1===s?i:(i.description=t.readStr[o](e,a,s-a),s+="ucs"===o?2:1,i.value=t.readStr[o](e,s,r+n-s),i)},W:function(e,r,n){return{value:t.readStr.iso(e,r,n)}},WXXX:function(e,r,n){var i={encoding:e.getUint8(r)};if(n<2)return i;var o=0===i.encoding?"iso":"ucs",a=r+1,s=t.locateStrTrm[o](e,a,n-4);return-1===s?i:(i.description=t.readStr[o](e,a,s-a),s+="ucs"===o?2:1,i.value=t.readStr.iso(e,s,r+n-s),i)},COMM:function(e,r,n){var i={encoding:e.getUint8(r)};if(n<5)return i;var o=0===i.encoding?"iso":"ucs",a=r+4;i.language=t.readTrmStr.iso(e,r+1,3);var s=t.locateStrTrm[o](e,a,n-4);return-1===s?i:(i.description=t.readStr[o](e,a,s-a),s+="ucs"===o?2:1,i.text=t.readStr[o](e,s,r+n-s),i)},UFID:function(e,r,n){var i=t.readTrmStr.iso(e,r,n);return{ownerIdentifier:i,identifier:new DataView(e.buffer,r+i.length+1,n-i.length-1)}},IPLS:function(e,r,n){for(var i,o={encoding:e.getUint8(r),values:[]},a=0===o.encoding?"iso":"ucs",s=r+1;s<r+n;)-1===(i=t.locateStrTrm[a](e,s,n-(s-r)))&&(i=r+n),o.values.push(t.readStr[a](e,s,i-s)),s=i+("ucs"===a?2:1);return o},USER:function(e,r,n){var i={encoding:e.getUint8(r)};if(n<5)return i;i.language=t.readTrmStr.iso(e,r+1,3);var o=r+4,a=0===i.encoding?"iso":"ucs";return i.text=t.readStr[a](e,o,r+n-o),i},PRIV:function(e,r,n){var i=t.readTrmStr.iso(e,r,n);return{ownerIdentifier:i,privateData:new DataView(e.buffer,r+i.length+1,n-i.length-1)}},PCNT:function(e,t,r){return r<4?{}:{counter:e.getUint32(t)}},POPM:function(e,r,n){var i={email:t.readTrmStr.iso(e,r,n)};return r+=i.email.length+1,n<6?i:(i.rating=e.getUint8(r),i.counter=e.getUint32(r+1),i)},APIC:function(e,r,n){var i={encoding:e.getUint8(r)};if(n<4)return i;var o,a,s=0===i.encoding?"iso":"ucs";return o=r+1,-1===(a=t.locateStrTrm.iso(e,o,n-1))?i:(i.mimeType=t.readStr.iso(e,o,a-o),o=a+1,i.pictureType=e.getUint8(o),o+=1,-1===(a=t.locateStrTrm[s](e,o,r+n-o))?i:(i.description=t.readStr[s](e,o,a-o),o=a+("ucs"===s?2:1),i.pictureData=new DataView(e.buffer,o,r+n-o),i))},CHAP:function(r,n,i){var o={encoding:r.getUint8(n)},a=t.locateStrTrm.iso(r,n,i-1);if(-1===a)return o;o.id=t.readStr.iso(r,n,a-n),o.startTime=r.getUint32(a+1),o.endTime=r.getUint32(a+5),o.startOffset=r.getUint32(a+9),o.endOffset=r.getUint32(a+13);var s=a+17;for(o.frames=[];s<n+i;){var l=e.readId3v2TagFrame(r,s);o.frames.push(l),s+=l.header.size+10}return o}};e.readId3v2TagFrame=function(e,i){var o={header:{id:t.readStr.iso(e,i,4),size:e.getUint32(i+4),flagsOctet1:e.getUint8(i+8),flagsOctet2:e.getUint8(i+9)}};if(o.header.size<1)return o;var a,s,l=(a=n,"TXXX"===(s=o.header.id)?a.TXXX:"T"===s.charAt(0)?a.T:"WXXX"===s?a.WXXX:"W"===s.charAt(0)?a.W:"COMM"===s||"USLT"===s?a.COMM:a[s]||t.noOp);return o.name=r[o.header.id],o.content=l(e,i+10,o.header.size),o},e.readId3v2Tag=function(r,n){if(n||(n=0),r.byteLength-n<10)return null;if(!t.isSeq(t.seq.id3,r,n))return null;var i=r.getUint8(n+5),o={_section:{type:"ID3v2",offset:n},header:{majorVersion:r.getUint8(n+3),minorRevision:r.getUint8(n+4),flagsOctet:i,unsynchronisationFlag:128==(128&i),extendedHeaderFlag:64==(64&i),experimentalIndicatorFlag:32==(32&i),size:t.unsynchsafe(r.getUint32(n+6))},frames:[]};o._section.byteLength=o.header.size+10;var a,s=n+o._section.byteLength;if(3!==o.header.majorVersion)return o;for(n+=10;n<s&&0!==r.getUint32(n)&&(a=e.readId3v2TagFrame(r,n));)o.frames.push(a),n+=a.header.size+10;return o}})?n.apply(t,i):n)&&(e.exports=o)}()},function(e,t,r){var n,i,o;!function(a,s){"use strict";i=[t,r(7)],void 0!==(o="function"==typeof(n=function(e,t){e.readXingTag=function(e,r){r||(r=0);var n={_section:{type:"Xing",offset:r},header:t.readFrameHeader(e,r)},i=n.header;if(!i)return null;var o=r+t.getXingOffset(i.mpegAudioVersionBits,i.channelModeBits);return e.byteLength<o+4?null:(n.identifier=t.isSeq(t.seq.xing,e,o)?"Xing":t.isSeq(t.seq.info,e,o)&&"Info",n.identifier?(n._section.byteLength=t.getFrameByteLength(i.bitrate,i.samplingRate,i.framePadding,i.mpegAudioVersionBits,i.layerDescriptionBits),n._section.nextFrameIndex=r+n._section.byteLength,n):null)}})?n.apply(t,i):n)&&(e.exports=o)}()},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseContainer=class{constructor(){this.promise=new Promise((e,t)=>{this.accept=e,this.reject=t})}},t.CancelablePromise=class{constructor(e,t,r){e.then(e=>{this.cancelled||t(e),this.hasRun=!0}).catch(e=>{if(!r)throw new Error(e);r(e)})}cancel(){if(this.cancelled)throw new Error("Promise has already been marked as cancelled");if(this.hasRun)throw new Error("Promise has already run and cannot be cancelled");this.cancelled=!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAudioContextProvider=class{getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),Promise.resolve(this.audioContext)}releaseAudioContext(e){return Promise.resolve()}}},function(e,t,r){var n=r(61);"string"==typeof n&&(n=[[e.i,n,""]]);r(63)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(62)(!1)).push([e.i,"/*\n * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n */\n\n @font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Rg.ttf');\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Lt.ttf');\n    font-weight: 100;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Lt.ttf');\n    font-weight: 200;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Lt.ttf');\n    font-weight: 300;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Rg.ttf');\n    font-weight: 400;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Md.ttf');\n    font-weight: 500;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Md.ttf');\n    font-weight: 600;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Bd.ttf');\n    font-weight: 700;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_Bd.ttf');\n    font-weight: 800;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/AmazonEmberDisplay_He.ttf');\n    font-weight: 900;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-LightItalic.ttf');\n    font-weight: 100;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-LightItalic.ttf');\n    font-weight: 200;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-LightItalic.ttf');\n    font-weight: 300;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-RegularItalic.ttf');\n    font-weight: 400;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-MediumItalic.ttf');\n    font-weight: 500;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-MediumItalic.ttf');\n    font-weight: 600;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-BoldItalic.ttf');\n    font-weight: 700;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-BoldItalic.ttf');\n    font-weight: 800;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'amazon-ember-display';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Amazon-Ember-BoldItalic.ttf');\n    font-weight: 900;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Regular.ttf');\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Regular.ttf');\n    font-weight: 100;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Regular.ttf');\n    font-weight: 400;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Bold.ttf');\n    font-weight: 500;\n    font-style: normal;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Italic.ttf');\n    font-weight: 100;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-Italic.ttf');\n    font-weight: 400;\n    font-style: italic;\n}\n\n@font-face {\n    font-family: 'Bookerly';\n    src: url('https://d1gkjrhppbyzyh.cloudfront.net/Bookerly-BoldItalic.ttf');\n    font-weight: 500;\n    font-style: italic;\n}\n",""])},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(r=a,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),l=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot).concat(e," */")}));return[o].concat(l).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var a=0;a<e.length;a++){var s=e[a];null!=s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="(".concat(s[2],") and (").concat(r,")")),t.push(s))}},t}},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,u=0,d=[],h=r(64);function p(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(b(n.parts[a],t))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(b(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:s}}}}function f(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function g(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=d[d.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),d.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertAt.before,r);r.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return v(t,e.attrs),g(e,t),t}function v(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;r=c||(c=m(t)),n=S.bind(null,r,a,!1),i=S.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),g(e,t),t}(t),n=w.bind(null,r,t),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=m(t),n=k.bind(null,r),i=function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return p(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(s=o[a.id]).refs--,n.push(s)}for(e&&p(f(e,t),t),i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var T,P=(T=[],function(e,t){return T[e]=t,T.filter(Boolean).join("\n")});function S(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=P(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function k(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function w(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=h(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(24),o=r(31),a=r(9),s=r(46),l=r(47),c=r(6),u=r(107),d=r(5),h="AplWebRenderer",p="1.0.0";var f;!function(e){e[e.KeyDown=0]="KeyDown",e[e.KeyUp=1]="KeyUp"}(f=t.KeyHandlerType||(t.KeyHandlerType={}));class g{constructor(e){this.mOptions=e,this.componentMap={},this.componentIdMap={},this.componentByMappingKey=new Map,this.startTime=Number.NaN,this.update=()=>{if(this.context){let e=this.context.getTheme();"light"!==e&&"dark"!==e&&(e="dark");const t={dark:"black",light:"white"};for(this.view.style.backgroundColor=t[e],isNaN(this.startTime)&&(this.startTime=Date.now()),this.context.updateTime(Date.now()-this.startTime);this.context.hasEvent();){const e=this.context.popEvent();i.commandFactory(e,this)}if(this.context.isDirty()){const e=this.context.getDirty();for(const t of e){const e=this.componentMap[t];e&&e.updateDirtyProps()}this.context.clearDirty()}requestAnimationFrame(this.update)}},this.getScreenCoords=e=>{let t,r;if(-1!==navigator.appVersion.indexOf("MSIE")){const n="CSS1Compat"===document.compatMode?document.documentElement:document.body;t=e.clientX+n.scrollLeft,r=e.clientY+n.scrollTop}else t=e.pageX,r=e.pageY;return{x:t,y:r}},this.getTransformScale=()=>{let e=1,t=1;return void 0!==this.view&&(e=this.view.getBoundingClientRect().width/this.view.offsetWidth,t=this.view.getBoundingClientRect().height/this.view.offsetHeight),{scaleX:e,scaleY:t}},this.getViewportCoords=e=>{const t=this.getScreenCoords(e),r=void 0===this.view?0:this.view.getBoundingClientRect().left,n=void 0===this.view?0:this.view.getBoundingClientRect().top;return{x:(t.x-r)/this.getTransformScale().scaleX,y:(t.y-n)/this.getTransformScale().scaleY}},this.onMouseMove=e=>{if(this.context&&this.view){const t=this.getViewportCoords(e);this.context.updateCursorPosition(t.x,t.y)}},this.onMouseLeave=e=>{if(this.context&&this.view){const t=this.getViewportCoords(e);let r,n;const i=5;r=Math.abs(t.x)<i?-i:Math.abs(t.x-this.view.getBoundingClientRect().width)<i?t.x+i:t.x,n=Math.abs(t.y)<i?-i:Math.abs(t.y-this.view.getBoundingClientRect().height)<i?t.y+i:t.y,this.context.updateCursorPosition(r,n)}},this.handleKeyDown=e=>{if(this.context){const t=this.getKeyboard(e);this.context.handleKeyboard(f.KeyDown,t)}},this.handleKeyUp=e=>{if(this.context){const t=this.getKeyboard(e);this.context.handleKeyboard(f.KeyUp,t)}},this.getKeyboard=e=>({code:e.code,key:e.key,repeat:e.repeat,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}),this.logger=d.LoggerFactory.getLogger("APLRenderer"),this.videoFactory=e.videoFactory?e.videoFactory:new l.VideoFactory,e.mode||(e.mode="HUB"),e.viewport.shape||(e.viewport.shape=e.viewport.isRound?"ROUND":"RECTANGLE"),e.view.style.height=e.viewport.height+"px",e.view.style.width=e.viewport.width+"px","ROUND"===e.viewport.shape?e.view.style.clipPath="circle(50%)":e.view.style.clipPath="",e.view.style.backgroundColor={dark:"black",light:"white"}[e.theme],this.view=e.view,this.view.style.display="flex",this.view.style.justifyContent="center",this.view.style.alignItems="center",this.view.addEventListener("mousemove",this.onMouseMove),this.view.addEventListener("mouseleave",this.onMouseLeave),this.view.tabIndex=0,this.view.addEventListener("keydown",this.handleKeyDown,!1),this.view.addEventListener("keyup",this.handleKeyUp,!1),e.environment.agentName=e.environment.agentName?e.environment.agentName:h,e.environment.agentVersion=e.environment.agentVersion?e.environment.agentVersion:p,e.environment.allowOpenUrl=void 0!==e.environment.allowOpenUrl&&e.environment.allowOpenUrl,e.environment.disallowVideo=void 0!==e.environment.disallowVideo&&e.environment.disallowVideo,e.environment.animationQuality=void 0===e.environment.animationQuality?s.AnimationQuality.kAnimationQualityNormal:e.environment.animationQuality,e.onSendEvent&&(this.onSendEvent=e.onSendEvent),e.onRequestGraphic&&(this.onRequestGraphic=e.onRequestGraphic),e.environment.allowOpenUrl&&e.onOpenUrl&&(this.onOpenUrl=e.onOpenUrl),this.audioPlayer=new u.AudioPlayerWrapper(e.audioPlayerFactory)}get options(){return this.mOptions}init(){c.SpatialNavigation.uninit(),"TV"===this.mOptions.mode&&c.SpatialNavigation.init();const e=this.context.topComponent();this.top=o.componentFactory(this,e),this.view&&this.view.appendChild(this.top.container),this.top.init(),this.top.$container.css("position",""),requestAnimationFrame(this.update),"TV"===this.mOptions.mode&&c.SpatialNavigation.setFocusableComponents()}getDeveloperToolOptions(){return this.mOptions.developerToolOptions}onRequestGraphic(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"get"});if(200===t.status)return yield t.text()}))}onOpenUrl(e){return n(this,void 0,void 0,(function*(){if(!this.mOptions.environment.allowOpenUrl)return!1;const t=window.open(e,"_blank");return!!t&&(t.focus(),!0)}))}onSendEvent(e){this.logger.info(`SendEvent: ${JSON.stringify(e)}`)}onMeasure(e,t,r,n,i){const{width:o,height:s}=this.mOptions.viewport,l=new a.TextMeasurement(e,o,s);return l.init(),l.onMeasure(t,r,n,i)}onBaseline(e,t,r){return.5*r}destroy(){if(this.context){if(this.context.topComponent()){const e=this.componentMap[this.context.topComponent().getUniqueId()];e&&e.destroy(!0)}this.context.delete(),this.context=void 0}this.top&&this.view&&this.top.container&&this.view.contains(this.top.container)&&this.view.removeChild(this.top.container),this.view&&(this.view=void 0)}getBackgroundColor(){return"grey"}getComponentById(e){return this.componentIdMap[e]}getComponentsByMappingKey(e){return new Map(Array.from(this.componentByMappingKey).filter((t,r)=>t[0].replace(g.mappingKeyExpression,"")===e))}addComponent(e,t,r){return e.inflateAndAddChild(t,r)}deleteComponent(e){return e.remove()}updateComponent(e,t){const r=e.parent;if(!r)return;const n=r.children.indexOf(e);return e.remove(),r.inflateAndAddChild(n,t)}}g.mappingKeyExpression=/:\d+$/,t.default=g},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),o=r(2);class a extends o.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getComponent().getUniqueId(),t=this.event.getValue(i.EventProperty.kEventPropertyValue),r=this.event.getValue(i.EventProperty.kEventPropertyCommand);if(!this.renderer.componentMap[e])return this.logger.error(`Could not ControlMedia. Cannot find Component with id ${e}`),void this.resolve();const n=this.renderer.componentMap[e];this.isTerminated||(yield n.controlMedia(r,t)),this.isTerminated||this.resolve(),this.destroy()}))}}t.ControlMedia=a},function(e,t,r){var n,i;!function(o,a){"use strict";void 0===(i="function"==typeof(n=function(){var e=function(){},t="undefined",r=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function o(e,r,n){return function(){typeof console!==t&&(i.call(this,r,n),this[e].apply(this,arguments))}}function a(r,i,a){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):e)}(r)||o.apply(this,arguments)}function s(e,n,o){var s,l=this,c="loglevel";function u(){var e;if(typeof window!==t){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}}e&&(c+=":"+e),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=o||a,l.getLevel=function(){return s},l.setLevel=function(n,o){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==o&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}}(n),i.call(l,n,e),typeof console===t&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){u()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var d=u();null==d&&(d=null==n?"WARN":n),l.setLevel(d,!1)}var l=new s,c={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new s(e,l.getLevel(),l.methodFactory)),t};var u=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=u),l},l.getLoggers=function(){return c},l})?n.call(t,r,t,e):n)||(e.exports=i)}()},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),o=r(2);class a extends o.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getValue(i.EventProperty.kEventPropertySource);(yield this.renderer.onOpenUrl(e))?this.event.resolve():this.event.resolveWithArg(1)}))}}t.OpenUrl=a},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(14),o=r(25),a=r(3),s=r(2);class l extends s.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getComponent().getUniqueId(),t=this.event.getValue(a.EventProperty.kEventPropertyAudioTrack),r=this.event.getValue(a.EventProperty.kEventPropertySource);if(!this.renderer.componentMap[e])return void this.resolve();const n=this.renderer.componentMap[e];this.isTerminated||(yield n.playMedia(r,this.convertAudioTrack(t))),this.isTerminated||this.resolve(),this.destroy()}))}convertAudioTrack(e){switch(e){case o.CommandAudioTrack.kCommandAudioTrackForeground:return i.AudioTrack.kAudioTrackForeground;case o.CommandAudioTrack.kCommandAudioTrackBackground:return i.AudioTrack.kAudioTrackBackground;case o.CommandAudioTrack.kCommandAudioTrackNone:return i.AudioTrack.kAudioTrackNone;default:return this.logger.warn("Incorrect CommandAudioTrack type"),i.AudioTrack.kAudioTrackNone}}}t.PlayMedia=l},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8),o=r(3),a=r(2);class s extends a.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getComponent().getUniqueId(),t=this.event.getValue(o.EventProperty.kEventPropertyPosition),r=this.renderer.componentMap[e];!r||r.component.getType()!==i.ComponentType.kComponentTypeSequence&&r.component.getType()!==i.ComponentType.kComponentTypeScrollView?this.logger.error(`Could not Scroll. Cannot find scrollable with id ${e}`):yield r.scrollToPosition(t,2),this.isTerminated||this.resolve(),this.destroy()}))}}t.ScrollTo=s},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),o=r(2);class a extends o.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getValue(i.EventProperty.kEventPropertyArguments),t=this.event.getValue(i.EventProperty.kEventPropertyComponents),r=this.event.getValue(i.EventProperty.kEventPropertySource);this.renderer.onSendEvent({source:r,arguments:e,components:t}),this.resolve(),this.destroy()}))}}t.SendEvent=a},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),o=r(2);class a extends o.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getComponent().getUniqueId(),t=this.event.getValue(i.EventProperty.kEventPropertyPosition);if(!this.renderer.componentMap[e])return this.logger.error(`Could not SetPage. Cannot find Pager with id ${e}`),void this.resolve();const r=this.renderer.componentMap[e];yield r.setPage(t),this.isTerminated||this.resolve(),this.destroy()}))}}t.SetPage=a},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2),o=r(3),a=r(15),s=r(74),l=r(23);class c extends i.Event{onPlaybackStarted(){const e=this.renderer.audioPlayer.getLatestMarkers(),t=this.component.component.getType();s.HighlightSequencer.shouldUseSequencer(e,t,this.highlightMode)?this.highlightSequencer=new s.HighlightSequencer(this.component,this.align,e,this.renderer):this.highlightMode===a.CommandHighlightMode.kCommandHighlightModeBlock&&t===l.ComponentType.kComponentTypeText&&(this.textComponent=this.component,this.textComponent.highlight())}onPlaybackFinished(){this.highlightSequencer?this.highlightSequencer.stop():this.textComponent&&this.textComponent.unhighlight(),this.isTerminated||(this.resolve(),super.terminate())}execute(){return n(this,void 0,void 0,(function*(){this.component=this.renderer.componentMap[this.event.getComponent().getUniqueId()],this.align=this.event.getValue(o.EventProperty.kEventPropertyAlign),this.highlightMode=this.event.getValue(o.EventProperty.kEventPropertyHighlightMode),this.renderer.audioPlayer.playLatest(this)}))}terminate(){super.terminate(),this.highlightSequencer?this.highlightSequencer.stop():this.textComponent&&this.textComponent.unhighlight(),this.renderer.audioPlayer.stop(),this.destroy()}}t.Speak=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(75),i=r(8),o=r(15);t.HighlightSequencer=class{constructor(e,t,r,i){this.lookAheadOffset=0,this.textComponent=e,this.lineRanges=e.getLineRanges(),this.align=t,this.renderer=i,this.markSequencer=new n.MarkSequencer(r,this.onMarker.bind(this))}static shouldUseSequencer(e,t,r){return e&&t===i.ComponentType.kComponentTypeText&&r===o.CommandHighlightMode.kCommandHighlightModeLine}stop(){this.markSequencer.stop(),this.textComponent.unhighlight()}onMarker(e){const t=this.textComponent.getPlainText().indexOf(e.value,this.lookAheadOffset);if(-1===t)return;this.lookAheadOffset=t+e.value.length;const r=this.lineRanges.findIndex(e=>t>=e.start&&t<=e.end);if(r<0)return;const n=this.lineRanges[r];this.textComponent.highlight(r),this.renderer.context.scrollToRectInComponent(this.textComponent.component,0,n.top,this.textComponent.bounds.width,n.height,this.align)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76);t.MarkSequencer=class{constructor(e,t){this.epoch=Date.now(),this.callback=t,this.markers=e.reduce((e,t)=>("word"===t.type&&e.push({value:n(t.value),time:t.time,type:t.type}),e),[]),this.scheduleNext()}onElapsed(){this.timerId=null;const e=this.markers.shift();this.callback(e),this.scheduleNext()}scheduleNext(){const e=Date.now()-this.epoch;for(;this.markers.length>0;){const t=this.markers[0].time-e;if(t>=0){this.timerId=window.setTimeout(this.onElapsed.bind(this),t);break}this.markers.shift()}}stop(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null)}}},function(e,t){e.exports=function(e){var t,r,n,i="",o=0;for(t=r=0;o<e.length;)(t=e.charCodeAt(o))<128?(i+=String.fromCharCode(t),o++):t>191&&t<224?(r=e.charCodeAt(o+1),i+=String.fromCharCode((31&t)<<6|63&r),o+=2):(r=e.charCodeAt(o+1),n=e.charCodeAt(o+2),i+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&n),o+=3);return i}},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(3),i=r(2);class o extends i.Event{execute(){const e=this.event.getValue(n.EventProperty.kEventPropertySource);e&&e.length>0?this.renderer.audioPlayer.prepareAsync(e,!0):this.logger.error('Event does not have a "source" property with speech')}terminate(){this.renderer.audioPlayer.stop(),super.terminate()}}t.Preroll=o},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2);class o extends i.Event{execute(){return n(this,void 0,void 0,(function*(){const e=this.event.getComponent();e?this.renderer.componentMap[e.getUniqueId()].container.focus():document.activeElement.blur(),this.event.resolve()}))}}t.Focus=o},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2),o=r(9);class a extends i.Event{execute(){return n(this,void 0,void 0,(function*(){if(this.component=this.renderer.componentMap[this.event.getComponent().getUniqueId()],this.component instanceof o.Text){const e=this.component.getLineRanges(),t=e&&e.length>0?e[0].top:0,r=e&&e.length>0?e[0].height:0;this.component.highlight(0),this.event.resolveWithRect(t,0,this.component.bounds.width,r)}}))}}t.RequestFirstLineBounds=a},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,n||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},c.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},c.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,o),!0;case 6:return u.fn.call(u.context,t,r,n,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||l(this,o);else{for(var s=0,c=[],u=a.length;s<u;s++)(a[s].fn!==t||n&&!a[s].once||r&&a[s].context!==r)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:l(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kDisplayNormal=0]="kDisplayNormal",e[e.kDisplayInvisible=1]="kDisplayInvisible",e[e.kDisplayNone=2]="kDisplayNone"}(t.Display||(t.Display={}))},function(e,t,r){"use strict";
/*!
 * Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(83);class i{constructor(){this.styles={markColor:"red"}}static spanCompare(e,t){return e.start>t.start?1:e.start<t.start?-1:"mark"===e.type?-1:"mark"===t.type?1:"text"===e.type?1:"text"===t.type?-1:0}processStyledText(e,t){const r=t||document.createElement("p");if(t)for(;r.firstChild;)r.removeChild(r.firstChild);const o=e.text,a=e.spans,s=new n.DocumentBuilder(this.styles,o.length);if(o){if(0!==a.length){const e=[],t=new Set;a.forEach(r=>{t.add(r.start),t.add(r.end),e.push({type:r.type,start:r.start,end:r.end,children:[]})}),t.add(0),t.add(o.length);const r=Array.from(t).sort((e,t)=>e-t);for(let t=0;t<r.length-1;t++){const n=r[t],i=r[t+1];e.push({type:"text",start:n,end:i,text:o.slice(n,i)})}e.sort(i.spanCompare).forEach(e=>s.add(e))}else s.add({type:"text",start:0,end:o.length,text:o});s.finalize(r)}return r}}t.RichTextParser=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(84),i=r(5);class o{constructor(e,t){this.root={type:"root",start:0,end:t,children:[]},this.markStyles=e}add(e){this.addTo(this.root,e)}finalize(e){if(this.root.children)for(const t of this.root.children)this.process(t,e)}addTo(e,t){let r=!1;const i=e=>{switch(e){case"text":case n.SpanType.kSpanTypeLineBreak:return!0;default:return!1}};if(t.start>=e.start&&t.end<=e.end){e.children||(e.children=[]);for(const n of e.children)if(!i(n.type)&&(r=this.addTo(n,t)))break;if(!r)return e.children.push(t),!0}return r}process(e,t){const r=this.transformElement(e);if(t.appendChild(r),e.children&&0!==e.children.length)for(const t of e.children)this.process(t,r)}transformElement(e){let t=document.createElement("data");switch(e.type){case n.SpanType.kSpanTypeItalic:t.style.fontStyle="italic";break;case n.SpanType.kSpanTypeStrong:t.style.fontWeight="700";break;case n.SpanType.kSpanTypeMonospace:t.style.fontFamily="monospace";break;case n.SpanType.kSpanTypeSubscript:t.style.fontSize="smaller",t.style.verticalAlign="sub";break;case n.SpanType.kSpanTypeLineBreak:t=document.createElement("br");break;case n.SpanType.kSpanTypeSuperscript:t.style.fontSize="smaller",t.style.verticalAlign="super";break;case n.SpanType.kSpanTypeStrike:t.style.textDecoration="line-through";break;case n.SpanType.kSpanTypeUnderline:t.style.textDecoration="underline";break;case"text":e.text&&(t.textContent=e.text);break;case"mark":this.markStyles.markColor&&(t.style.color=this.markStyles.markColor);break;default:o.logger.warn("Incorrect span type")}return t}}o.logger=i.LoggerFactory.getLogger("DocumentBuilder"),t.DocumentBuilder=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kSpanTypeLineBreak=0]="kSpanTypeLineBreak",e[e.kSpanTypeStrong=1]="kSpanTypeStrong",e[e.kSpanTypeItalic=2]="kSpanTypeItalic",e[e.kSpanTypeStrike=3]="kSpanTypeStrike",e[e.kSpanTypeUnderline=4]="kSpanTypeUnderline",e[e.kSpanTypeMonospace=5]="kSpanTypeMonospace",e[e.kSpanTypeSuperscript=6]="kSpanTypeSuperscript",e[e.kSpanTypeSubscript=7]="kSpanTypeSubscript"}(t.SpanType||(t.SpanType={}))},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(86),i=(e,t)=>{const r=e.height/2,n=e.top+r,i=e.bottom+r;return t.top>n||t.bottom>i},o=(e,t)=>{const r=e.height/2;return t.height>e.height+r?{top:e.bottom,bottom:t.bottom,height:e.height}:{top:t.top,bottom:t.bottom,height:t.height}};t.Geometry=class{constructor(e,t){this.element=e,this.scalingY=this.element.offsetHeight/this.element.getBoundingClientRect().height,this.parentY=this.element.getBoundingClientRect().top,this.parentPadding=this.element.offsetTop/this.scalingY,this.offsetTop=t}createLineRange(e,t,r){return{start:e,end:t,top:(this.parentPadding+r.top-this.parentY)*this.scalingY,height:r.height*this.scalingY,bottom:(this.parentPadding+r.bottom-this.parentY)*this.scalingY}}splitByLine(){const e=[],t=n.allTextNodes(this.element),r=document.createRange(),a=this.element.getBoundingClientRect();let s=void 0,l=0,c=0;for(let n=0;n<t.length;n++){const u=t[n];for(let d=0;d<u.textContent.length;d++){const h=n===t.length-1&&d===u.textContent.length-1;r.setStart(u,d),r.setEnd(u,d+1);const p=r.getBoundingClientRect(),f=p.top-a.top+this.offsetTop,g=p.bottom-a.top+this.offsetTop,y={top:f,bottom:g,height:g-f};s||(s=y);const m=i(s,y);h&&!m?e.push(this.createLineRange(l,c+d,s)):m&&(e.push(this.createLineRange(l,c+d-1,s)),s=o(s,y),h&&e.push(this.createLineRange(c+d,c+d,s)),l=c+d)}c+=u.textContent.length}return this.split(e),e}split(e){const t=document.createRange();let r=0;const i=[];for(let o=0;o<e.length;o++){const a=e[o];let s=void 0;const l=n.textNodes(this.element);for(const e of l){if(a.end<r+e.textContent.length){s=e;break}r+=e.textContent.length}if(void 0===s)return;t.setStart(this.element,0),t.setEnd(s,a.end+1-r);const c=t.extractContents();i.push(c),r=a.end+1}for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);i.forEach(e=>{const t=document.createElement("data");t.appendChild(e),this.element.appendChild(t)})}}},function(e,t,r){"use strict";
/*!
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=3;function*i(e){const t=[e];for(;t.length>0;){const e=t.shift();e.nodeType===n&&(yield e);for(let r=e.childNodes.length-1;r>=0;r--)t.unshift(e.childNodes[r])}}t.textNodes=i,t.allTextNodes=e=>[...i(e)]},function(e,t,r){var n;!function(){function i(e,t,r){return e.call.apply(e.bind,arguments)}function o(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function a(e,t,r){return(a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var s=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var c=!!window.FontFace;function u(e,t,r,n){if(t=e.c.createElement(t),r)for(var i in r)r.hasOwnProperty(i)&&("style"==i?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n&&t.appendChild(e.c.createTextNode(n)),t}function d(e,t,r){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(r,e.lastChild)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t,r){t=t||[],r=r||[];for(var n=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[i]===n[a]){o=!0;break}o||n.push(t[i])}for(t=[],i=0;i<n.length;i+=1){for(o=!1,a=0;a<r.length;a+=1)if(n[i]===r[a]){o=!0;break}o||t.push(n[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(e,t){for(var r=e.className.split(/\s+/),n=0,i=r.length;n<i;n++)if(r[n]==t)return!0;return!1}function g(e,t,r){function n(){s&&i&&o&&(s(a),s=null)}t=u(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,o=!0,a=null,s=r||null;c?(t.onload=function(){i=!0,n()},t.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),n()}):setTimeout((function(){i=!0,n()}),0),d(e,"head",t)}function y(e,t,r,n){var i=e.c.getElementsByTagName("head")[0];if(i){var o=u(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout((function(){a||(a=!0,r&&r(Error("Script load timeout")))}),n||5e3),o}return null}function m(){this.a=0,this.c=null}function v(e){return e.a++,function(){e.a--,T(e)}}function b(e,t){e.c=t,T(e)}function T(e){0==e.a&&e.c&&(e.c(),e.c=null)}function P(e){this.a=e||"-"}function S(e,t){this.c=e,this.f=4,this.a="n";var r=(t||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function k(e){var t=[];e=e.split(/,\s*/);for(var r=0;r<e.length;r++){var n=e[r].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function w(e){return e.a+e.f}function E(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function A(e){var t=4,r="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(r=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),r+t}function x(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new P("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function C(e){if(e.g){var t=f(e.f,e.a.c("wf","active")),r=[],n=[e.a.c("wf","loading")];t||r.push(e.a.c("wf","inactive")),p(e.f,r,n)}_(e,"inactive")}function _(e,t,r){e.j&&e.h[t]&&(r?e.h[t](r.c,w(r)):e.h[t]())}function L(){this.c={}}function R(e,t){this.c=e,this.f=t,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function O(e){d(e.c,"body",e.a)}function D(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+k(e.c)+";font-style:"+E(e)+";font-weight:"+e.f+"00;"}function I(e,t,r,n,i,o){this.g=e,this.j=t,this.a=n,this.c=r,this.f=i||3e3,this.h=o||void 0}function M(e,t,r,n,i,o,a){this.v=e,this.B=t,this.c=r,this.a=n,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new R(this.c,this.s),this.h=new R(this.c,this.s),this.j=new R(this.c,this.s),this.m=new R(this.c,this.s),e=D(e=new S(this.a.c+",serif",w(this.a))),this.g.a.style.cssText=e,e=D(e=new S(this.a.c+",sans-serif",w(this.a))),this.h.a.style.cssText=e,e=D(e=new S("serif",w(this.a))),this.j.a.style.cssText=e,e=D(e=new S("sans-serif",w(this.a))),this.m.a.style.cssText=e,O(this.g),O(this.h),O(this.j),O(this.m)}P.prototype.c=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},I.prototype.start=function(){var e=this.c.o.document,t=this,r=s(),n=new Promise((function(n,i){!function o(){s()-r>=t.f?i():e.fonts.load(function(e){return E(e)+" "+e.f+"00 300px "+k(e.c)}(t.a),t.h).then((function(e){1<=e.length?n():setTimeout(o,25)}),(function(){i()}))}()})),i=null,o=new Promise((function(e,r){i=setTimeout(r,t.f)}));Promise.race([o,n]).then((function(){i&&(clearTimeout(i),i=null),t.g(t.a)}),(function(){t.j(t.a)}))};var F={D:"serif",C:"sans-serif"},N=null;function B(){if(null===N){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return N}function U(e,t,r){for(var n in F)if(F.hasOwnProperty(n)&&t===e.f[F[n]]&&r===e.f[F[n]])return!0;return!1}function j(e,t){setTimeout(a((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),t(this.a)}),e),0)}function G(e,t,r){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=r}M.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),function e(t){var r,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(r=n===t.f.serif&&i===t.f["sans-serif"])||(r=B()&&U(t,n,i)),r?s()-t.A>=t.w?B()&&U(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?j(t,t.v):j(t,t.B):function(t){setTimeout(a((function(){e(this)}),t),50)}(t):j(t,t.v)}(this)};var K=null;function H(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&p(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),_(e,"active")):C(e.a))}function W(e){this.j=e,this.a=new L,this.h=0,this.f=this.g=!0}function V(e,t,r,n,i){var o=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=i||null,s=n||{};if(0===r.length&&o)C(t.a);else{t.f+=r.length,o&&(t.j=o);var l,c=[];for(l=0;l<r.length;l++){var u=r[l],d=s[u.c],h=t.a,f=u;if(h.g&&p(h.f,[h.a.c("wf",f.c,w(f).toString(),"loading")]),_(h,"fontloading",f),h=null,null===K)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);K=f?42<parseInt(f[1],10):!g}else K=!1;h=K?new I(a(t.g,t),a(t.h,t),t.c,u,t.s,d):new M(a(t.g,t),a(t.h,t),t.c,u,t.s,e,d),c.push(h)}for(l=0;l<c.length;l++)c[l].start()}}),0)}function q(e,t){this.c=e,this.a=t}function z(e,t){this.c=e,this.a=t}function Y(e,t){this.c=e||$,this.a=[],this.f=[],this.g=t||""}G.prototype.g=function(e){var t=this.a;t.g&&p(t.f,[t.a.c("wf",e.c,w(e).toString(),"active")],[t.a.c("wf",e.c,w(e).toString(),"loading"),t.a.c("wf",e.c,w(e).toString(),"inactive")]),_(t,"fontactive",e),this.m=!0,H(this)},G.prototype.h=function(e){var t=this.a;if(t.g){var r=f(t.f,t.a.c("wf",e.c,w(e).toString(),"active")),n=[],i=[t.a.c("wf",e.c,w(e).toString(),"loading")];r||n.push(t.a.c("wf",e.c,w(e).toString(),"inactive")),p(t.f,n,i)}_(t,"fontinactive",e),H(this)},W.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,r){var n=[],i=r.timeout;!function(e){e.g&&p(e.f,[e.a.c("wf","loading")]),_(e,"loading")}(t),n=function(e,t,r){var n,i=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&i.push(o(t[n],r))}return i}(e.a,r,e.c);var o=new G(e.c,t,i);for(e.h=n.length,t=0,r=n.length;t<r;t++)n[t].load((function(t,r,n){V(e,o,t,r,n)}))}(this,new x(this.c,e),e)},q.prototype.load=function(e){var t=this,r=t.a.projectId,n=t.a.version;if(r){var i=t.c.o;y(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(n?"?v="+n:""),(function(n){n?e([]):(i["__MonotypeConfiguration__"+r]=function(){return t.a},function t(){if(i["__mti_fntLst"+r]){var n,o=i["__mti_fntLst"+r](),a=[];if(o)for(var s=0;s<o.length;s++){var l=o[s].fontfamily;null!=o[s].fontStyle&&null!=o[s].fontWeight?(n=o[s].fontStyle+o[s].fontWeight,a.push(new S(l,n))):a.push(new S(l))}e(a)}else setTimeout((function(){t()}),50)}())})).id="__MonotypeAPIScript__"+r}else e([])},z.prototype.load=function(e){var t,r,n=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new m;for(t=0,r=n.length;t<r;t++)g(this.c,n[t],v(a));var s=[];for(t=0,r=i.length;t<r;t++)if((n=i[t].split(":"))[1])for(var l=n[1].split(","),c=0;c<l.length;c+=1)s.push(new S(n[0],l[c]));else s.push(new S(n[0]));b(a,(function(){e(s,o)}))};var $="https://fonts.googleapis.com/css";function X(e){this.f=e,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"Ã§Ã¶Ã¼ÄÅ",cyrillic:"Ð¹ÑÐ",greek:"Î±Î²Î£",khmer:"ááá",Hanuman:"ááá"},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Z={i:"i",italic:"i",n:"n",normal:"n"},ee=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function te(e,t){this.c=e,this.a=t}var re={Arimo:!0,Cousine:!0,Tinos:!0};function ne(e,t){this.c=e,this.a=t}function ie(e,t){this.c=e,this.f=t,this.a=[]}te.prototype.load=function(e){var t=new m,r=this.c,n=new Y(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n].split(":");3==i.length&&e.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),e.a.push(i.join(o))}}(n,i);var o=new X(i);!function(e){for(var t=e.f.length,r=0;r<t;r++){var n=e.f[r].split(":"),i=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,l=(s=s.split(",")).length,c=0;c<l;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(d=ee.exec(u.toLowerCase())))u="";else{if(u=null==(u=d[2])||""==u?"n":Z[u],null==(d=d[1])||""==d)d="4";else var d=J[d]||(isNaN(d)?"4":d.substr(0,1));u=[u,d].join("")}else u="";u&&a.push(u)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=Q[n[0]])&&(e.c[i]=n))}for(e.c[i]||(n=Q[i])&&(e.c[i]=n),n=0;n<o.length;n+=1)e.a.push(new S(i,o[n]))}}(o),g(r,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,r=[],n=0;n<t;n++)r.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+r.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),v(t)),b(t,(function(){e(o.a,o.c,re)}))},ne.prototype.load=function(e){var t=this.a.id,r=this.c.o;t?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var n=[],i=0;i<t.length;i+=2)for(var o=t[i],a=t[i+1],s=0;s<a.length;s++)n.push(new S(o,a[s]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(n)}}),2e3):e([])},ie.prototype.load=function(e){var t=this.f.id,r=this.c.o,n=this;t?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[t]=function(t,r){for(var i=0,o=r.fonts.length;i<o;++i){var a=r.fonts[i];n.a.push(new S(a.name,A("font-weight:"+a.weight+";font-style:"+a.style)))}e(n.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var oe=new W(window);oe.a.c.custom=function(e,t){return new z(t,e)},oe.a.c.fontdeck=function(e,t){return new ie(t,e)},oe.a.c.monotype=function(e,t){return new q(t,e)},oe.a.c.typekit=function(e,t){return new ne(t,e)},oe.a.c.google=function(e,t){return new te(t,e)};var ae={load:a(oe.load,oe)};void 0===(n=function(){return ae}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kFilterTypeBlur=0]="kFilterTypeBlur",e[e.kFilterTypeNoise=1]="kFilterTypeNoise"}(t.FilterType||(t.FilterType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LINEAR=0]="LINEAR",e[e.RADIAL=1]="RADIAL"}(t.GradientType||(t.GradientType={}))},function(e,t){!function(e){"use strict";e.fn.imageScale=function(r){return this.each((function(){var n=this,i=e(this),o=i.data("imageScale"),a="IMG"===this.tagName?i:i.find("img");if(o)if("string"==typeof r)o[r]();else if("object"==typeof r){var s=r.method||"scale";o[s](!1,r)}else o.scale();else{var l=a[0].complete,c=e.extend({},e.fn.imageScale.defaults,"object"==typeof r&&r),u=function(){i.data("imageScale",o=new t(n,c)),o.scale(!0,c)};l?u.apply(i[0]):a.on("load",u).attr("src",a.attr("src"))}}))},e.fn.imageScale.defaults={scale:"best-fill",align:"center",parent:null,hideParentOverflow:!0,fadeInDuration:0,rescaleOnResize:!1,didScale:function(e,t){},logLevel:0};var t=function(t,r){var n=this;n.options=r,n.element=t;var i=n.$element=e(t),o=n.$img="IMG"===t.tagName?i:i.find("img"),a=n.img=o[0];n.src=o.attr("src"),n.imgWidth=a.naturalWidth||a.width,n.imgHeight=a.naturalHeight||a.height;var s=n.$parent=r.parent?r.parent:e(i.parent()[0]);n.parent=s[0],"static"===s.css("position")&&s.css("position","relative"),r.rescaleOnResize&&e(window).resize((function(e){n.scheduleScale()}))};e.fn.imageScale.Constructor=t,t.prototype={NONE:"none",FILL:"fill",BEST_FILL:"best-fill",BEST_FIT:"best-fit",BEST_FIT_DOWN_ONLY:"best-fit-down",ALIGN_LEFT:"left",ALIGN_RIGHT:"right",ALIGN_CENTER:"center",ALIGN_TOP:"top",ALIGN_BOTTOM:"bottom",ALIGN_TOP_LEFT:"top-left",ALIGN_TOP_RIGHT:"top-right",ALIGN_BOTTOM_LEFT:"bottom-left",ALIGN_BOTTOM_RIGHT:"bottom-right",constructor:t,element:null,options:null,scale:function(e,t){if(!this._isDestroyed&&!1!==this._canScale){var r=this,n=this.options,i=this.$parent,o=this.element,a=this.$element,s=(this.img,this.$img);if(e)n.hideParentOverflow&&i.css({overflow:"hidden"});else if(this.src!==s.attr("src"))return this.destroy(),a.data("imageScale",null),void a.imageScale(n);if(this._didScheduleScale=!1,!n.rescaleOnResize||t||this._needUpdate(this.parent)){var l=(t=t||{}).transition;l&&(this._canScale=!1,a.css("transition","all "+l+"ms"),setTimeout((function(){r._canScale=null,a.css("transition","null")}),l));var c=t.destWidth?t.destWidth:i.outerWidth(),u=t.destHeight?t.destHeight:i.outerHeight(),d=c-(t.destWidth?t.destWidth:i.innerWidth()),h=u-(t.destHeight?t.destHeight:i.innerHeight()),p=a.attr("data-scale"),f=a.attr("data-align"),g=p||n.scale,y=f||n.align,m=n.fadeInDuration;if(g){this._cacheDestWidth===c&&this._cacheDestHeight===u&&n.logLevel>2&&console.log("imageScale - DEBUG NOTICE: The parent size hasn't changed: dest width: '"+c+"' - dest height: '"+u+"'.",o);var v=this.imgWidth,b=this.imgHeight;if(c&&u&&v&&b){this._cacheDestWidth=c,this._cacheDestHeight=u;var T=this._innerFrameForSize(g,y,v,b,c,u);d&&(T.x-=d/2),h&&(T.y-=h/2),a.css({position:"absolute",top:T.y+"px",left:T.x+"px",width:T.width+"px",height:T.height+"px","max-width":"none"}),e&&m&&(a.css({display:"none"}),a.fadeIn(m)),n.didScale.call(this,e,t)}else n.logLevel>0&&console.error("imageScale - DEBUG ERROR: The dimensions are incorrect: source width: '"+v+"' - source height: '"+b+"' - dest width: '"+c+"' - dest height: '"+u+"'.",o)}else n.logLevel>2&&console.log("imageScale - DEBUG NOTICE: The scale property is null.",o)}}},destroy:function(){this._isDestroyed=!0,this.$element.removeData("imageScale")},_innerFrameForSize:function(e,t,r,n,i,o){var a,s,l;if(l={x:0,y:0,width:i,height:o},e===this.FILL)return l;switch(a=i/r,s=o/n,e){case this.BEST_FIT_DOWN_ONLY:e!==this.BEST_FIT_DOWN_ONLY&&this.options.logLevel>1&&console.warn("imageScale - DEBUG WARNING: The scale '"+e+"' was not understood."),e=r>i||n>o?a<s?a:s:1;break;case this.BEST_FIT:e=a<s?a:s;break;case this.NONE:e=1;break;default:e=a>s?a:s}switch(r*=e,n*=e,l.width=Math.round(r),l.height=Math.round(n),t){case this.ALIGN_LEFT:l.x=0,l.y=o/2-n/2;break;case this.ALIGN_RIGHT:l.x=i-r,l.y=o/2-n/2;break;case this.ALIGN_TOP:l.x=i/2-r/2,l.y=0;break;case this.ALIGN_BOTTOM:l.x=i/2-r/2,l.y=o-n;break;case this.ALIGN_TOP_LEFT:l.x=0,l.y=0;break;case this.ALIGN_TOP_RIGHT:l.x=i-r,l.y=0;break;case this.ALIGN_BOTTOM_LEFT:l.x=0,l.y=o-n;break;case this.ALIGN_BOTTOM_RIGHT:l.x=i-r,l.y=o-n;break;default:t!==this.ALIGN_CENTER&&this.options.logLevel>1&&console.warn("imageScale - DEBUG WARNING: The align '"+t+"' was not understood."),l.x=i/2-r/2,l.y=o/2-n/2}return l},_needUpdate:function(e){var t=e.clientHeight+" "+e.clientWidth;return this._lastParentSize!==t&&(this._lastParentSize=t,!0)},scheduleScale:function(){if(!this._didScheduleScale)if(window.requestAnimationFrame){var e=this;this._didScheduleScale=!0,requestAnimationFrame((function(){setTimeout((function(){e.scale()}),0)}))}else this.scale()}}}(window.jQuery)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(92),i=r(38);class o{constructor(e,t,r){this.generate=!1,this.z1=0,this.gaussianNoise=()=>{if(this.generate){let e=0,t=0;do{e=i.SoftRandom.random(),t=i.SoftRandom.random()}while(0===e);const r=Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t);return this.z1=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*t),this.generate=!1,r}return this.generate=!0,this.z1},this.uniformNoise=()=>Math.sqrt(3)*(2*i.SoftRandom.random()-1),this.useColor=void 0===e?o.DEFAULT_USE_COLOR:e,this.kind=t||o.DEFAULT_KIND,this.sigma=r||o.DEFAULT_SIGMGA}addNoise(e){i.SoftRandom.seed(o.RANDOM_SEED);const t=this.kind===n.NoiseFilterKind.kFilterNoiseKindGaussian?this.gaussianNoise:this.uniformNoise,r=e.data;for(let e=0,n=r.length;e<n;e+=4){let n=t()*this.sigma;r[e]=r[e]+n,this.useColor&&(n=t()*this.sigma),r[e+1]=r[e+1]+n,this.useColor&&(n=t()*this.sigma),r[e+2]=r[e+2]+n}return e}}o.DEFAULT_USE_COLOR=!1,o.DEFAULT_KIND=n.NoiseFilterKind.kFilterNoiseKindGaussian,o.DEFAULT_SIGMGA=10,o.RANDOM_SEED=42,t.Noise=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kFilterNoiseKindUniform=0]="kFilterNoiseKindUniform",e[e.kFilterNoiseKindGaussian=1]="kFilterNoiseKindGaussian"}(t.NoiseFilterKind||(t.NoiseFilterKind={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.radius=e}apply(e){const t=e.data,r=e.width,n=e.height,i=new Uint8ClampedArray(t.length);return this.gaussBlur(t,i,r,n,this.radius),e}boxesForGauss(e,t){let r=Math.floor(Math.sqrt(12*e*e/t+1));const n=(12*e*e-t*(r=r%2==0?r-1:r)*r-4*t*r-3*t)/(-4*r-4),i=[];for(let e=0;e<t;e++)i.push(e<Math.round(n)?r:r+2);return i}gaussBlur(e,t,r,i,o){if(o<=0)return;const a=this.boxesForGauss(o/2,n.BOX_BLUR_ITERATIONS);for(let o=0;o<n.BOX_BLUR_ITERATIONS;o++)this.boxBlur(e,t,r,i,a[o]),this.boxBlur(t,e,i,r,a[o])}boxBlur(e,t,r,i,o){const a=2*o+1;for(let s=0,l=0;s<i;s++,l+=r){let c,u,d,h,p,f,g=0,y=0,m=0,v=0;for(let t=-o;t<=o;t++){const n=l+Math.max(0,Math.min(t,r-1));g+=e[4*n],y+=e[4*n+1],m+=e[4*n+2],v+=e[4*n+3]}for(let b=0;b<r;b++){c=g/a,u=y/a,d=m/a,h=v/a,t[4*(b*i+s)]=Math.min(c,n.CHANNEL_MAX),t[4*(b*i+s)+1]=Math.min(u,n.CHANNEL_MAX),t[4*(b*i+s)+2]=Math.min(d,n.CHANNEL_MAX),t[4*(b*i+s)+3]=Math.min(h,n.CHANNEL_MAX);const T=l+(p=Math.min(b+o+1,r-1));g+=e[4*T],y+=e[4*T+1],m+=e[4*T+2],v+=e[4*T+3];const P=l+(f=Math.max(0,b-o));g-=e[4*P],y-=e[4*P+1],m-=e[4*P+2],v-=e[4*P+3]}}}}n.CHANNEL_MAX=255,n.BOX_BLUR_ITERATIONS=3,t.Blur=n},function(e,t,r){var n,i,o,a;
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */a=function(e){"use strict";function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=c),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each((function(){var n=e(this),i=n.data(x);i||(i=new r(this,t),n.data(x,i))}))}function r(t,r){function C(t){if(!(!0===Se.data(x+"_intouch")||e(t.target).closest(r.excludedElements,Se).length>0)){var s=t.originalEvent?t.originalEvent:t;if(!s.pointerType||"mouse"!=s.pointerType||0!=r.fallbackToMouseEvents){var l,c=s.touches,u=c?c[0]:s;return ke=T,c?we=c.length:!1!==r.preventDefaultEvents&&t.preventDefault(),he=0,pe=null,fe=null,Te=null,ge=0,ye=0,me=0,ve=1,be=0,(d={})[n]=te(n),d[i]=te(i),d[o]=te(o),d[a]=te(a),Pe=d,$(),J(0,u),!c||we===r.fingers||r.fingers===v||G()?(Ae=oe(),2==we&&(J(1,c[1]),ye=me=ne(Ee[0].start,Ee[1].start)),(r.swipeStatus||r.pinchStatus)&&(l=M(s,ke))):l=!1,!1===l?(M(s,ke=k),l):(r.hold&&(Oe=setTimeout(e.proxy((function(){Se.trigger("hold",[s.target]),r.hold&&(l=r.hold.call(Se,s,s.target))}),this),r.longTapThreshold)),Q(!0),null)}}var d}function _(t){var d,h,p,f,g=t.originalEvent?t.originalEvent:t;if(ke!==S&&ke!==k&&!X()){var b,T=g.touches,w=Z(T?T[0]:g);if(xe=oe(),T&&(we=T.length),r.hold&&clearTimeout(Oe),ke=P,2==we&&(0==ye?(J(1,T[1]),ye=me=ne(Ee[0].start,Ee[1].start)):(Z(T[1]),me=ne(Ee[0].end,Ee[1].end),Ee[0].end,Ee[1].end,Te=1>ve?l:s),ve=(me/ye*1).toFixed(2),be=Math.abs(ye-me)),we===r.fingers||r.fingers===v||!T||G()){if(pe=ie(w.start,w.end),function(e,t){if(!1!==r.preventDefaultEvents)if(r.allowPageScroll===c)e.preventDefault();else{var s=r.allowPageScroll===u;switch(t){case n:(r.swipeLeft&&s||!s&&r.allowPageScroll!=y)&&e.preventDefault();break;case i:(r.swipeRight&&s||!s&&r.allowPageScroll!=y)&&e.preventDefault();break;case o:(r.swipeUp&&s||!s&&r.allowPageScroll!=m)&&e.preventDefault();break;case a:(r.swipeDown&&s||!s&&r.allowPageScroll!=m)&&e.preventDefault()}}}(t,fe=ie(w.last,w.end)),p=w.start,f=w.end,he=Math.round(Math.sqrt(Math.pow(f.x-p.x,2)+Math.pow(f.y-p.y,2))),ge=re(),function(e,t){e!=c&&(t=Math.max(t,ee(e)),Pe[e].distance=t)}(pe,he),b=M(g,ke),!r.triggerOnTouchEnd||r.triggerOnTouchLeave){var E=!0;if(r.triggerOnTouchLeave){var A={left:(h=(d=e(d=this)).offset()).left,right:h.left+d.outerWidth(),top:h.top,bottom:h.top+d.outerHeight()};E=function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}(w.end,A)}!r.triggerOnTouchEnd&&E?ke=I(P):r.triggerOnTouchLeave&&!E&&(ke=I(S)),ke!=k&&ke!=S||M(g,ke)}}else M(g,ke=k);!1===b&&M(g,ke=k)}}function L(e){var t=e.originalEvent?e.originalEvent:e,n=t.touches;if(n){if(n.length&&!X())return function(e){Ce=oe(),_e=e.touches.length+1}(t),!0;if(n.length&&X())return!0}return X()&&(we=_e),xe=oe(),ge=re(),B()||!N()?M(t,ke=k):r.triggerOnTouchEnd||!1===r.triggerOnTouchEnd&&ke===P?(!1!==r.preventDefaultEvents&&!1!==e.cancelable&&e.preventDefault(),M(t,ke=S)):!r.triggerOnTouchEnd&&q()?F(t,ke=S,p):ke===P&&M(t,ke=k),Q(!1),null}function R(){we=0,xe=0,Ae=0,ye=0,me=0,ve=1,$(),Q(!1)}function O(e){var t=e.originalEvent?e.originalEvent:e;r.triggerOnTouchLeave&&M(t,ke=I(S))}function D(){Se.off(se,C),Se.off(de,R),Se.off(le,_),Se.off(ce,L),ue&&Se.off(ue,O),Q(!1)}function I(e){var t=e,n=U(),i=N(),o=B();return!n||o?t=k:!i||e!=P||r.triggerOnTouchEnd&&!r.triggerOnTouchLeave?!i&&e==S&&r.triggerOnTouchLeave&&(t=k):t=S,t}function M(e,t){var n,i=e.touches;return(!(!K()||!H())||H())&&(n=F(e,t,d)),(!(!j()||!G())||G())&&!1!==n&&(n=F(e,t,h)),Y()&&z()&&!1!==n?n=F(e,t,f):ge>r.longTapThreshold&&b>he&&r.longTap&&!1!==n?n=F(e,t,g):!(1!==we&&w||!(isNaN(he)||he<r.threshold)||!q())&&!1!==n&&(n=F(e,t,p)),t===k&&R(),t===S&&(i&&i.length||R()),n}function F(t,c,u){var y;if(u==d){if(Se.trigger("swipeStatus",[c,pe||null,he||0,ge||0,we,Ee,fe]),r.swipeStatus&&!1===(y=r.swipeStatus.call(Se,t,c,pe||null,he||0,ge||0,we,Ee,fe)))return!1;if(c==S&&K()){if(clearTimeout(Re),clearTimeout(Oe),Se.trigger("swipe",[pe,he,ge,we,Ee,fe]),r.swipe&&!1===(y=r.swipe.call(Se,t,pe,he,ge,we,Ee,fe)))return!1;switch(pe){case n:Se.trigger("swipeLeft",[pe,he,ge,we,Ee,fe]),r.swipeLeft&&(y=r.swipeLeft.call(Se,t,pe,he,ge,we,Ee,fe));break;case i:Se.trigger("swipeRight",[pe,he,ge,we,Ee,fe]),r.swipeRight&&(y=r.swipeRight.call(Se,t,pe,he,ge,we,Ee,fe));break;case o:Se.trigger("swipeUp",[pe,he,ge,we,Ee,fe]),r.swipeUp&&(y=r.swipeUp.call(Se,t,pe,he,ge,we,Ee,fe));break;case a:Se.trigger("swipeDown",[pe,he,ge,we,Ee,fe]),r.swipeDown&&(y=r.swipeDown.call(Se,t,pe,he,ge,we,Ee,fe))}}}if(u==h){if(Se.trigger("pinchStatus",[c,Te||null,be||0,ge||0,we,ve,Ee]),r.pinchStatus&&!1===(y=r.pinchStatus.call(Se,t,c,Te||null,be||0,ge||0,we,ve,Ee)))return!1;if(c==S&&j())switch(Te){case s:Se.trigger("pinchIn",[Te||null,be||0,ge||0,we,ve,Ee]),r.pinchIn&&(y=r.pinchIn.call(Se,t,Te||null,be||0,ge||0,we,ve,Ee));break;case l:Se.trigger("pinchOut",[Te||null,be||0,ge||0,we,ve,Ee]),r.pinchOut&&(y=r.pinchOut.call(Se,t,Te||null,be||0,ge||0,we,ve,Ee))}}return u==p?c!==k&&c!==S||(clearTimeout(Re),clearTimeout(Oe),z()&&!Y()?(Le=oe(),Re=setTimeout(e.proxy((function(){Le=null,Se.trigger("tap",[t.target]),r.tap&&(y=r.tap.call(Se,t,t.target))}),this),r.doubleTapThreshold)):(Le=null,Se.trigger("tap",[t.target]),r.tap&&(y=r.tap.call(Se,t,t.target)))):u==f?c!==k&&c!==S||(clearTimeout(Re),clearTimeout(Oe),Le=null,Se.trigger("doubletap",[t.target]),r.doubleTap&&(y=r.doubleTap.call(Se,t,t.target))):u==g&&(c!==k&&c!==S||(clearTimeout(Re),Le=null,Se.trigger("longtap",[t.target]),r.longTap&&(y=r.longTap.call(Se,t,t.target)))),y}function N(){var e=!0;return null!==r.threshold&&(e=he>=r.threshold),e}function B(){var e=!1;return null!==r.cancelThreshold&&null!==pe&&(e=ee(pe)-he>=r.cancelThreshold),e}function U(){return!(r.maxTimeThreshold&&ge>=r.maxTimeThreshold)}function j(){var e=W(),t=V(),n=null===r.pinchThreshold||be>=r.pinchThreshold;return e&&t&&n}function G(){return!!(r.pinchStatus||r.pinchIn||r.pinchOut)}function K(){var e=U(),t=N(),r=W(),n=V();return!B()&&n&&r&&t&&e}function H(){return!!(r.swipe||r.swipeStatus||r.swipeLeft||r.swipeRight||r.swipeUp||r.swipeDown)}function W(){return we===r.fingers||r.fingers===v||!w}function V(){return 0!==Ee[0].end.x}function q(){return!!r.tap}function z(){return!!r.doubleTap}function Y(){if(null==Le)return!1;var e=oe();return z()&&e-Le<=r.doubleTapThreshold}function $(){Ce=0,_e=0}function X(){var e=!1;return Ce&&oe()-Ce<=r.fingerReleaseThreshold&&(e=!0),e}function Q(e){Se&&(!0===e?(Se.on(le,_),Se.on(ce,L),ue&&Se.on(ue,O)):(Se.off(le,_,!1),Se.off(ce,L,!1),ue&&Se.off(ue,O,!1)),Se.data(x+"_intouch",!0===e))}function J(e,t){var r={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return r.start.x=r.last.x=r.end.x=t.pageX||t.clientX,r.start.y=r.last.y=r.end.y=t.pageY||t.clientY,Ee[e]=r,r}function Z(e){var t=void 0!==e.identifier?e.identifier:0,r=function(e){return Ee[e]||null}(t);return null===r&&(r=J(t,e)),r.last.x=r.end.x,r.last.y=r.end.y,r.end.x=e.pageX||e.clientX,r.end.y=e.pageY||e.clientY,r}function ee(e){return Pe[e]?Pe[e].distance:void 0}function te(e){return{direction:e,distance:0}}function re(){return xe-Ae}function ne(e,t){var r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.round(Math.sqrt(r*r+n*n))}function ie(e,t){if(s=t,(r=e).x==s.x&&r.y==s.y)return c;var r,s,l=function(e,t){var r=e.x-t.x,n=t.y-e.y,i=Math.atan2(n,r),o=Math.round(180*i/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}(e,t);return 45>=l&&l>=0?n:360>=l&&l>=315?n:l>=135&&225>=l?i:l>45&&135>l?a:o}function oe(){return(new Date).getTime()}r=e.extend({},r);var ae=w||A||!r.fallbackToMouseEvents,se=ae?A?E?"MSPointerDown":"pointerdown":"touchstart":"mousedown",le=ae?A?E?"MSPointerMove":"pointermove":"touchmove":"mousemove",ce=ae?A?E?"MSPointerUp":"pointerup":"touchend":"mouseup",ue=ae?A?"mouseleave":null:"mouseleave",de=A?E?"MSPointerCancel":"pointercancel":"touchcancel",he=0,pe=null,fe=null,ge=0,ye=0,me=0,ve=1,be=0,Te=0,Pe=null,Se=e(t),ke="start",we=0,Ee={},Ae=0,xe=0,Ce=0,_e=0,Le=0,Re=null,Oe=null;try{Se.on(se,C),Se.on(de,R)}catch(t){e.error("events not supported "+se+","+de+" on jQuery.swipe")}this.enable=function(){return this.disable(),Se.on(se,C),Se.on(de,R),Se},this.disable=function(){return D(),Se},this.destroy=function(){D(),Se.data(x,null),Se=null},this.option=function(t,n){if("object"==typeof t)r=e.extend(r,t);else if(void 0!==r[t]){if(void 0===n)return r[t];r[t]=n}else{if(!t)return r;e.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}var n="left",i="right",o="up",a="down",s="in",l="out",c="none",u="auto",d="swipe",h="pinch",p="tap",f="doubletap",g="longtap",y="horizontal",m="vertical",v="all",b=10,T="start",P="move",S="end",k="cancel",w="ontouchstart"in window,E=window.navigator.msPointerEnabled&&!window.PointerEvent&&!w,A=(window.PointerEvent||window.navigator.msPointerEnabled)&&!w,x="TouchSwipe";e.fn.swipe=function(r){var n=e(this),i=n.data(x);if(i&&"string"==typeof r){if(i[r])return i[r].apply(i,Array.prototype.slice.call(arguments,1));e.error("Method "+r+" does not exist on jQuery.swipe")}else if(i&&"object"==typeof r)i.option.apply(i,arguments);else if(!(i||"object"!=typeof r&&r))return t.apply(this,arguments);return n},e.fn.swipe.version="1.6.18",e.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},e.fn.swipe.phases={PHASE_START:T,PHASE_MOVE:P,PHASE_END:S,PHASE_CANCEL:k},e.fn.swipe.directions={LEFT:n,RIGHT:i,UP:o,DOWN:a,IN:s,OUT:l},e.fn.swipe.pageScroll={NONE:c,HORIZONTAL:y,VERTICAL:m,AUTO:u},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:v}},r(95).jQuery?(i=[r(1)],void 0===(o="function"==typeof(n=a)?n.apply(t,i):n)||(e.exports=o)):a(e.exports?r(1):jQuery)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){!function(t){"use strict";var r={selector:"",straightOnly:!1,straightOverlapThreshold:.5,rememberSource:!1,disabled:!1,defaultElement:"",enterTo:"",leaveFor:null,restrict:"self-first",tabIndexIgnoreList:"a, input, select, textarea, button, iframe, [contentEditable=true]",navigableFilter:null},n={37:"left",38:"up",39:"right",40:"down"},i={left:"right",up:"down",right:"left",down:"up"},o="sn:",a="section-",s=0,l=!1,c=!1,u={},d=0,h="",p="",f=!1,g=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||function(e){var t=(this.parentNode||this.document).querySelectorAll(e);return[].slice.call(t).indexOf(this)>=0};function y(e){var t=e.getBoundingClientRect(),r={left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height};return r.element=e,r.center={x:r.left+Math.floor(r.width/2),y:r.top+Math.floor(r.height/2)},r.center.left=r.center.right=r.center.x,r.center.top=r.center.bottom=r.center.y,r}function m(e,t,r){for(var n=[[],[],[],[],[],[],[],[],[]],i=0;i<e.length;i++){var o,a,s=e[i],l=s.center;if(o=l.x<t.left?0:l.x<=t.right?1:2,n[a=3*(l.y<t.top?0:l.y<=t.bottom?1:2)+o].push(s),-1!==[0,2,6,8].indexOf(a)){var c=r;s.left<=t.right-t.width*c&&(2===a?n[1].push(s):8===a&&n[7].push(s)),s.right>=t.left+t.width*c&&(0===a?n[1].push(s):6===a&&n[7].push(s)),s.top<=t.bottom-t.height*c&&(6===a?n[3].push(s):8===a&&n[5].push(s)),s.bottom>=t.top+t.height*c&&(0===a?n[3].push(s):2===a&&n[5].push(s))}}return n}function v(e,t,r,n){if(!(e&&t&&r&&r.length))return null;for(var i=[],o=0;o<r.length;o++){var a=y(r[o]);a&&i.push(a)}if(!i.length)return null;var s=y(e);if(!s)return null;var l,c=function(e){return{nearPlumbLineIsBetter:function(t){var r;return(r=t.center.x<e.center.x?e.center.x-t.right:t.left-e.center.x)<0?0:r},nearHorizonIsBetter:function(t){var r;return(r=t.center.y<e.center.y?e.center.y-t.bottom:t.top-e.center.y)<0?0:r},nearTargetLeftIsBetter:function(t){var r;return(r=t.center.x<e.center.x?e.left-t.right:t.left-e.left)<0?0:r},nearTargetTopIsBetter:function(t){var r;return(r=t.center.y<e.center.y?e.top-t.bottom:t.top-e.top)<0?0:r},topIsBetter:function(e){return e.top},bottomIsBetter:function(e){return-1*e.bottom},leftIsBetter:function(e){return e.left},rightIsBetter:function(e){return-1*e.right}}}(s),u=m(i,s,n.straightOverlapThreshold),d=m(u[4],s.center,n.straightOverlapThreshold);switch(t){case"left":l=[{group:d[0].concat(d[3]).concat(d[6]),distance:[c.nearPlumbLineIsBetter,c.topIsBetter]},{group:u[3],distance:[c.nearPlumbLineIsBetter,c.topIsBetter]},{group:u[0].concat(u[6]),distance:[c.nearHorizonIsBetter,c.rightIsBetter,c.nearTargetTopIsBetter]}];break;case"right":l=[{group:d[2].concat(d[5]).concat(d[8]),distance:[c.nearPlumbLineIsBetter,c.topIsBetter]},{group:u[5],distance:[c.nearPlumbLineIsBetter,c.topIsBetter]},{group:u[2].concat(u[8]),distance:[c.nearHorizonIsBetter,c.leftIsBetter,c.nearTargetTopIsBetter]}];break;case"up":l=[{group:d[0].concat(d[1]).concat(d[2]),distance:[c.nearHorizonIsBetter,c.leftIsBetter]},{group:u[1],distance:[c.nearHorizonIsBetter,c.leftIsBetter]},{group:u[0].concat(u[2]),distance:[c.nearPlumbLineIsBetter,c.bottomIsBetter,c.nearTargetLeftIsBetter]}];break;case"down":l=[{group:d[6].concat(d[7]).concat(d[8]),distance:[c.nearHorizonIsBetter,c.leftIsBetter]},{group:u[7],distance:[c.nearHorizonIsBetter,c.leftIsBetter]},{group:u[6].concat(u[8]),distance:[c.nearPlumbLineIsBetter,c.topIsBetter,c.nearTargetLeftIsBetter]}];break;default:return null}n.straightOnly&&l.pop();var h=function(e){for(var t=null,r=0;r<e.length;r++)if(e[r].group.length){t=e[r];break}if(!t)return null;var n=t.distance;return t.group.sort((function(e,t){for(var r=0;r<n.length;r++){var i=n[r],o=i(e)-i(t);if(o)return o}return 0})),t.group}(l);if(!h)return null;var p=null;if(n.rememberSource&&n.previous&&n.previous.destination===e&&n.previous.reverse===t)for(var f=0;f<h.length;f++)if(h[f].element===n.previous.target){p=h[f].element;break}return p||(p=h[0].element),p}function b(){for(var e;e=a+String(++s),u[e];);return e}function T(e){return t?t(e).get():"string"==typeof e?[].slice.call(document.querySelectorAll(e)):"object"==typeof e&&e.length?[].slice.call(e):"object"==typeof e&&1===e.nodeType?[e]:[]}function P(e,r){return t?t(e).is(r):"string"==typeof r?g.call(e,r):"object"==typeof r&&r.length?r.indexOf(e)>=0:"object"==typeof r&&1===r.nodeType&&e===r}function S(){var e=document.activeElement;if(e&&e!==document.body)return e}function k(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&void 0!==arguments[t][r]&&(e[r]=arguments[t][r]);return e}function w(e,t){Array.isArray(t)||(t=[t]);for(var r,n=0;n<t.length;n++)(r=e.indexOf(t[n]))>=0&&e.splice(r,1);return e}function E(e,t,n){if(!e||!t||!u[t]||u[t].disabled)return!1;if(e.offsetWidth<=0&&e.offsetHeight<=0||e.hasAttribute("disabled"))return!1;if(n&&!P(e,u[t].selector))return!1;if("function"==typeof u[t].navigableFilter){if(!1===u[t].navigableFilter(e,t))return!1}else if("function"==typeof r.navigableFilter&&!1===r.navigableFilter(e,t))return!1;return!0}function A(e){for(var t in u)if(!u[t].disabled&&P(e,u[t].selector))return t}function x(e){return T(u[e].selector).filter((function(t){return E(t,e)}))}function C(e){var r=u[e].defaultElement;return r?("string"==typeof r?r=T(r)[0]:t&&r instanceof t&&(r=r.get(0)),E(r,e,!0)?r:null):null}function _(e){var t=u[e].lastFocusedElement;return E(t,e,!0)?t:null}function L(e,t,r,n){arguments.length<4&&(n=!0);var i=document.createEvent("CustomEvent");return i.initCustomEvent(o+t,!0,n,r),e.dispatchEvent(i)}function R(e,t,r){if(!e)return!1;var n=S(),i=function(){n&&n.blur(),e.focus(),O(e,t)};if(f)return i(),!0;if(f=!0,c)return i(),f=!1,!0;if(n){var o={nextElement:e,nextSectionId:t,direction:r,native:!1};if(!L(n,"willunfocus",o))return f=!1,!1;n.blur(),L(n,"unfocused",o,!1)}var a={previousElement:n,sectionId:t,direction:r,native:!1};return L(e,"willfocus",a)?(e.focus(),L(e,"focused",a,!1),f=!1,O(e,t),!0):(f=!1,!1)}function O(e,t){t||(t=A(e)),t&&(u[t].lastFocusedElement=e,p=t)}function D(e,t){if("@"==e.charAt(0))return 1==e.length?I():I(e.substr(1));var r=T(e)[0];if(r){var n=A(r);if(E(r,n))return R(r,n,t)}return!1}function I(e){var t=[],r=function(e){e&&t.indexOf(e)<0&&u[e]&&!u[e].disabled&&t.push(e)};e?r(e):(r(h),r(p),Object.keys(u).map(r));for(var n=0;n<t.length;n++){var i,o=t[n];if(i="last-focused"==u[o].enterTo?_(o)||C(o)||x(o)[0]:C(o)||_(o)||x(o)[0])return R(i,o)}return!1}function M(e,t){L(e,"navigatefailed",{direction:t},!1)}function F(e,r){if(u[e].leaveFor&&void 0!==u[e].leaveFor[r]){var n=u[e].leaveFor[r];if("string"==typeof n)return""===n?null:D(n,r);t&&n instanceof t&&(n=n.get(0));var i=A(n);if(E(n,i))return R(n,i,r)}return!1}function N(e,t,n){var o=t.getAttribute("data-sn-"+e);if("string"==typeof o)return!(""===o||!D(o,e))||(M(t,e),!1);var a={},s=[];for(var l in u)a[l]=x(l),s=s.concat(a[l]);var c,d=k({},r,u[n]);if("self-only"==d.restrict||"self-first"==d.restrict){var h=a[n];(c=v(t,e,w(h,t),d))||"self-first"!=d.restrict||(c=v(t,e,w(s,h),d))}else c=v(t,e,w(s,t),d);if(c){u[n].previous={target:t,destination:c,reverse:i[e]};var p=A(c);if(n!=p){var f,g=F(n,e);if(g)return!0;if(null===g)return M(t,e),!1;switch(u[p].enterTo){case"last-focused":f=_(p)||C(p);break;case"default-element":f=C(p)}f&&(c=f)}return R(c,p,e)}return!!F(n,e)||(M(t,e),!1)}function B(e){if(!(!d||c||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var t,r=function(){return e.preventDefault(),e.stopPropagation(),!1},i=n[e.keyCode];if(!i)return 13==e.keyCode&&(t=S())&&A(t)&&!L(t,"enter-down")?r():void 0;if(!(t=S())&&(p&&(t=_(p)),!t))return I(),r();var o=A(t);if(o)return L(t,"willmove",{direction:i,sectionId:o,cause:"keydown"})&&N(i,t,o),r()}}function U(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&!c&&d&&13==e.keyCode){var t=S();t&&A(t)&&(L(t,"enter-up")||(e.preventDefault(),e.stopPropagation()))}}function j(e){var t=e.target;if(t!==window&&t!==document&&d&&!f){var r=A(t);if(r){if(c)return void O(t,r);var n={sectionId:r,native:!0};L(t,"willfocus",n)?(L(t,"focused",n,!1),O(t,r)):(f=!0,t.blur(),f=!1)}}}function G(e){var t=e.target;if(t!==window&&t!==document&&!c&&d&&!f&&A(t)){var r={native:!0};L(t,"willunfocus",r)?L(t,"unfocused",r,!1):(f=!0,setTimeout((function(){t.focus(),f=!1})))}}var K={init:function(){l||(window.addEventListener("keydown",B),window.addEventListener("keyup",U),window.addEventListener("focus",j,!0),window.addEventListener("blur",G,!0),l=!0)},uninit:function(){window.removeEventListener("blur",G,!0),window.removeEventListener("focus",j,!0),window.removeEventListener("keyup",U),window.removeEventListener("keydown",B),K.clear(),s=0,l=!1},clear:function(){u={},d=0,h="",p="",f=!1},set:function(){var e,t;if("object"==typeof arguments[0])t=arguments[0];else{if("string"!=typeof arguments[0]||"object"!=typeof arguments[1])return;if(e=arguments[0],t=arguments[1],!u[e])throw new Error('Section "'+e+"\" doesn't exist!")}for(var n in t)void 0!==r[n]&&(e?u[e][n]=t[n]:void 0!==t[n]&&(r[n]=t[n]));e&&(u[e]=k({},u[e]))},add:function(){var e,t={};if("object"==typeof arguments[0]?t=arguments[0]:"string"==typeof arguments[0]&&"object"==typeof arguments[1]&&(e=arguments[0],t=arguments[1]),e||(e="string"==typeof t.id?t.id:b()),u[e])throw new Error('Section "'+e+'" has already existed!');return u[e]={},d++,K.set(e,t),e},remove:function(e){if(!e||"string"!=typeof e)throw new Error('Please assign the "sectionId"!');return!!u[e]&&(u[e]=void 0,u=k({},u),d--,p===e&&(p=""),!0)},disable:function(e){return!!u[e]&&(u[e].disabled=!0,!0)},enable:function(e){return!!u[e]&&(u[e].disabled=!1,!0)},pause:function(){c=!0},resume:function(){c=!1},focus:function(e,r){var n=!1;void 0===r&&"boolean"==typeof e&&(r=e,e=void 0);var i=!c&&r;if(i&&K.pause(),e)if("string"==typeof e)n=u[e]?I(e):D(e);else{t&&e instanceof t&&(e=e.get(0));var o=A(e);E(e,o)&&(n=R(e,o))}else n=I();return i&&K.resume(),n},move:function(e,t){if(e=e.toLowerCase(),!i[e])return!1;var r=t?T(t)[0]:S();if(!r)return!1;var n=A(r);return!!n&&!!L(r,"willmove",{direction:e,sectionId:n,cause:"api"})&&N(e,r,n)},makeFocusable:function(e){var t=function(e){var t=void 0!==e.tabIndexIgnoreList?e.tabIndexIgnoreList:r.tabIndexIgnoreList;T(e.selector).forEach((function(e){P(e,t)||e.getAttribute("tabindex")||e.setAttribute("tabindex","-1")}))};if(e){if(!u[e])throw new Error('Section "'+e+"\" doesn't exist!");t(u[e])}else for(var n in u)t(u[n])},setDefaultSection:function(e){if(e){if(!u[e])throw new Error('Section "'+e+"\" doesn't exist!");h=e}else h=""}};window.SpatialNavigation=K,e.exports=K,t&&(t.SpatialNavigation=function(){if(K.init(),arguments.length>0){if(t.isPlainObject(arguments[0]))return K.add(arguments[0]);if("string"===t.type(arguments[0])&&t.isFunction(K[arguments[0]]))return K[arguments[0]].apply(K,[].slice.call(arguments,1))}return t.extend({},K)},t.fn.SpatialNavigation=function(){var e;return(e=t.isPlainObject(arguments[0])?arguments[0]:{id:arguments[0]}).selector=this,K.init(),e.id&&K.remove(e.id),K.add(e),K.makeFocusable(e.id),this})}(window.jQuery)},function(e,t,r){"use strict";
/*!
 * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(6);(()=>{function e(e,r){const o=n(this),a=o.data("viewPagerActiveIndex"),s=o.data("viewPagerAnimationDelay"),l=o.data("viewPagerCallback"),c=o.children(),u=o.data("viewPagerId");if(e!==a){t(c[a]).forEach(e=>{i.SpatialNavigation.disable(e)});const d=i.SpatialNavigation.createSectionName(u,e.toString());n(c[a]).css({left:0,opacity:1}).animate({left:r?"-10%":"+10%",opacity:0},{duration:s,complete(){n(this).hide()}}),n(c[e]).css({left:r?"10%":"-10%",opacity:0}).show().animate({left:0,opacity:1},{duration:s,complete(){n(this).show(),o.data("viewPagerActiveIndex",e),t(c[e]).forEach(e=>{i.SpatialNavigation.enable(e)}),i.SpatialNavigation.focus(d),l&&l()}})}else i.SpatialNavigation.move(r?"right":"left")}function t(e){const t=new Set,r=Array.from(e.getElementsByClassName(i.FOCUSABLE_ELEMENT));return r.push(e),r.forEach(e=>{e.classList.remove(i.DEFAULT_SECTION),Array.from(e.classList).forEach(e=>{e.startsWith("section-")&&t.add(e)})}),Array.from(t)}n.fn.extend({ViewPager(e){return this.each((function(){let r,o=e.index||0;const a=e.wrap||!1,s=e.allowForwardsNav,l=e.allowBackwardsNav,c=e.animationDelay||0,u=n(this);o=Math.max(0,Math.min(o,u.children().length-1)),u.children().each((c,d)=>{const h=n("<div/>"),p=n(d),f=i.SpatialNavigation.createSectionName(e.id,c.toString());p.css({left:0,right:0}),d.addEventListener("sn:navigatefailed",e=>{const t=n(".ViewPager").getPageCount()-1,o=n(".ViewPager").getCurrentPage();e.stopPropagation(),"left"===e.detail.direction&&l&&(0!==o||a)?n(".ViewPager").showViewPageDelta(-1):"right"===e.detail.direction&&s&&(o!==t||a)?n(".ViewPager").showViewPageDelta(1):r!==e.detail.direction&&(r=e.detail.direction,i.SpatialNavigation.set(f,{restrict:i.SectionType.NONE}),i.SpatialNavigation.move(e.detail.direction),i.SpatialNavigation.set(f,{restrict:i.SectionType.SELF_ONLY}))});const g=d.getElementsByClassName(i.FOCUSABLE_ELEMENT);0===g.length?(i.SpatialNavigation.makeNavigable(d,f,e.focus,e.blur),d.addEventListener("sn:willunfocus",e=>{e.stopPropagation(),r=null})):Array.from(g).forEach(e=>{e.classList.remove(i.DEFAULT_SECTION),e.classList.add(f),e.addEventListener("sn:willunfocus",e=>{e.stopPropagation(),r=null})}),u.append(h),h.append(p),h.css({opacity:c===o?1:0,position:"absolute"}),i.SpatialNavigation.addSection(f,i.SectionType.SELF_ONLY),c!==o?(h.hide(),t(d).forEach(e=>{i.SpatialNavigation.disable(e)})):h.show()}),u.data({viewPagerId:e.id,viewPagePreviousPage:o,viewPagerActiveIndex:o,viewPagerAnimationDelay:c,viewPagerCallback:e.callback,viewPagerLastChangeTime:(new Date).getTime(),viewPagerWrap:a})}))},showViewPageDelta(t){if(Number.isInteger(t)&&0!==t)return this.each(()=>{const r=n(this).children().length;if(r>0){let i=n(this).data("viewPagerActiveIndex")+t;n(this).data("viewPagerWrap")?i=(i%r+r)%r:i<0?i=0:i>=r&&(i=r-1),n(this).data("viewPagerLastChangeTime",(new Date).getTime()),n(this).data("viewPagerPreviousPage",n(this).data("viewPagerActiveIndex")),e.call(this,i,t>0)}})},showViewPage(t){if(Number.isInteger(t))return this.each(()=>{const r=n(this).children().length;r>0&&(t<0&&(t=r+t),n(this).data("viewPagerLastChangeTime",(new Date).getTime()),n(this).data("viewPagerPreviousPage",n(this).data("viewPagerActiveIndex")),t=Math.max(0,Math.min(t,r-1)),e.call(this,t,n(this).data("viewPagerActiveIndex")<t))})},getPageCount(){return n(this).children().length},getCurrentPage(){return n(this).data("viewPagerActiveIndex")},stopAnimation(){const e=n(this),t=e.data("viewPagerAnimationDelay"),r=e.data("viewPagerLastChangeTime"),i=(new Date).getTime()-r;if(i<t/2){const t=e.data("viewPagerPreviousPage");e.children().each((function(e){n(this).stop(!0,!1),e===t?n(this).css({left:0,opacity:1}).show():n(this).hide()})),e.data("viewPagerActiveIndex",t)}else i<t&&e.children().each((function(){n(this).finish()}))}})})()},function(e,t,r){(function(t){var r="Expected a function",n=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,g=Math.min,y=function(){return h.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==i}(e))return n;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=s.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):a.test(e)?n:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(e,t,n){var i,o,a,s,l,c,u=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var r=i,n=o;return i=o=void 0,u=t,s=e.apply(n,r)}function T(e){var r=e-c;return void 0===c||r>=t||r<0||h&&e-u>=a}function P(){var e=y();if(T(e))return S(e);l=setTimeout(P,function(e){var r=t-(e-c);return h?g(r,a-(e-u)):r}(e))}function S(e){return l=void 0,p&&i?b(e):(i=o=void 0,s)}function k(){var e=y(),r=T(e);if(i=arguments,o=this,c=e,r){if(void 0===l)return function(e){return u=e,l=setTimeout(P,t),d?b(e):s}(c);if(h)return l=setTimeout(P,t),b(c)}return void 0===l&&(l=setTimeout(P,t)),s}return t=v(t)||0,m(n)&&(d=!!n.leading,a=(h="maxWait"in n)?f(v(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),k.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},k.flush=function(){return void 0===l?s:S(y())},k}(e,t,{leading:i,maxWait:t,trailing:o})}}).call(this,r(99))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(103),i=r(104),o=r(106);class a extends o.VideoPlayer{constructor(e){super(e),this.hlsPlayer=void 0}load(e,t){this.player.id=e;const r=i.extname(t);return r.includes("m3u8")||r.includes("hls")?this.playHls(t,!0):super.load(e,t)}play(e,t,r){this.player.id=e;const n=i.extname(t);return n.includes("m3u8")||n.includes("hls")?this.playHls(t,!1):super.play(e,t,r)}playHls(e,t){let r;return n.isSupported()&&(this.hlsPlayer=new n),void 0!==this.hlsPlayer?(this.hlsPlayer.loadSource(e),this.hlsPlayer.attachMedia(this.player),t||this.hlsPlayer.on(n.Events.MANIFEST_PARSED,()=>this.player.play()),r=Promise.resolve()):this.player.canPlayType("application/vnd.apple.mpegurl")?(this.player.src=e,t||this.player.addEventListener("loadedmetadata",()=>this.player.play()),r=Promise.resolve()):r=Promise.reject("The provided media format is not supported."),r}}t.HLSVideoPlayer=a},function(e,t,r){"undefined"!=typeof window&&(e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=24)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o,s=n.getSelfScope();t.enableLogs=function(e){if(!0===e||"object"==typeof e){!function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach((function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=function(e,t){return"["+e+"] > "+t}(e,r[0])),t.apply(s.console,r)}:i}(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6).getSelfScope().Number;t.Number=n,n.isFinite=n.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=r(1),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},function(e,t){e.exports=void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+o.path;c.path=a.normalizePath(d)}else c.path=s.path,o.params||(c.params=s.params,o.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(c)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,o,a,s,l=[];for(e.sort((function(e,t){return e.start-t.start||t.end-e.end})),s=0;s<e.length;s++){var c=l.length;if(c){var u=l[c-1].end;e[s].start-u<r?e[s].end>u&&(l[c-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,n=0,i=o=t;s<l.length;s++){var d=l[s].start,h=l[s].end;if(t+r>=d&&t<h)i=d,n=(o=h)-t;else if(t+r<d){a=d;break}}return{len:n,start:i,end:o,nextStart:a}},e}();t.BufferHelper=n},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(1);t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var a=function(r){function a(e){var t=r.call(this,e,o.default.BUFFER_APPENDED,o.default.FRAG_BUFFERED,o.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return n(a,r),a.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},a.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},a.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach((function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(a.body);break}}}}))},a.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},a.prototype.getBufferedTimes=function(e,t,r){for(var n,i,o=[],a=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),a=!0;else if(t<=n)break}return{time:o,partial:a}},a.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.prototype.getPartialFragment=function(e){var t,r,n,i=this,o=null,a=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(o=l.body,a=t)))})),o},a.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},a.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.prototype.isTimeBuffered=function(e,t,r){for(var n,i,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},a.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},a.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},a.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},a}(i.default);t.FragmentTracker=a}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:function(e,t){for(var r=0,n=e.length-1,i=null,o=null;r<=n;){var a=t(o=e[i=(r+n)/2|0]);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);)i+=10,i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i;if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var i=e._readSize(t,r+6),o=(r+=10)+i;r+8<o;){var a=e._getFrameData(t.subarray(r)),s=e._decodeFrame(a);s&&n.push(s),r+=a.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,o=e.length,a="",s=0;s<o;){if(0===(r=e[s++])&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],i=e[s++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return a},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(3),s=r(0),l=r(14),c=r(25),u=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},h={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},p=function(t){function r(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,t),Object.defineProperty(r,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return h},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==d.AUDIO_TRACK&&e!==d.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case d.AUDIO_TRACK:return h.AUDIO;case d.SUBTITLE_TRACK:return h.SUBTITLE;default:return h.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:d.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:d.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:d.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:d.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;s.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,i,o,a,l=this.getInternalLoader(t);if(l){var c=l.context;if(c&&c.url===e)return s.logger.trace("playlist request ongoing"),!1;s.logger.warn("aborting previous loader for type: "+t.type),l.abort()}switch(t.type){case d.MANIFEST:n=r.manifestLoadingMaxRetry,i=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,a=r.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:n=0,i=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,i=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,a=r.levelLoadingMaxRetryTimeout}l=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u={timeout:i,maxRetry:n,retryDelay:o,maxRetryDelay:a},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.logger.debug("Calling internal loader delegate for URL: "+e),l.load(t,u,h),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;t.tload=u.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,o){var a=this.hls,l=e.data,u=r.getResponseUrl(e,n),d=c.default.parseMasterPlaylist(l,u);if(d.length){var h=d.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=c.default.parseMasterPlaylistMedia(l,u,"AUDIO",h),f=c.default.parseMasterPlaylistMedia(l,u,"SUBTITLES");if(p.length){var g=!1;p.forEach((function(e){e.url||(g=!0)})),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(s.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}a.trigger(i.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:f,url:u,stats:t,networkDetails:o})}else this._handleManifestParsingError(e,n,"no level found in manifest",o)},r.prototype._handleTrackOrLevelPlaylist=function(t,n,o,a){var s=this.hls,l=o.id,h=o.level,p=o.type,f=r.getResponseUrl(t,o),g=e.isFinite(l)?l:0,y=e.isFinite(h)?h:g,m=r.mapContextToLevelType(o),v=c.default.parseLevelPlaylist(t.data,f,y,m,g);if(v.tload=n.tload,p===d.MANIFEST){var b={url:f,details:v};s.trigger(i.default.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:f,stats:n,networkDetails:a})}if(n.tparsed=u.now(),v.needSidxRanges){var T=v.initSegment.url;this.load(T,{isSidxRequest:!0,type:p,level:h,levelDetails:v,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else o.levelDetails=v,this._handlePlaylistLoaded(t,n,o,a)},r.prototype._handleSidxRequest=function(e,t){var r=l.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))})),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){var o,l;void 0===r&&(r=!1),void 0===n&&(n=null),s.logger.info("A network error occured while loading a "+e.type+"-type playlist");var c=this.getInternalLoader(e);switch(e.type){case d.MANIFEST:o=r?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,l=!0;break;case d.LEVEL:o=r?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,l=!1;break;case d.AUDIO_TRACK:o=r?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,l=!1;break;default:l=!1}c&&(c.abort(),this.resetInternalLoader(e.type));var u={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:l,url:c.url,loader:c,context:e,networkDetails:t};n&&(u.response=n),this.hls.trigger(i.default.ERROR,u)},r.prototype._handlePlaylistLoaded=function(e,t,n,o){var a=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(i.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:t,networkDetails:o});else switch(a){case d.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:o});break;case d.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:o})}else this._handleManifestParsingError(e,n,"invalid target duration",o)},r}(o.default);t.default=p}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,o,a,s,l,c=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!r.length)return null;for(n=s;n<o;)l=(i=e.readUint32(t,n))>1?n+i:o,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:l}):(a=e.findBox({data:t,start:n+8,end:l},r.slice(1))).length&&(c=c.concat(a))),n=l;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;r=[];var s=(a=a[0]).data[0];o=0===s?8:16;var l=e.readUint32(a,o);o+=4,o+=0===s?8:16,o+=2;var c=a.end+0,u=e.readUint16(a,o);o+=2;for(var d=0;d<u;d++){var h=o,p=e.readUint32(a,h);h+=4;var f=2147483647&p;if(1==(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(a,h);h+=4,r.push({referenceSize:f,subsegmentDuration:g,info:{duration:g/l,start:c,end:c+f-1}}),c+=f,o=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:u,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(o=l.data[l.start])?12:20;var c=e.readUint32(l,a),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var d={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=e.bin2str(h.data.subarray(h.start+12,h.start+16));n.logger.log("MP4Demuxer:"+d+":"+p+" found")}r[s]={timescale:c,type:d},r[d]={timescale:c,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,o;return i=e.readUint32(n,4),o=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0]/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}}))}))}))},e.prototype.append=function(t,r,n,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var c=e.getStartDTS(a,t);this.initPTS=l=c-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,t)},e.prototype.destroy=function(){},e}();t.default=a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(16),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new i.default).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=o}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var r=n[t];return!!r&&!0===r[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1),o=r(3),a=r(19),s=r(36),l=r(14),c=r(37),u=r(40),d=r(41),h=r(44),p=r(6),f=r(0),g=p.getSelfScope();try{n=g.performance.now.bind(g.performance)}catch(e){f.logger.debug("Unable to use Performance API on this environment"),n=g.Date.now}var y=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,o,s,l,c,u,d,h,p,f){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var y=this.decrypter;null==y&&(y=this.decrypter=new a.default(this.observer,this.config));var m=n();y.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=n();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,c,u,d,h,p,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,c,u,d,h,p,f)},e.prototype.pushDecrypted=function(e,t,r,n,a,p,f,g,y,m,v,b){var T=this.demuxer;if(!T||(f||g)&&!this.probe(e)){for(var P=this.observer,S=this.typeSupported,k=this.config,w=[{demux:c.default,remux:d.default},{demux:l.default,remux:h.default},{demux:s.default,remux:d.default},{demux:u.default,remux:d.default}],E=0,A=w.length;E<A;E++){var x=w[E],C=x.demux.probe;if(C(e)){var _=this.remuxer=new x.remux(P,k,S,this.vendor);T=new x.demux(P,_,k,S),this.probe=C;break}}if(!T)return void P.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=T}var L=this.remuxer;(f||g)&&(T.resetInitSegment(r,n,a,m),L.resetInitSegment()),f&&(T.resetTimeStamp(b),L.resetTimeStamp(b)),"function"==typeof T.setDecryptData&&T.setDecryptData(t),T.append(e,p,y,v)},e}();t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i=r(34),o=r(35),a=r(3),s=r(0),l=r(1),c=r(6).getSelfScope(),u=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=c.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new o.default),c.expandKey(t),a(c.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(u,t)),this.fastAesKey.expandKey().then((function(i){new n.default(u,r).decrypt(e,i).catch((function(n){l.onWebCryptoError(n,e,t,r,a)})).then((function(e){a(e)}))})).catch((function(n){l.onWebCryptoError(n,e,t,r,a)}))}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=r(1);function a(e,t,r,a){var s,l,c,u,d,h=navigator.userAgent.toLowerCase(),p=a,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>f.length-1))return u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+f[l]+"Hz],channelConfig:"+u),/firefox/i.test(h)?l>=6?(s=5,d=new Array(4),c=l-3):(s=2,d=new Array(2),c=l):-1!==h.indexOf("android")?(s=2,d=new Array(2),c=l):(s=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?c=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===u||/vivaldi/i.test(h))||!a&&1===u)&&(s=2,d=new Array(2)),c=l)),d[0]=s<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=u<<3,5===s&&(d[1]|=(14&c)>>1,d[2]=(1&c)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:f[l],channelCount:u,codec:"mp4a.40."+s,manifestCodec:p};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function u(e){return 9216e4/e}function d(e,t,r,n,i){var o,a,s=e.length;if(o=l(e,t),a=c(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:r+n*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=l,t.getFullFrameLength=c,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var r=l(e,t);t+5<e.length&&(r=c(e,t));var n=t+r;if(n===e.length||n+1<e.length&&s(e,n))return!0}return!1},t.initTrackConfig=function(e,t,r,i,o){if(!e.samplerate){var s=a(t,r,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=u,t.parseFrameHeader=d,t.appendFrame=function(e,t,r,n,i){var o=d(t,r,n,i,u(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,c={unit:t.subarray(r+s,r+s+l),pts:a,dts:a};return e.samples.push(c),e.len+=l,{sample:c,length:l+s}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=n+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(r,r+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var l=3===r?3-i:3===i?3:4,c=1e3*n.BitratesMap[14*l+o-1],u=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*u+a],h=e[t+3]>>6==3?1:2,p=n.SamplesCoefficients[r][i],f=n.BytesInSlot[i],g=8*p*f;return{sampleRate:d,channelCount:h,frameLength:parseInt(p*c/d+s,10)*f,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(r(45).EventEmitter);t.Observer=i},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(t,r,i){var o=t[r],a=t[i],s=a.startPTS;e.isFinite(s)?i>r?(o.duration=s-o.start,o.duration<0&&n.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>r?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,r,n,o,a,s){var l=n;if(e.isFinite(r.startPTS)){var c=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(c,r.deltaPTS):r.deltaPTS=c,l=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),o=Math.max(o,r.endPTS),a=Math.min(a,r.startDTS),s=Math.max(s,r.endDTS)}var u=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=l,r.endPTS=o,r.startDTS=a,r.endDTS=s,r.duration=o-n;var d,h,p,f=r.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(d=f-t.startSN,(h=t.fragments)[d]=r,p=d;p>0;p--)i(h,p,p-1);for(p=d;p<h.length-1;p++)i(h,p,p+1);return t.PTSKnown=!0,u}function a(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=n;a<=i;a++){var s=e.fragments[o+a],l=t.fragments[a];if(!s||!l)break;r(s,l,a)}}function s(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var o=0;o<i.length;o++)i[o].start+=n[r].start}t.addGroupId=function(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,r){r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment);var i,l=0;if(a(t,r,(function(t,n){l=t.cc-n.cc,e.isFinite(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,i=n),r.PTSKnown=!0})),r.PTSKnown){if(l){n.logger.log("discontinuity sliding from playlist, take drift into account");for(var c=r.fragments,u=0;u<c.length;u++)c[u].cc+=l}i?o(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):s(t,r),r.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,r){void 0===r&&(r=0);var n=-1;a(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var o=n+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration},t.mapFragmentIntersection=a,t.adjustSliding=s,t.computeReloadInterval=function(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}}).call(this,r(2).Number)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=r(3),a=r(13),s=r(28),l=r(29),c=r(9),u=r(30),d=r(54),h=r(55),p=r(57),f=r(0),g=r(58),y=r(1),m=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');f.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var p=n.abrController=new r.abrController(n),g=new r.bufferController(n),y=new r.capLevelController(n),m=new r.fpsController(n),v=new a.default(n),b=new s.default(n),T=new l.default(n),P=new h.default(n),S=n.levelController=new d.default(n),k=new c.FragmentTracker(n),w=[S,n.streamController=new u.default(n,k)],E=r.audioStreamController;E&&w.push(new E(n,k)),n.networkControllers=w;var A=[v,b,T,p,g,y,m,P,k];if(E=r.audioTrackController){var x=new E(n);n.audioTrackController=x,A.push(x)}if(E=r.subtitleTrackController){var C=new E(n);n.subtitleTrackController=C,w.push(C)}if(E=r.emeController){var _=new E(n);n.emeController=_,A.push(_)}return(E=r.subtitleStreamController)&&w.push(new E(n,k)),(E=r.timelineController)&&A.push(new E(n)),n.coreComponents=A,n}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return p.isSupported()},Object.defineProperty(t,"Events",{get:function(){return y.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return o.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return o.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:g.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){f.logger.log("destroy"),this.trigger(y.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){f.logger.log("attachMedia"),this.media=e,this.trigger(y.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){f.logger.log("detachMedia"),this.trigger(y.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=i.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),f.logger.log("loadSource:"+e),this.url=e,this.trigger(y.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),f.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.prototype.stopLoad=function(){f.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},t.prototype.swapAudioCodec=function(){f.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){f.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){f.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){f.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){f.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){f.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){f.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){f.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(r(22).Observer);t.default=m},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(15),o=r(26),a=r(16),s=r(27),l=r(0),c=r(17),u=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,f=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return n.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];function o(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return c.isCodecType(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}for(u.lastIndex=0;null!=(n=u.exec(e));){var a={},l=a.attrs=new s.default(n[1]);a.url=t.resolve(n[2],r);var d=l.decimalResolution("RESOLUTION");d&&(a.width=d.width,a.height=d.height),a.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),a.name=l.NAME,o([].concat((l.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){var o;void 0===i&&(i=[]);var a=[],l=0;for(d.lastIndex=0;null!==(o=d.exec(e));){var c={},u=new s.default(o[1]);if(u.TYPE===n){if(c.groupId=u["GROUP-ID"],c.name=u.NAME,c.type=n,c.default="YES"===u.DEFAULT,c.autoselect="YES"===u.AUTOSELECT,c.forced="YES"===u.FORCED,u.URI&&(c.url=t.resolve(u.URI,r)),c.lang=u.LANGUAGE,c.name||(c.name=c.lang),i.length){var h=t.findGroup(i,c.groupId);c.audioCodec=h?h.codec:i[0].codec}c.id=l++,a.push(c)}}return a},t.parseLevelPlaylist=function(t,r,n,c,u){var d,g,m=0,v=0,b=new o.default(r),T=new a.default,P=0,S=null,k=new i.default,w=null;for(h.lastIndex=0;null!==(d=h.exec(t));){var E=d[1];if(E){k.duration=parseFloat(E);var A=(" "+d[2]).slice(1);k.title=A||null,k.tagList.push(A?["INF",E,A]:["INF",E])}else if(d[3]){if(e.isFinite(k.duration)){var x=m++;k.type=c,k.start=v,k.levelkey=T,k.sn=x,k.level=n,k.cc=P,k.urlId=u,k.baseurl=r,k.relurl=(" "+d[3]).slice(1),y(k,S),b.fragments.push(k),S=k,v+=k.duration,k=new i.default}}else if(d[4]){if(k.rawByteRange=(" "+d[4]).slice(1),S){var C=S.byteRangeEndOffset;C&&(k.lastByteRangeEndOffset=C)}}else if(d[5])k.rawProgramDateTime=(" "+d[5]).slice(1),k.tagList.push(["PROGRAM-DATE-TIME",k.rawProgramDateTime]),null===w&&(w=b.fragments.length);else{for(d=d[0].match(p),g=1;g<d.length&&void 0===d[g];g++);var _=(" "+d[g+1]).slice(1),L=(" "+d[g+2]).slice(1);switch(d[g]){case"#":k.tagList.push(L?[_,L]:[_]);break;case"PLAYLIST-TYPE":b.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":m=b.startSN=parseInt(_);break;case"TARGETDURATION":b.targetduration=parseFloat(_);break;case"VERSION":b.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":P++,k.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":P=parseInt(_);break;case"KEY":var R=_,O=new s.default(R),D=O.enumeratedString("METHOD"),I=O.URI,M=O.hexadecimalInteger("IV");D&&(T=new a.default,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(T.method=D,T.baseuri=r,T.reluri=I,T.key=null,T.iv=M));break;case"START":var F=_,N=new s.default(F).decimalFloatingPoint("TIME-OFFSET");e.isFinite(N)&&(b.startTimeOffset=N);break;case"MAP":var B=new s.default(_);k.relurl=B.URI,k.rawByteRange=B.BYTERANGE,k.baseurl=r,k.level=n,k.type=c,k.sn="initSegment",b.initSegment=k,(k=new i.default).rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+d)}}}return(k=S)&&!k.relurl&&(b.fragments.pop(),v-=k.duration),b.totalduration=v,b.averagetargetduration=v/b.fragments.length,b.endSN=m-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=P,!b.initSegment&&b.fragments.length&&b.fragments.every((function(e){return f.test(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(k=new i.default).relurl=b.fragments[0].relurl,k.baseurl=r,k.level=n,k.type=c,k.sn="initSegment",b.initSegment=k,b.needSidxRanges=!0),w&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(b.fragments,w),b},t}();function y(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=g}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(3),s=r(0),l=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,o=this.hls.config,a=o.fLoader,l=o.loader;r.loaded=0;var c,u,d,h=i[n];h&&(s.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=i[n]=r.loader=o.fLoader?new a(o):new l(o),c={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var p=r.byteRangeStartOffset,f=r.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(f)&&(c.rangeStart=p,c.rangeEnd=f),u={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(c,u,d)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var o=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:o,frag:a,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var o=t.frag;o.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:o,stats:e,networkDetails:n})},r}(o.default);t.default=l}).call(this,r(2).Number)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(3),s=r(0),l=function(e){function t(t){var r=e.call(this,t,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],o=t.decryptdata,a=o.uri;if(a!==this.decrypturl||null===this.decryptkey){var l,c,u,d=this.hls.config;n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new d.loader(d),this.decrypturl=a,this.decryptkey=null,l={url:a,frag:t,responseType:"arraybuffer"},c={timeout:d.fragLoadingTimeOut,maxRetry:0,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,c,u)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(o.default);t.default=l},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(10),o=r(8),a=r(31),s=r(1),l=r(9),c=r(15),u=r(13),d=r(23),h=r(48),p=r(3),f=r(0),g=r(49),y=r(50),m=r(51),v=r(52),b=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=v.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,t),r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(f.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=v.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case v.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case v.State.IDLE:this._doTickIdle();break;case v.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=v.State.IDLE);break;case v.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(f.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v.State.IDLE);break;case v.State.ERROR:case v.State.STOPPED:case v.State.FRAG_LOADING:case v.State.PARSING:case v.State.PARSED:case v.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var l,c=a.bitrate;l=c?Math.max(8*t.maxBufferSize/c,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var u=o.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=u.len;if(!(d>=l)){f.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==i)this.state=v.State.WAITING_LEVEL;else{if(this._streamEnded(u,h)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(s.default.BUFFER_EOS,p),void(this.state=v.State.ENDED)}this._fetchPayloadOrEos(n,u,h)}}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s,l=o[0].start,c=o[a-1].start+o[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void f.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(r,u,l,c,n,o,a)))return}else u<l&&(s=o[0]);s||(s=this._findFragment(l,n,a,o,u,c,r)),s&&(s.encrypted?(f.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(f.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,o,a,s){var l,c=this.hls.config,u=this.media,d=void 0!==c.liveMaxLatencyDuration?c.liveMaxLatencyDuration:c.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-c.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);f.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),t=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(o)if(e.hasProgramDateTime)f.logger.log("live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),l=y.findFragmentByPDT(a,o.endProgramDateTime,c.maxFragLookUpTolerance);else{var p=o.sn+1;if(p>=e.startSN&&p<=e.endSN){var g=a[p-e.startSN];o.cc===g.cc&&(l=g,f.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=i.default.search(a,(function(e){return o.cc-e.cc})))&&f.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],f.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},r.prototype._findFragment=function(e,t,r,n,i,o,a){var s,l=this.hls.config;if(i<o){var c=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=y.findFragmentByPTS(t,n,i,c)}else s=n[r-1];if(s){var u=s.sn-a.startSN,d=t&&s.level===t.level,h=n[u-1],p=n[u+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<a.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&u?(s=h,f.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=p,f.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(p&&p.backtracked?(f.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(f.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},r.prototype._loadKey=function(e){this.state=v.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===l.FragmentState.NOT_LOADED||r===l.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new a.default(this.hls,"main")),this.state=v.State.FRAG_LOADING):r===l.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("main stream:"+t+"->"+e),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),o.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):o.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(f.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,o.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r,n=void 0,i=void 0;if((r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)n=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;n=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+n))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=v.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new m.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&f.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){f.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&f.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[n],a=r.totalduration,l=0;if(f.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var c=o.details;c&&r.fragments.length>0?(d.mergeDetails(c,r),l=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(l,c),r.PTSKnown&&e.isFinite(l)?f.logger.log("live playlist sliding:"+l.toFixed(3)):(f.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,r))):(f.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,g.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(o.details=r,this.levelLastLoaded=n,this.hls.trigger(s.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=r.startTimeOffset;e.isFinite(u)?(u<0&&(f.logger.log("negative start time offset "+u+", count from end of last fragment"),u=l+a+u),f.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):r.live?(this.startPosition=this.computeLivePosition(l,r),f.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===v.State.WAITING_LEVEL&&(this.state=v.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===v.State.KEY_LOADING&&(this.state=v.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,o=e.frag;if(this.state===v.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var l=e.stats,c=n[t.level],u=c.details;if(this.bitrateTest=!1,this.stats=l,f.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),o.bitrateTest&&r.nextLoadLevel)this.state=v.State.IDLE,this.startFragRequested=!1,l.tparsed=l.tbuffered=window.performance.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=v.State.IDLE,l.tparsed=l.tbuffered=window.performance.now(),u.initSegment.data=e.payload,r.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:t,id:"main"}),this.tick();else{f.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=v.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var d=!(i&&i.seeking)&&(u.PTSKnown||!u.live),h=u.initSegment?u.initSegment.data:[],p=this._getAudioCodec(c);(this.demuxer=this.demuxer||new a.default(this.hls,"main")).push(e.payload,h,p,c.videoCodec,t,u.totalduration,d)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING){var n=e.tracks,i=void 0,o=void 0;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var a=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(f.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===l.indexOf("firefox")&&(a="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",f.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=n.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(s.default.BUFFER_CODECS,n),n){o=n[i],f.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var c=o.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:i,data:c,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===v.State.PARSING){var o=this.levels[this.level],a=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(c.default.ElementaryStreamTypes.VIDEO),f.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)f.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var l=o.details;if(!l||a.sn!==l.startSN)return f.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v.State.IDLE,this.fragPrevious=a,void this.tick();f.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var u=d.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),h=this.hls;h.trigger(s.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(e){e&&e.length&&r.state===v.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,h.trigger(s.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))})),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=v.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){f.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(f.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.State.IDLE}var o=this.hls;o.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(f.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var o in n){var a=n[o];"main"===a.id?(r=o,t=a,"video"===o&&(this.videoBuffer=n[o].buffer)):i=!0}i&&t?(f.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==v.State.PARSING&&t!==v.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==v.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;f.logger.log("main buffered : "+h.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=v.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&o.BufferHelper.isBuffered(this.media,this.media.currentTime)&&o.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);f.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=v.State.FRAG_LOADING_WAITING_RETRY}else f.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=v.State.ERROR;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==v.State.ERROR&&(t.fatal?(this.state=v.State.ERROR,f.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==v.State.WAITING_LEVEL||(this.state=v.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==v.State.PARSING&&this.state!==v.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v.State.IDLE):(f.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,f.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=v.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(c.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=v.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(f.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(f.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(v.default);t.default=b}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(32),i=r(1),o=r(18),a=r(0),s=r(3),l=r(12),c=r(6),u=r(22),d=c.getSelfScope(),h=l.getMediaSource(),p=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var l=this.observer=new u.Observer,c=e.config,p=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};l.on(i.default.FRAG_DECRYPTED,p),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),l.on(i.default.FRAG_PARSING_DATA,p),l.on(i.default.FRAG_PARSED,p),l.on(i.default.ERROR,p),l.on(i.default.FRAG_PARSING_METADATA,p),l.on(i.default.FRAG_PARSING_USERDATA,p),l.on(i.default.INIT_PTS_FOUND,p);var f={mp4:h.isTypeSupported("video/mp4"),mpeg:h.isTypeSupported("audio/mpeg"),mp3:h.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(c.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var y=void 0;try{y=this.w=n(46),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:f,vendor:g,id:t,config:JSON.stringify(c)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&d.URL.revokeObjectURL(y.objectURL),this.demuxer=new o.default(l,f,c,g),this.w=void 0}}else this.demuxer=new o.default(l,f,c,g)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,o,s,l,c){var u=this.w,d=e.isFinite(o.startPTS)?o.startPTS:o.start,h=o.decryptdata,p=this.frag,f=!(p&&o.cc===p.cc),g=!(p&&o.level===p.level),y=p&&o.sn===p.sn+1,m=!g&&y;if(f&&a.logger.log(this.id+":discontinuity detected"),g&&a.logger.log(this.id+":switch detected"),this.frag=o,u)u.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:f,trackSwitch:g,contiguous:m,duration:s,accurateTimeOffset:l,defaultInitPTS:c},t instanceof ArrayBuffer?[t]:[]);else{var v=this.demuxer;v&&v.push(t,h,r,n,i,d,f,g,m,s,l,c)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=p}).call(this,r(2).Number)},function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,n){var l={};l[n]=[];var c=t.toString(),u=c.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return l;for(var d,h=u[1],p=new RegExp("(\\\\n|\\W)"+a(h)+o,"g");d=p.exec(c);)"dll-reference"!==d[3]&&l[n].push(d[3]);for(p=new RegExp("\\("+a(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");d=p.exec(c);)e[d[2]]||(l[n].push(d[1]),e[d[2]]=r(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var f=Object.keys(l),g=0;g<f.length;g++)for(var y=0;y<l[f[g]].length;y++)s(l[f[g]][y])&&(l[f[g]][y]=1*l[f[g]][y]);return l}function c(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},o=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};c(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],u=r[s].pop();if(i[s]=i[s]||{},!i[s][u]&&e[s][u]){i[s][u]=!0,n[s]=n[s]||[],n[s].push(u);for(var d=l(e,e[s][u],s),h=Object.keys(d),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(d[h[p]])}}return n}(i,e),a="";Object.keys(o).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(u);return d.objectURL=u,d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var y=f^f<<1^f<<2^f<<3^f<<4;y=y>>>8^255&y^99,e[p]=y,t[y]=p;var m=h[p],v=h[m],b=h[v],T=257*h[y]^16843008*y;n[p]=T<<24|T>>>8,i[p]=T<<16|T>>>16,o[p]=T<<8|T>>>24,a[p]=T,T=16843009*b^65537*v^257*m^16843008*p,l[y]=T<<24|T>>>8,c[y]=T<<16|T>>>16,u[y]=T<<8|T>>>24,d[y]=T,p?(p=m^h[h[h[b^m]]],f^=h[h[f]]):p=f=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,c=this.ksRows=4*(i+6+1),u=this.keySchedule=new Uint32Array(c),d=this.invKeySchedule=new Uint32Array(c),h=this.sBox,p=this.rcon,f=this.invSubMix,g=f[0],y=f[1],m=f[2],v=f[3];for(o=0;o<c;o++)o<i?s=u[o]=t[o]:(l=s,o%i==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[o/i|0]<<24):i>6&&o%i==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[o]=s=(u[o-i]^l)>>>0);for(a=0;a<c;a++)o=c-a,l=3&a?u[o]:u[o-4],d[a]=a<4||o<=4?l:g[h[l>>>24]]^y[h[l>>>16&255]]^m[h[l>>>8&255]]^v[h[255&l]],d[a]=d[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var o,a,s,l,c,u,d,h,p,f,g,y,m,v,b=this.keySize+6,T=this.invKeySchedule,P=this.invSBox,S=this.invSubMix,k=S[0],w=S[1],E=S[2],A=S[3],x=this.uint8ArrayToUint32Array_(r),C=x[0],_=x[1],L=x[2],R=x[3],O=new Int32Array(e),D=new Int32Array(O.length),I=this.networkToHostOrderSwap;t<O.length;){for(p=I(O[t]),f=I(O[t+1]),g=I(O[t+2]),y=I(O[t+3]),c=p^T[0],u=y^T[1],d=g^T[2],h=f^T[3],m=4,v=1;v<b;v++)o=k[c>>>24]^w[u>>16&255]^E[d>>8&255]^A[255&h]^T[m],a=k[u>>>24]^w[d>>16&255]^E[h>>8&255]^A[255&c]^T[m+1],s=k[d>>>24]^w[h>>16&255]^E[c>>8&255]^A[255&u]^T[m+2],l=k[h>>>24]^w[c>>16&255]^E[u>>8&255]^A[255&d]^T[m+3],c=o,u=a,d=s,h=l,m+=4;o=P[c>>>24]<<24^P[u>>16&255]<<16^P[d>>8&255]<<8^P[255&h]^T[m],a=P[u>>>24]<<24^P[d>>16&255]<<16^P[h>>8&255]<<8^P[255&c]^T[m+1],s=P[d>>>24]<<24^P[h>>16&255]<<16^P[c>>8&255]<<8^P[255&u]^T[m+2],l=P[h>>>24]<<24^P[c>>16&255]<<16^P[u>>8&255]<<8^P[255&d]^T[m+3],m+=3,D[t]=I(o^C),D[t+1]=I(l^_),D[t+2]=I(s^L),D[t+3]=I(a^R),C=p,_=f,L=g,R=y,t+=4}return i?n(D.buffer):D.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(0),o=r(11),a=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(n.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,a,s){for(var l=this._audioTrack,c=o.default.getID3Data(t,0)||[],u=o.default.getTimeStamp(c),d=e.isFinite(u)?90*u:9e4*r,h=0,p=d,f=t.length,g=c.length,y=[{pts:p,dts:p,data:c}];g<f-1;)if(n.isHeader(t,g)&&g+5<f){n.initTrackConfig(l,this.observer,t,g,l.manifestCodec);var m=n.appendFrame(l,t,g,d,h);if(!m){i.logger.log("Unable to parse AAC frame");break}g+=m.length,p=m.sample.pts,h++}else o.default.isHeader(t,g)?(c=o.default.getID3Data(t,g),y.push({pts:p,dts:p,data:c}),g+=c.length):g++;this.remuxer.remux(l,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},r,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(21),o=r(1),a=r(38),s=r(39),l=r(0),c=r(3),u={video:1,audio:2,id3:3,text:4},d=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:u[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var a,s,u,d,h,p=t.length,f=!1;this.contiguous=n;var g=this.pmtParsed,y=this._avcTrack,m=this._audioTrack,v=this._id3Track,b=y.pid,T=m.pid,P=v.pid,S=this._pmtId,k=y.pesData,w=m.pesData,E=v.pesData,A=this._parsePAT,x=this._parsePMT,C=this._parsePES,_=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),D=e._syncOffset(t);for(p-=(p+D)%188,a=D;a<p;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),u=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((d=a+5+t[a+4])===a+188)continue}else d=a+4;switch(u){case b:s&&(k&&(h=C(k))&&void 0!==h.pts&&_(h,!1),k={data:[],size:0}),k&&(k.data.push(t.subarray(d,a+188)),k.size+=a+188-d);break;case T:s&&(w&&(h=C(w))&&void 0!==h.pts&&(m.isAAC?L(h):R(h)),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,a+188)),w.size+=a+188-d);break;case P:s&&(E&&(h=C(E))&&void 0!==h.pts&&O(h),E={data:[],size:0}),E&&(E.data.push(t.subarray(d,a+188)),E.size+=a+188-d);break;case 0:s&&(d+=t[d]+1),S=this._pmtId=A(t,d);break;case S:s&&(d+=t[d]+1);var I=x(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=I.avc)>0&&(y.pid=b),(T=I.audio)>0&&(m.pid=T,m.isAAC=I.isAAC),(P=I.id3)>0&&(v.pid=P),f&&!g&&(l.logger.log("reparse from beginning"),f=!1,a=D-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(o.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(h=C(k))&&void 0!==h.pts?(_(h,!0),y.pesData=null):y.pesData=k,w&&(h=C(w))&&void 0!==h.pts?(m.isAAC?L(h):R(h),m.pesData=null):(w&&w.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=w),E&&(h=C(E))&&void 0!==h.pts?(O(h),v.pesData=null):v.pesData=E,null==this.sampleAes?this.remuxer.remux(m,y,v,this._txtTrack,r,n,i):this.decryptAndRemux(m,y,v,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,o,a)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,o,a)}))}else this.remuxer.remux(e,t,r,n,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:r?-1===a.audio&&(a.audio=o,a.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,r,n,i,o,a,s,c,u=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(r=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&r?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),c=(i=t[8])+9,e.size-=c,o=new Uint8Array(e.size);for(var p=0,f=d.length;p<f;p++){var g=(t=d[p]).byteLength;if(c){if(c>g){c-=g;continue}t=t.subarray(c),g-=c,c=0}o.set(t,u),u+=g}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),c=this.avcSample,u=!1,d=this.pushAccesUnit.bind(this),h=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,c&&l.length&&!s.audFound&&(d(c,s),c=this.avcSample=h(!1,e.pts,e.dts,"")),l.forEach((function(t){switch(t.type){case 1:n=!0,c||(c=o.avcSample=h(!0,e.pts,e.dts,"")),c.frame=!0;var l=t.data;if(u&&l.length>4){var p=new a.default(l).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(c.key=!0)}break;case 5:n=!0,c||(c=o.avcSample=h(!0,e.pts,e.dts,"")),c.key=!0,c.frame=!0;break;case 6:n=!0,(r=new a.default(o.discardEPB(t.data))).readUByte();for(var f=0,g=0,y=!1,m=0;!y&&r.bytesAvailable>1;){f=0;do{f+=m=r.readUByte()}while(255===m);g=0;do{g+=m=r.readUByte()}while(255===m);if(4===f&&0!==r.bytesAvailable){if(y=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var v=r.readUByte(),b=31&v,T=[v,r.readUByte()];for(i=0;i<b;i++)T.push(r.readUByte()),T.push(r.readUByte()),T.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:T})}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!s.sps){var P=(r=new a.default(t.data)).readSPS();s.width=P.width,s.height=P.height,s.pixelRatio=P.pixelRatio,s.sps=[t.data],s.duration=o._duration;var S=t.data.subarray(1,4),k="avc1.";for(i=0;i<3;i++){var w=S[i].toString(16);w.length<2&&(w="0"+w),k+=w}s.codec=k}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,c&&d(c,s),c=o.avcSample=h(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,c&&(c.debug+="unknown NAL "+t.type+" ")}c&&n&&c.units.push(t)})),t&&c&&(d(c,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,o=0,a=e.byteLength,s=this._avcTrack,l=s.naluState||0,c=l,u=[],d=-1;for(-1===l&&(d=0,i=31&e[0],l=0,o=1);o<a;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){var h,p;d>=0?(n={data:e.subarray(d,o-l-1),type:i},u.push(n)):(h=this._getLastNalUnit())&&(c&&o<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(r=o-l-1)>0&&((p=new Uint8Array(h.data.byteLength+r)).set(h.data,0),p.set(e.subarray(0,r),h.data.byteLength),h.data=p)),o<a?(d=o,i=31&e[o],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;return d>=0&&l>=0&&(n={data:e.subarray(d,a),type:i,state:l},u.push(n)),0===u.length&&(h=this._getLastNalUnit())&&((p=new Uint8Array(h.data.byteLength+e.byteLength)).set(h.data,0),p.set(e,h.data.byteLength),h.data=p),s.naluState=l,u},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r},e.prototype._parseAACPES=function(e){var t,r,i,a,s,u=this._audioTrack,d=e.data,h=e.pts,p=this.aacOverFlow,f=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+d.byteLength);g.set(p,0),g.set(d,p.byteLength),d=g}for(i=0,s=d.length;i<s-1&&!n.isHeader(d,i);i++);if(i){var y=void 0,m=void 0;if(i<s-1?(y="AAC PES did not start with ADTS header,offset:"+i,m=!1):(y="no ADTS header found in AAC PES",m=!0),l.logger.warn("parsing error:"+y),this.observer.trigger(o.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:m,reason:y}),m)return}if(n.initTrackConfig(u,this.observer,d,i,this.audioCodec),r=0,t=n.getFrameDuration(u.samplerate),p&&f){var v=f+t;Math.abs(v-h)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((v-h)/90)),h=v)}for(;i<s;)if(n.isHeader(d,i)&&i+5<s){var b=n.appendFrame(u,d,i,h,r);if(!b)break;i+=b.length,a=b.sample.pts,r++}else i++;p=i<s?d.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,o=0,a=e.pts;o<r;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,n);if(!s)break;o+=s.length,n++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e.prototype.readSPS=function(){var e,t,r,n,i,o,a,s=0,l=0,c=0,u=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),m=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=p();if(3===b&&g(1),m(),m(),g(1),f())for(o=3!==b?8:12,a=0;a<o;a++)f()&&v(a<6?16:64)}m();var T=p();if(0===T)p();else if(1===T)for(g(1),y(),y(),t=p(),a=0;a<t;a++)y();m(),g(1),r=p(),n=p(),0===(i=h(1))&&g(1),g(1),f()&&(s=p(),l=p(),c=p(),u=p());var P=[1,1];if(f()&&f())switch(d()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:P=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(c+u),pixelRatio:P}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,(function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(e,t+1,r)}))},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,r+1,n)}))},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,o,a),!a)return}}}},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(0),o=r(21),a=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,a=n.default.getID3Data(e,0);if(a&&void 0!==n.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=n.default.getID3Data(e,0),s=n.default.getTimeStamp(a),l=s?90*s:9e4*t,c=a.length,u=e.length,d=0,h=0,p=this._audioTrack,f=[{pts:l,dts:l,data:a}];c<u;)if(o.default.isHeader(e,c)){var g=o.default.appendFrame(p,e,c,l,d);if(!g)break;c+=g.length,h=g.sample.pts,d++}else n.default.isHeader(e,c)?(a=n.default.getID3Data(e,c),f.push({pts:h,dts:h,data:a}),c+=a.length):c++;this.remuxer.remux(p,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),i=r(43),o=r(1),a=r(3),s=r(0),l=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,a,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var c=e.samples.length,u=t.samples.length,d=i,h=i;if(c&&u){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,p),h+=Math.max(0,-p)}if(c){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var f=this.remuxAudio(e,d,a,l);if(u){var g=void 0;f&&(g=f.endPTS-f.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,h,a,g,l)}}else if(u){var y=this.remuxVideo(t,h,a,0,l);y&&e.codec&&this.remuxEmptyAudio(e,d,a,y)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,l,c=this.observer,u=e.samples,d=t.samples,h=this.typeSupported,p="audio/mp4",f={},g={tracks:f},y=void 0===this._initPTS;if(y&&(n=l=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(h.mpeg?(p="audio/mpeg",e.codec=""):h.mp3&&(e.codec="mp3")),f.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&h.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(n=l=u[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&d.length){var m=t.inputTimeScale;t.timescale=m,f.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(n=Math.min(n,d[0].pts-m*r),l=Math.min(l,d[0].dts-m*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(f).length?(c.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=n,this._initDTS=l)):c.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,l){var c,u,d,h,p,f,g,y=8,m=e.timescale,v=e.samples,b=[],T=v.length,P=this._PTSNormalize,S=this._initPTS,k=this.nextAvcDts,w=this.isSafari;if(0!==T){w&&(r|=v.length&&k&&(l&&Math.abs(t-k/m)<.1||Math.abs(v[0].pts-k-S)<m/5)),r||(k=t*m),v.forEach((function(e){e.pts=P(e.pts-S,k),e.dts=P(e.dts-S,k)})),v.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id}));var E=v.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(E<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var A=0;A<v.length;A++)v[A].dts+=E}var x=v[0];p=Math.max(x.dts,0),h=Math.max(x.pts,0);var C=Math.round((p-k)/90);r&&C&&(C>1?s.logger.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&s.logger.log("AVC:"+-C+" ms overlapping between fragments detected"),p=k,v[0].dts=p,h=Math.max(h-C,k),v[0].pts=h,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(h/90)+"/"+Math.round(p/90)+",delta:"+C+" ms")),x=v[v.length-1],g=Math.max(x.dts,0),f=Math.max(x.pts,0,g),w&&(c=Math.round((g-p)/(v.length-1)));var _=0,L=0;for(A=0;A<T;A++){for(var R=v[A],O=R.units,D=O.length,I=0,M=0;M<D;M++)I+=O[M].data.length;L+=I,_+=D,R.length=I,R.dts=w?p+A*c:Math.max(R.dts,p),R.pts=Math.max(R.pts,R.dts)}var F=L+4*_+8;try{u=new Uint8Array(F)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var N=new DataView(u.buffer);for(N.setUint32(0,F),u.set(i.default.types.mdat,4),A=0;A<T;A++){var B=v[A],U=B.units,j=0,G=void 0;for(M=0,D=U.length;M<D;M++){var K=U[M],H=K.data,W=K.data.byteLength;N.setUint32(y,W),y+=4,u.set(H,y),y+=W,j+=4+W}if(w)G=Math.max(0,c*Math.round((B.pts-B.dts)/c));else{if(A<T-1)c=v[A+1].dts-B.dts;else{var V=this.config,q=B.dts-v[A>0?A-1:A].dts;if(V.stretchShortVideoTrack){var z=V.maxBufferHole,Y=Math.floor(z*m),$=(n?h+n*m:this.nextAudioPts)-B.pts;$>Y?((c=$-q)<0&&(c=q),s.logger.log("It is approximately "+$/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=q}else c=q}G=Math.round(B.pts-B.dts)}b.push({size:j,duration:c,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=g+c;var X=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Q=b[0].flags;Q.dependsOn=2,Q.isNonSync=0}e.samples=b,d=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var J={data1:d,data2:u,startPTS:h/m,endPTS:(f+c)/m,startDTS:p/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:X};return this.observer.trigger(o.default.FRAG_PARSING_DATA,J),J}},e.prototype.remuxAudio=function(e,t,r,l){var c,u,d,h,p,f,g,y=e.inputTimeScale,m=e.timescale,v=y/m,b=(e.isAAC?1024:1152)*v,T=this._PTSNormalize,P=this._initPTS,S=!e.isAAC&&this.typeSupported.mpeg,k=e.samples,w=[],E=this.nextAudioPts;if(r|=k.length&&E&&(l&&Math.abs(t-E/y)<.1||Math.abs(k[0].pts-E-P)<20*b),k.forEach((function(e){e.pts=e.dts=T(e.pts-P,t*y)})),0!==(k=k.filter((function(e){return e.pts>=0}))).length){if(r||(E=l?t*y:k[0].pts),e.isAAC)for(var A=this.config.maxAudioFramesDrift,x=0,C=E;x<k.length;){var _,L=k[x];_=(B=L.pts)-C;var R=Math.abs(1e3*_/y);if(_<=-A*b)s.logger.warn("Dropping 1 audio frame @ "+(C/y).toFixed(3)+"s due to "+Math.round(R)+" ms overlap."),k.splice(x,1),e.len-=L.unit.length;else if(_>=A*b&&R<1e4&&C){var O=Math.round(_/b);s.logger.warn("Injecting "+O+" audio frame @ "+(C/y).toFixed(3)+"s due to "+Math.round(1e3*_/y)+" ms gap.");for(var D=0;D<O;D++){var I=Math.max(C,0);(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=L.unit.subarray()),k.splice(x,0,{unit:d,pts:I,dts:I}),e.len+=d.length,C+=b,x++}L.pts=L.dts=C,C+=b,x++}else Math.abs(_),L.pts=L.dts=C,C+=b,x++}D=0;for(var M=k.length;D<M;D++){var F=k[D],N=F.unit,B=F.pts;if(void 0!==g)u.duration=Math.round((B-g)/v);else{var U=Math.round(1e3*(B-E)/y),j=0;if(r&&e.isAAC&&U){if(U>0&&U<1e4)j=Math.round((B-E)/b),s.logger.log(U+" ms hole between AAC samples detected,filling it"),j>0&&((d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=N.subarray()),e.len+=j*d.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(E/y).toFixed(3)+"s/"+(B/y).toFixed(3)+"s/"+-U+"ms"),e.len-=N.byteLength;continue}B=E}if(f=B,!(e.len>0))return;var G=S?e.len:e.len+8;c=S?0:8;try{h=new Uint8Array(G)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}for(S||(new DataView(h.buffer).setUint32(0,G),h.set(i.default.types.mdat,4)),x=0;x<j;x++)(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=N.subarray()),h.set(d,c),c+=d.byteLength,u={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(u)}h.set(N,c);var K=N.byteLength;c+=K,u={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(u),g=B}var H=0,W=w.length;if(W>=2&&(H=w[W-2].duration,u.duration=H),W){this.nextAudioPts=E=g+v*H,e.len=0,e.samples=w,p=S?new Uint8Array:i.default.moof(e.sequenceNumber++,f/v,e),e.samples=[];var V=f/y,q=E/y,z={data1:p,data2:h,startPTS:V,endPTS:q,startDTS:V,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.observer.trigger(o.default.FRAG_PARSING_DATA,z),z}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),l=this.nextAudioPts,c=(void 0!==l?l:i.startDTS*o)+this._initDTS,u=i.endDTS*o+this._initDTS,d=1024*a,h=Math.ceil((u-c)/d),p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),p){for(var f=[],g=0;g<h;g++){var y=c+g*d;f.push({unit:p,pts:y,dts:y}),e.len+=p.length}e.samples=f,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/n,t.dts=(t.dts-a)/n;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var a=0;a<r;a++)(t=e.samples[a]).pts=(t.pts-i)/n;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,c=t.height,u=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),o=t.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,o,a,s,l,c=t.samples||[],u=c.length,d=12+16*u,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<u;n++)o=(i=c[n]).duration,a=i.size,s=i.flags,l=i.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,o,a,s,l){var c=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),c.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),c.trigger(n.default.FRAG_PARSED)},e}();t.default=i},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new function(e,t,r){this.fn=e,this.context=t,this.once=r||!1}(r,n||e,o),s=i?i+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},l.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,o),!0;case 6:return u.fn.call(u.context,t,r,n,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},l.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||n&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),i=r(1),o=r(0),a=r(47);t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(c=r.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(0);function o(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function a(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function s(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=o(r,n[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function c(e,t,r){if(a(e,r,t)){var n=s(r.details,t);n&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(n.start,t))}}function u(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-n)/1e3+r.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return n.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=l,t.alignStream=function(e,t,r){c(e,r,t),!r.PTSKnown&&t&&u(r,t.details)},t.alignDiscontinuities=c,t.alignPDT=u}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);function i(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function o(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}t.findFragmentByPDT=function(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(r,n,a))return a}return null},t.findFragmentByPTS=function(e,t,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(r,o,a)?a:n.default.search(t,i.bind(null,r,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(3),o=r(1),a=r(0),s=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&n.BufferHelper.isBuffered(i,o))){var l=s-this.stalled,c=n.BufferHelper.bufferInfo(i,o,r.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(c.len),this._tryFixBufferStall(c,l)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,o=n.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,n=r.currentTime,s=0,l=0;l<r.buffered.length;l++){var c=r.buffered.start(l);if(n>=s&&n<c)return r.currentTime=Math.max(c,r.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+r.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+r.currentTime,frag:e});s=r.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var l=n+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+n+" to "+l),r.currentTime=l,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(53),o=r(9),a=r(8),s=r(0);t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var l=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype.startLoad=function(){},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},i.prototype._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===o.FragmentState.PARTIAL||i===o.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this.config,n=this.media,i=this.mediaBuffer,o=this.state,l=n?n.currentTime:null,c=a.BufferHelper.bufferInfo(i||n,l,this.config.maxBufferHole);if(e.isFinite(l)&&s.logger.log("media seeking to "+l.toFixed(3)),o===t.State.FRAG_LOADING){var u=this.fragCurrent;if(0===c.len&&u){var d=r.maxFragLookUpTolerance,h=u.start-d,p=u.start+u.duration+d;l<h||l>p?(u.loader&&(s.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),u.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):s.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===c.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);n&&(this.lastCurrentTime=l),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=l),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},i.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},i}(i.default);t.default=l}).call(this,r(2).Number)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(r(4).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(1),a=r(4),s=r(0),l=r(3),c=r(17),u=r(23),d=(window.performance,function(e){function t(t){var r=e.call(this,t,o.default.MANIFEST_LOADED,o.default.LEVEL_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.FRAG_LOADED,o.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],a={},d=null,h=!1,p=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,h=h||!!e.videoCodec,p=p||!!e.audioCodec,i&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(d=a[e.bitrate])?d.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(p=!0,u.addGroupId(d||e,"audio",t.AUDIO)),t.SUBTITLES&&u.addGroupId(d||e,"text",t.SUBTITLES))})),h&&p&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||c.isCodecSupportedInMp4(t,"audio"))&&(!r||c.isCodecSupportedInMp4(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||c.isCodecSupportedInMp4(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var f=0;f<r.length;f++)if(r[f].bitrate===t){this._firstLevel=f,s.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(o.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:h,altAudio:n.some((function(e){return!!e.url}))})}else this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){s.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(o.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var c=i.urlId;r.trigger(o.default.LEVEL_LOADING,{url:i.url[c],level:e,id:c})}}else r.trigger(o.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},t.prototype.recoverLevel=function(e,t,r,n){var i,o,a,l=this,c=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=c.levelLoadingMaxRetry))return s.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*c.levelLoadingRetryDelay,c.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return l.loadLevel()}),o),e.levelRetry=!0,this.levelRetryCount++,s.logger.warn("level controller, "+u+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,s.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,s.logger.warn("level controller, "+u+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):n&&(s.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var o=u.computeReloadInterval(i.details,n,e.stats.trequest);s.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(s.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];s.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(o.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(a.default));t.default=d},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(11),s=r(56),l=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(t,e),t.prototype.destroy=function(){o.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=a.default.getID3Frames(r[i].data);if(o){var s=r[i].pts,l=i<r.length-1?r[i+1].pts:t.endPTS;s===l&&(l+=1e-4);for(var c=0;c<o.length;c++){var u=o[c];if(!a.default.isTimeStampFrame(u)){var d=new n(s,l,"");d.value=u,this.id3Track.addCue(d)}}}}},t}(o.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12);t.isSupported=function(){var e=n.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(59),i=r(62),o=r(63),a=r(64),s=r(65),l=(r(5),r(5),r(5),r(5),r(5),r(5),r(5),r(66));t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:l.requestMediaKeySystemAccess}},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(8),s=r(3),l=r(0),c=r(60),u=window.performance,d=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,t),r.prototype.destroy=function(){this.clearTimer(),o.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,o=void 0,a=void 0;r.levels[i].details.live?(o=n.abrEwmaFastLive,a=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,a=n.abrEwmaSlowVoD),this._bwEstimator=new c.default(r,a,o,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,o=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(t&&s&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var c=u.now()-s.trequest,d=Math.abs(t.playbackRate);if(c>500*r.duration/d){var h=e.levels,p=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/c),f=h[r.level],g=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,y=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*g/8)),m=t.currentTime,v=(y-s.loaded)/p,b=(a.BufferHelper.bufferInfo(t,m,e.config.maxBufferHole).end-m)/d;if(b<2*r.duration/d&&v>b){var T=void 0,P=void 0;for(P=r.level-1;P>o;P--){var S=h[P].realBitrate?Math.max(h[P].realBitrate,h[P].bitrate):h[P].bitrate;if((T=r.duration*S/(6.4*p))<b)break}T<v&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+P+":fragLoadedDelay["+P+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+T.toFixed(1)+"<"+v.toFixed(1)+":"+b.toFixed(1)),e.nextLoadLevel=P,this._bwEstimator.sample(c,s.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,o=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:o},n.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,o=e.media,s=this.lastLoadedFragLevel,c=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,h=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,p=(a.BufferHelper.bufferInfo(o,u,n.maxBufferHole).end-u)/d,f=this._findBestLevel(s,c,h,i,t,p,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=c?Math.min(c,n.maxStarvationDelay):n.maxStarvationDelay,y=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===p){var v=this.bitrateTestDelay;v&&(g=(c?Math.min(c,n.maxLoadingDelay):n.maxLoadingDelay)-v,l.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),y=m=1)}return f=this._findBestLevel(s,c,h,i,t,p+g,y,m,r),Math.max(f,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,o,a,s,c){for(var u=i;u>=n;u--){var d=c[u];if(d){var h,p=d.details,f=p?p.totalduration/p.fragments.length:t,g=!!p&&p.live;h=u<=e?a*r:s*r;var y=c[u].realBitrate?Math.max(c[u].realBitrate,c[u].bitrate):c[u].bitrate,m=y*f/h;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(h)+"/"+y+"/"+f+"/"+o+"/"+m),h>y&&(!m||g&&!this.bitrateTestDelay||m<o))return u}}return-1},r}(o.default);t.default=d}).call(this,r(2).Number)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(0),s=r(3),l=r(12).getMediaSource(),c=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,t),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){a.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(a.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new l;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){a.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){a.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):a.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){a.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){a.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){a.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;a.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),n={},o=this.sourceBuffer;for(var s in o)n[s]=o[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){a.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]}));var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var o=e[n],l=o.levelCodec||o.codec,c=o.container+";codecs="+l;a.logger.log("creating sourceBuffer("+c+")");try{var u=t[n]=r.addSourceBuffer(c);u.addEventListener("updateend",this.onsbue),u.addEventListener("error",this.onsbe),this.tracks[n]={codec:l,container:o.container},o.buffer=u}catch(e){a.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:c})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){a.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,a.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}a.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){a.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),o=n.length-1;o>=0;o--){var a=n[o],s=r[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,r[a],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(a.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(a.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){a.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void a.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var n=t.shift();try{var o=r[n.type];o?o.updating?t.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){a.logger.error("error while trying to append buffer:"+r.message),t.unshift(n);var l={type:s.ErrorTypes.MEDIA_ERROR,parent:n.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,l.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(a.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],l.fatal=!0,e.trigger(i.default.ERROR,l)):(l.fatal=!1,e.trigger(i.default.ERROR,l))):(this.segments=[],l.details=s.ErrorDetails.BUFFER_FULL_ERROR,l.fatal=!1,e.trigger(i.default.ERROR,l))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(a.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!r||o===r){if((n=i[o]).ended=!1,n.updating)return a.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,n,e,t))return this.flushBufferCounter++,!1}}else a.logger.warn("abort flushing too many retries");a.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),s=t.buffered.end(i),l=Math.max(o,r),c=Math.min(s,n);if(Math.min(c,s)-l>.5)return a.logger.log("sb remove "+e+" ["+l+","+c+"], of ["+o+","+s+"], pos:"+this.media.currentTime),t.remove(l,c),!0}}catch(e){a.logger.warn("removeBufferRange failed",e)}return!1},r}(o.default);t.default=c}).call(this,r(2).Number)},function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(t){function r(r){var n=t.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e}));return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||e.width!==t.width||e.height!==t.height},i=e.length-1,o=0;o<e.length;o+=1){var a=e[o];if((a.width>=t||a.height>=r)&&n(a,e[o+1])){i=o;break}}return i},r}(r(4).default);t.default=o}).call(this,r(2).Number)},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(4),a=r(0),s=window.performance,l=function(e){function t(t){return e.call(this,t,i.default.MEDIA_ATTACHING)||this}return n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var n=s.now();if(t){if(this.lastTime){var o=n-this.lastTime,l=r-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*l/o,d=this.hls;if(d.trigger(i.default.FPS_DROP,{currentDropped:l,currentDecoded:c,totalDroppedFrames:r}),u>0&&l>d.config.fpsDroppedMonitoringThreshold*c){var h=d.currentLevel;a.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=h)&&(h-=1,d.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,d.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(o.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===r){var l=t.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var c,u=void 0;c="arraybuffer"===a.responseType?(u=t.response).byteLength:(u=t.responseText).length,o.loaded=o.total=c;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,o,a,t)}else o.retry>=s.maxRetry||l>=400&&l<499?(n.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:t.statusText},a,t)):(n.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=n}]).default)},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=a+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(105))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(12);t.VideoPlayer=class{constructor(e){this.applyCssShadow=e=>{n(this.player).css("box-shadow",e)},this.player=document.createElement("video"),this.eventListener=e}configure(e,t){e.appendChild(this.player),this.playbackState=i.PlaybackState.IDLE,Object.assign(this.player.style,{height:"100%","object-fit":t,width:"100%"}),this.player.onplay=()=>{this.sendPlaying(),this.playbackState=i.PlaybackState.PLAYING},this.player.onplaying=()=>{this.sendPlaying(),this.playbackState=i.PlaybackState.PLAYING},this.player.onended=()=>{this.eventListener.onEvent(i.PlaybackState.ENDED),this.playbackState=i.PlaybackState.ENDED},this.player.onpause=()=>{this.eventListener.onEvent(i.PlaybackState.PAUSED),this.playbackState=i.PlaybackState.PAUSED},this.player.onerror=()=>{this.eventListener.onEvent(i.PlaybackState.ERROR),this.playbackState=i.PlaybackState.ERROR},this.player.onloadedmetadata=()=>{this.eventListener.onEvent(i.PlaybackState.LOADED),this.playbackState=i.PlaybackState.LOADED}}load(e,t){return this.player.id=e,this.player.src!==t?(this.playbackState=i.PlaybackState.IDLE,this.player.src=t,this.player.load()):(this.eventListener.onEvent(i.PlaybackState.LOADED),this.playbackState=i.PlaybackState.LOADED),Promise.resolve()}play(e,t,r){return this.playbackState!==i.PlaybackState.PAUSED&&(this.player.currentTime=r),this.player.play()}pause(){this.player.pause()}mute(){this.player.muted=!0}unmute(){this.player.muted=!1}flush(){this.pause()}setCurrentTime(e){this.player.currentTime=e}getCurrentPlaybackPosition(){return this.player.currentTime}getDuration(){return this.player.duration}getMediaState(){return this.playbackState}getMediaId(){return this.player.id}sendPlaying(){this.playbackState!==i.PlaybackState.IDLE&&this.playbackState!==i.PlaybackState.PAUSED&&this.playbackState!==i.PlaybackState.ENDED&&this.playbackState!==i.PlaybackState.LOADED||this.eventListener.onEvent(i.PlaybackState.PLAYING)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(54),i=r(58);t.AudioPlayerWrapper=class{constructor(e){this.audioPlayer=e?e(this):new n.DefaultAudioPlayer(this)}reset(){this.preparePromise=void 0,this.latestId=void 0,this.latestMarkers=void 0,this.playbackEventListener=void 0}prepareAsync(e,t){if(this.preparePromise)throw new Error("prepare already in progress");this.preparePromise=new i.PromiseContainer,this.latestId=this.audioPlayer.prepare(e,t)}playLatest(e){if(!this.preparePromise)throw new Error("prepareAsync has not been called");this.playbackEventListener=e,this.preparePromise.promise.then(()=>{this.audioPlayer.play(this.latestId)}).catch(e=>{this.onPlaybackFinished(this.latestId)})}stop(){this.audioPlayer.flush()}getLatestMarkers(){return this.latestMarkers}onPrepared(e){this.latestId===e&&this.preparePromise.accept(void 0)}onMarker(e,t){this.latestMarkers=t}onPlaybackStarted(e){this.playbackEventListener.onPlaybackStarted()}onPlaybackFinished(e){this.playbackEventListener.onPlaybackFinished(),this.reset()}onError(e,t){this.preparePromise&&this.preparePromise.reject(t)}}},function(e,t,r){"use strict";
/*!
 * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=(e,t,r,n)=>((127&e)<<21)+((127&t)<<14)+((127&r)<<7)+(127&n),i=(e,t)=>{if(84!==e[t]||88!==e[t+1]||88!==e[t+2]||88!==e[t+3])return[];const r=n(e[t+4],e[t+5],e[t+6],e[t+7]);let i=t+10+4;for(;91!==e[i];)i++;const o=e.slice(i,t+10+r-1),a=String.fromCharCode.apply(null,o);return JSON.parse(a)};t.extractTextFrames=e=>{let t=new Array;const r=new Uint8Array(e);let o=0;for(;o<r.length-2;)if(73===r[o]&&68===r[o+1]&&51===r[o+2]){const e=n(r[o+6],r[o+7],r[o+8],r[o+9]),a=i(r,o+10);t=t.concat(a),o+=e+10}else o++;return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(110),i=[n.readXingTag,n.readId3v2Tag],o=(e,t)=>{for(const r of i){const n=r(e,t);if(n)return n._section.byteLength}throw new Error("Unknown frame")};t.Demuxer=class{constructor(){this.used=!1,this.rangeLength=0,this.ranges=new Array}demux(e){if(this.used)throw new Error("This demuxer instance has been used previously.");this.used=!0;const t=e.byteLength,r=new DataView(e);let i=0;for(;i<t;){const e=n.readFrame(r,i);if(null===e)i+=o(r,i);else{const t=e._section.byteLength;this.addRange(i,t),i+=t}}return((e,t,r)=>{const n=new ArrayBuffer(r);let i=0;return t.forEach(t=>{((e,t,r,n)=>{const i=new Uint8Array(e),o=new Uint8Array(r);let a=0;for(;a<t.length;)o[a+n]=i[a+t.start],a++})(e,t,n,i),i+=t.length}),n})(e,this.ranges,this.rangeLength)}addRange(e,t){const r={length:t,start:e};this.ranges.push(r),this.rangeLength+=t}}},function(e,t,r){var n,i,o;!function(a,s){"use strict";i=[t,r(7),r(56),r(57)],void 0!==(o="function"==typeof(n=function(e,t,r,n){e.readFrameHeader=function(e,r){return t.readFrameHeader(e,r)},e.readFrame=function(e,r,n){return t.readFrame(e,r,n)},e.readLastFrame=function(t,r,n){r||(r=t.byteLength-1);for(var i=null;r>=0;--r)if(255===t.getUint8(r)&&(i=e.readFrame(t,r,n)))return i;return null},e.readId3v2Tag=function(e,t){return r.readId3v2Tag(e,t)},e.readXingTag=function(e,t){return n.readXingTag(e,t)},e.readTags=function(t,r){r||(r=0);for(var n=[],i=null,o=!1,a=t.byteLength,s=[e.readId3v2Tag,e.readXingTag,e.readFrame],l=s.length;r<a&&!o;++r)for(var c=0;c<l;++c)if(i=s[c](t,r)){if(n.push(i),r+=i._section.byteLength,"frame"===i._section.type){o=!0;break}c=-1}return n}})?n.apply(t,i):n)&&(e.exports=o)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static create(e){return new n(e)}constructor(e){this.content=Module.Content.create(e)}getRequestedPackages(){return this.content.getRequestedPackages()}addPackage(e,t){this.content.addPackage(e,t)}isError(){return this.content.isError()}isReady(){return this.content.isReady()}isWaiting(){return this.content.isWaiting()}addData(e,t){this.content.addData(e,t)}delete(){this.content.delete(),this.content=void 0}}t.Content=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandPositionRelative=0]="kCommandPositionRelative",e[e.kCommandPositionAbsolute=1]="kCommandPositionAbsolute"}(t.CommandPosition||(t.CommandPosition={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandScrollAlignFirst=0]="kCommandScrollAlignFirst",e[e.kCommandScrollAlignCenter=1]="kCommandScrollAlignCenter",e[e.kCommandScrollAlignLast=2]="kCommandScrollAlignLast",e[e.kCommandScrollAlignVisible=3]="kCommandScrollAlignVisible"}(t.CommandScrollAlign||(t.CommandScrollAlign={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kCommandTypeIdle=0]="kCommandTypeIdle",e[e.kCommandTypeSequential=1]="kCommandTypeSequential",e[e.kCommandTypeParallel=2]="kCommandTypeParallel",e[e.kCommandTypeSendEvent=3]="kCommandTypeSendEvent",e[e.kCommandTypeSetValue=4]="kCommandTypeSetValue",e[e.kCommandTypeSetState=5]="kCommandTypeSetState",e[e.kCommandTypeSpeakItem=6]="kCommandTypeSpeakItem",e[e.kCommandTypeSpeakList=7]="kCommandTypeSpeakList",e[e.kCommandTypeScroll=8]="kCommandTypeScroll",e[e.kCommandTypeScrollToIndex=9]="kCommandTypeScrollToIndex",e[e.kCommandTypeScrollToComponent=10]="kCommandTypeScrollToComponent",e[e.kCommandTypeSetPage=11]="kCommandTypeSetPage",e[e.kCommandTypeAutoPage=12]="kCommandTypeAutoPage",e[e.kCommandTypePlayMedia=13]="kCommandTypePlayMedia",e[e.kCommandTypeControlMedia=14]="kCommandTypeControlMedia",e[e.kCommandTypeOpenURL=15]="kCommandTypeOpenURL",e[e.kCommandTypeAnimateItem=16]="kCommandTypeAnimateItem",e[e.kCommandTypeSetFocus=17]="kCommandTypeSetFocus",e[e.kCommandTypeClearFocus=18]="kCommandTypeClearFocus"}(t.CommandType||(t.CommandType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kContainerDirectionColumn=0]="kContainerDirectionColumn",e[e.kContainerDirectionRow=1]="kContainerDirectionRow"}(t.ContainerDirection||(t.ContainerDirection={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kFlexboxAlignStretch=0]="kFlexboxAlignStretch",e[e.kFlexboxAlignCenter=1]="kFlexboxAlignCenter",e[e.kFlexboxAlignStart=2]="kFlexboxAlignStart",e[e.kFlexboxAlignEnd=3]="kFlexboxAlignEnd",e[e.kFlexboxAlignBaseline=4]="kFlexboxAlignBaseline",e[e.kFlexboxAlignAuto=5]="kFlexboxAlignAuto"}(t.FlexboxAlign||(t.FlexboxAlign={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kFlexboxJustifyContentStart=0]="kFlexboxJustifyContentStart",e[e.kFlexboxJustifyContentEnd=1]="kFlexboxJustifyContentEnd",e[e.kFlexboxJustifyContentCenter=2]="kFlexboxJustifyContentCenter",e[e.kFlexboxJustifyContentSpaceBetween=3]="kFlexboxJustifyContentSpaceBetween",e[e.kFlexboxJustifyContentSpaceAround=4]="kFlexboxJustifyContentSpaceAround"}(t.FlexboxJustifyContent||(t.FlexboxJustifyContent={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=-1]="NONE",e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=5]="ERROR",e[e.CRITICAL=6]="CRITICAL"}(t.LogLevel||(t.LogLevel={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.kPositionAbsolute=0]="kPositionAbsolute",e[e.kPositionRelative=1]="kPositionRelative"}(t.Position||(t.Position={}))}])},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(6),a=r(13),s=r(14);class l{constructor(e,t){this.options=e,this.renderer=t,this.docTheme="dark",this.dirty=[],this.events=[],this.eventMap=new Map,this.client=e.client,this.client.addMessageListener(this)}init(){return n(this,void 0,void 0,(function*(){const e=new Promise(e=>{this.metricsCompleteResolver=e}),t=new Promise(e=>{this.buildCompleteResolver=e});this.client.sendMessage({type:"build",payload:{agentName:this.options.environment.agentName,agentVersion:this.options.environment.agentVersion,allowOpenUrl:this.options.environment.allowOpenUrl,disallowVideo:this.options.environment.disallowVideo,animationQuality:this.options.environment.animationQuality,width:this.options.viewport.width,height:this.options.viewport.height,shape:this.options.viewport.shape,dpi:this.options.viewport.dpi,mode:this.options.mode}}),yield e,yield t}))}onRenderingOptions(e){this.legacyKaraoke=e.payload.legacyKaraoke}onHierarchy(e){this.top=o.APLComponent.create(this.client,this.renderer,e.payload),this.buildCompleteResolver()}onScaling(e){l.scaleFactor=e.payload.scaleFactor,l.viewportWidth=e.payload.viewportWidth,l.viewportHeight=e.payload.viewportHeight,this.metricsCompleteResolver()}onEnsureLayout(e){const t=this.renderer.componentMapping[e.payload];t&&t.ensureLayoutResolver()}onDirty(e){const t=e.payload;for(const e of t){const t=e.id;this.dirty.push(t);const r=this.renderer.componentMapping[t];r&&r.setDirtyProps(e)}}onEvent(e){const t=e.payload,r=new a.APLEvent(this.client,this.renderer,this,t,e.seqno);this.events.push(r),this.eventMap.set(e.seqno,r)}onEventTerminate(e){const t=e.payload.token,r=this.eventMap.get(t);r&&r.terminate()}onMeasure(e){e.payload.type=i.ComponentType.kComponentTypeText;const t=o.APLComponent.create(this.client,this.renderer,e.payload),r=e.payload.width,n=e.payload.height,a=e.payload.heightMode,s=e.payload.widthMode,l=this.renderer.onMeasure(t,r,s,n,a);this.client.sendMessage({type:"measure",seqno:e.seqno,payload:l})}onBaseline(e){const t=o.APLComponent.create(this.client,this.renderer,e.payload),r=e.payload.width,n=e.payload.height,i=this.renderer.onBaseline(t,r,n);this.client.sendMessage({type:"baseline",seqno:e.seqno,payload:i})}onDocTheme(e){this.docTheme=e.payload.docTheme}removeEvent(e){this.eventMap.delete(e)}topComponent(){return this.top}isDirty(){return this.dirty.length>0}clearDirty(){for(const e of this.dirty){const t=this.renderer.componentMapping[e];t&&t.clearDirty()}this.dirty=[]}getDirty(){return this.dirty}executeCommands(e){return new s.APLAction}scrollToRectInComponent(e,t,r,n,i,o){this.client.sendMessage({type:"scrollToRectInComponent",payload:{id:e.getUniqueId(),x:t,y:r,width:n,height:i,align:o}})}updateCursorPosition(e,t){this.client.sendMessage({type:"updateCursorPosition",payload:{x:e,y:t}})}handleKeyboard(e,t){this.client.sendMessage({type:"handleKeyboard",payload:{keyType:e,code:t.code,key:t.key,repeat:t.repeat,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey}})}cancelExecution(){throw new Error("Not implemented")}hasEvent(){return this.events.length>0}popEvent(){return this.events.shift()}currentTime(){return 0}nextTime(){return 0}updateTime(e){return 0}delete(){this.client.removeMessageListener(this)}getTheme(){return this.docTheme}getVisualContext(){return""}getViewportWidth(){return l.viewportWidth}getViewportHeight(){return l.viewportHeight}getScaleFactor(){return l.scaleFactor}getLegacyKaraoke(){return this.legacyKaraoke}}t.APLContext=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Bimap=class{constructor(e){this.aToB=new Map,this.bToA=new Map;for(const t of e)this.aToB.set(t[0],t[1]),this.bToA.set(t[1],t[0])}at(e){return"number"==typeof e?this.aToB.get(e):"string"==typeof e?this.bToA.get(e):void 0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APLClient=class{constructor(){this.listeners=new Set,this.messageListeners=new Set}addMessageListener(e){this.messageListeners.add(e)}removeMessageListener(e){this.messageListeners.delete(e)}removeAllMessageListeners(){this.messageListeners.clear()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}removeAllListeners(){this.listeners.clear()}measure(e){for(const t of this.messageListeners.values())t.onMeasure&&t.onMeasure(e)}dirty(e){for(const t of this.messageListeners.values())t.onDirty&&t.onDirty(e)}event(e){for(const t of this.messageListeners.values())t.onEvent&&t.onEvent(e)}eventTerminate(e){for(const t of this.messageListeners.values())t.onEventTerminate&&t.onEventTerminate(e)}hierarchy(e){for(const t of this.messageListeners.values())t.onHierarchy&&t.onHierarchy(e)}renderingOptions(e){for(const t of this.messageListeners.values())t.onRenderingOptions&&t.onRenderingOptions(e)}scaling(e){for(const t of this.messageListeners.values())t.onScaling&&t.onScaling(e)}baseline(e){for(const t of this.messageListeners.values())t.onBaseline&&t.onBaseline(e)}docTheme(e){for(const t of this.messageListeners.values())t.onDocTheme&&t.onDocTheme(e)}ensureLayout(e){for(const t of this.messageListeners.values())t.onEnsureLayout&&t.onEnsureLayout(e)}onMessage(e){const t=e.type;this[t]&&this[t](e)}onClose(){for(const e of this.listeners.values())e.onClose&&e.onClose()}onOpen(){for(const e of this.listeners.values())e.onOpen&&e.onOpen()}onError(){for(const e of this.listeners.values())e.onError&&e.onError()}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(5)),n(r(3)),n(r(15)),n(r(0));var i=r(0);t.APLRenderer=i.default},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(1);class a extends i.default{static create(e){return new a(e)}init(){const e=e=>super[e];return n(this,void 0,void 0,(function*(){yield i.FontUtils.initialize(),this.componentMapping={},this.context=new o.APLContext(this.options,this),yield this.context.init(),e("init").call(this)}))}destroy(){super.destroy()}getLegacyKaraoke(){return this.context.getLegacyKaraoke()}}t.APLWSRenderer=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),o=r(2),a=r(7),s=new o.Bimap([[i.PropertyKey.kPropertyAccessibilityLabel,"accessibilityLabel"],[i.PropertyKey.kPropertyAlign,"align"],[i.PropertyKey.kPropertyAudioTrack,"audioTrack"],[i.PropertyKey.kPropertyAutoplay,"autoplay"],[i.PropertyKey.kPropertyBackgroundColor,"backgroundColor"],[i.PropertyKey.kPropertyBorderColor,"borderColor"],[i.PropertyKey.kPropertyBorderRadius,"borderRadius"],[i.PropertyKey.kPropertyBorderRadii,"_borderRadii"],[i.PropertyKey.kPropertyBorderWidth,"borderWidth"],[i.PropertyKey.kPropertyBounds,"_bounds"],[i.PropertyKey.kPropertyChecked,"checked"],[i.PropertyKey.kPropertyColor,"color"],[i.PropertyKey.kPropertyColorKaraokeTarget,"_colorKaraokeTarget"],[i.PropertyKey.kPropertyColorNonKaraoke,"_colorNonKaraoke"],[i.PropertyKey.kPropertyDisabled,"disabled"],[i.PropertyKey.kPropertyDisplay,"display"],[i.PropertyKey.kPropertyFilters,"filters"],[i.PropertyKey.kPropertyFontFamily,"fontFamily"],[i.PropertyKey.kPropertyFontSize,"fontSize"],[i.PropertyKey.kPropertyFontStyle,"fontStyle"],[i.PropertyKey.kPropertyFontWeight,"fontWeight"],[i.PropertyKey.kPropertyGraphic,"graphic"],[i.PropertyKey.kPropertyId,"id"],[i.PropertyKey.kPropertyInnerBounds,"_innerBounds"],[i.PropertyKey.kPropertyLetterSpacing,"letterSpacing"],[i.PropertyKey.kPropertyLineHeight,"lineHeight"],[i.PropertyKey.kPropertyMaxLines,"maxLines"],[i.PropertyKey.kPropertyMediaBounds,"mediaBounds"],[i.PropertyKey.kPropertyNavigation,"navigation"],[i.PropertyKey.kPropertyOpacity,"opacity"],[i.PropertyKey.kPropertyOverlayColor,"overlayColor"],[i.PropertyKey.kPropertyOverlayGradient,"overlayGradient"],[i.PropertyKey.kPropertyScale,"scale"],[i.PropertyKey.kPropertyScrollDirection,"scrollDirection"],[i.PropertyKey.kPropertyShadowColor,"shadowColor"],[i.PropertyKey.kPropertyShadowHorizontalOffset,"shadowHorizontalOffset"],[i.PropertyKey.kPropertyShadowVerticalOffset,"shadowVerticalOffset"],[i.PropertyKey.kPropertyShadowRadius,"shadowRadius"],[i.PropertyKey.kPropertySource,"source"],[i.PropertyKey.kPropertyText,"text"],[i.PropertyKey.kPropertyTextAlign,"textAlign"],[i.PropertyKey.kPropertyTextAlignVertical,"textAlignVertical"],[i.PropertyKey.kPropertyTransform,"_transform"]]),l={[i.PropertyKey.kPropertyBounds]:a.toRect,[i.PropertyKey.kPropertyBackgroundColor]:a.toColor,[i.PropertyKey.kPropertyBorderColor]:a.toColor,[i.PropertyKey.kPropertyBorderRadius]:a.toDimension,[i.PropertyKey.kPropertyBorderRadii]:a.toRadii,[i.PropertyKey.kPropertyBorderWidth]:a.toDimension,[i.PropertyKey.kPropertyColor]:a.toColor,[i.PropertyKey.kPropertyColorNonKaraoke]:a.toColor,[i.PropertyKey.kPropertyColorKaraokeTarget]:a.toColor,[i.PropertyKey.kPropertyFilters]:a.toFilters,[i.PropertyKey.kPropertyFontSize]:a.toDimension,[i.PropertyKey.kPropertyGraphic]:a.toGraphic,[i.PropertyKey.kPropertyInnerBounds]:a.toRect,[i.PropertyKey.kPropertyLetterSpacing]:a.toDimension,[i.PropertyKey.kPropertyMediaBounds]:a.toRect,[i.PropertyKey.kPropertyOverlayColor]:a.toColor,[i.PropertyKey.kPropertyOverlayGradient]:a.toGradient,[i.PropertyKey.kPropertyShadowColor]:a.toColor,[i.PropertyKey.kPropertyShadowHorizontalOffset]:a.toDimension,[i.PropertyKey.kPropertyShadowVerticalOffset]:a.toDimension,[i.PropertyKey.kPropertyShadowRadius]:a.toDimension,[i.PropertyKey.kPropertyText]:a.toStyledText,[i.PropertyKey.kPropertyTransform]:a.toTransform},c=new Set(["children","id","type"]);class u{constructor(e,t){this.client=e,this.renderer=t,this.calculated={},this.children=[],this.dirtyProps={}}static create(e,t,r){let n=t.componentMapping[r.id];if(n||(n=new u(e,t)),n.type=r.type,n.uniqueId=r.id,t.componentMapping[n.uniqueId]=n,n.setCalculated(r),r.children)for(const i of r.children){const r=u.create(e,t,i);r.parent=n,n.children.push(r)}return n}setCalculated(e){Object.keys(e).forEach(t=>{if(c.has(t))return;const r=s.at(t);this.calculated[r]=r in l?l[r](e[t]):e[t]})}setDirtyProps(e){this.setCalculated(e),Object.keys(e).forEach(e=>{const t=s.at(e);this.dirtyProps[t]=this.calculated[t]})}clearDirty(){this.dirtyProps={}}update(e,t){this.client.sendMessage({type:"update",payload:{id:this.uniqueId,type:e,value:t}})}getCalculated(){return this.calculated}getCalculatedByKey(e){return this.calculated[e]}getDirtyProps(){return this.dirtyProps}getType(){return this.type}getUniqueId(){return this.uniqueId}getId(){return this.id}getParent(){return this.parent}pressed(){this.update(i.UpdateType.kUpdatePressed,0)}updateScrollPosition(e){this.update(i.UpdateType.kUpdateScrollPosition,e)}updatePagerPosition(e){this.update(i.UpdateType.kUpdatePagerPosition,e)}updateMediaState(e,t){this.client.sendMessage({type:"updateMedia",payload:{id:this.uniqueId,mediaState:e,fromEvent:t}})}updateGraphic(e){return this.client.sendMessage({type:"updateGraphic",payload:{id:this.uniqueId,avg:e}}),!0}getChildCount(){return this.children.length}getChildAt(e){return this.children[e]}appendChild(e){throw new Error("Not implemented")}insertChild(e,t){throw new Error("Not implemented")}remove(){throw new Error("Not implemented")}inflateChild(e){throw new Error("Not implemented")}getBoundsInParent(e){const t=this.calculated[i.PropertyKey.kPropertyBounds],r={height:t.height,width:t.width,top:t.top,left:t.left};let n=this.parent;for(;n&&n.getUniqueId()!==e.getUniqueId();){const e=n.calculated[i.PropertyKey.kPropertyBounds];r.top+=e.top,r.left+=e.left,n=n.parent}return r}getGlobalBounds(){return{left:0,top:0,width:0,height:0}}ensureLayout(){return n(this,void 0,void 0,(function*(){const e=new Promise(e=>{this.ensureLayoutResolver=e});this.client.sendMessage({type:"ensureLayout",payload:{id:this.uniqueId}}),yield e}))}delete(){delete this.renderer.componentMapping[this.uniqueId];for(const e of this.children)e.delete()}provenance(){throw new Error("Not implemented")}}t.APLComponent=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8),i=r(11),o=r(12),a=r(1),s=r(0);function l(e){return parseInt(e.substr(1),16)}t.toRect=function(e){if(e)return new o.APLRect(e)},t.toTransform=function(e){return`matrix(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]}, \n        ${e[4]*a.APLContext.scaleFactor}, ${e[5]*a.APLContext.scaleFactor})`},t.toColor=l,t.toStyledText=function(e){const t={text:e.text,spans:[]};for(const r of e.spans)t.spans.push({type:r[0],start:r[1],end:r[2]});return t},t.toGraphic=function(e){if(e)return new n.APLGraphic(e)},t.toRadii=function(e){return new i.APLRadii(e)},t.toDimension=function(e){return a.APLContext.scaleFactor*e},t.toFilters=function(e){return e.map(e=>s.isIBlur(e)?{type:e.type,radius:a.APLContext.scaleFactor*e.radius}:{type:e.type,kind:e.kind,sigma:e.sigma,useColor:e.useColor})},t.toGradient=function(e){if(e)return{type:e.type,angle:e.angle,colorRange:e.colorRange.map(l),inputRange:e.inputRange}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9);t.APLGraphic=class{constructor(e){this.dirty=[],this.root=new n.APLGraphicElement(e.root),this.valid=e.isValid,this.intrinsicWidth=e.intrinsicWidth,this.intrinsicHeight=e.intrinsicHeight,this.viewportWidth=e.viewportWidth,this.viewportHeight=e.viewportHeight}getRoot(){return this.root}isValid(){return this.valid}getIntrinsicHeight(){return this.intrinsicHeight}getIntrinsicWidth(){return this.intrinsicWidth}getViewportWidth(){return this.viewportWidth}getViewportHeight(){return this.viewportHeight}clearDirty(){this.dirty=[]}getDirty(){return this.dirty}delete(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),i=r(0),o=r(1);function a(e){return parseInt(e.substr(1),16)}function s(e){return e*o.APLContext.scaleFactor}t.toColor=a,t.toActualSize=s;const l={[i.GraphicPropertyKey.kGraphicPropertyStroke]:a,[i.GraphicPropertyKey.kGraphicPropertyFill]:a,[i.GraphicPropertyKey.kGraphicPropertyWidthActual]:s,[i.GraphicPropertyKey.kGraphicPropertyHeightActual]:s};class c{constructor(e){this.props={},this.children=[],this.id=e.id,this.type=e.type,Object.keys(e.props).forEach(t=>{const r=n.graphicPropertyBimap.at(t);l[r]?this.props[r]=l[r](e.props[t]):this.props[r]=e.props[t]});for(const t of e.children)this.children.push(new c(t))}getId(){return this.id}getChildCount(){return this.children.length}getChildAt(e){return this.children[e]}getValue(e){return this.props[e]}getDirtyProperties(){return[]}getType(){return this.type}delete(){}}t.APLGraphicElement=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2),i=r(0);t.graphicPropertyBimap=new n.Bimap([[i.GraphicPropertyKey.kGraphicPropertyFill,"fill"],[i.GraphicPropertyKey.kGraphicPropertyFillOpacity,"fillOpacity"],[i.GraphicPropertyKey.kGraphicPropertyHeightOriginal,"height"],[i.GraphicPropertyKey.kGraphicPropertyHeightActual,"height_actual"],[i.GraphicPropertyKey.kGraphicPropertyOpacity,"opacity"],[i.GraphicPropertyKey.kGraphicPropertyPathData,"pathData"],[i.GraphicPropertyKey.kGraphicPropertyPivotX,"pivotX"],[i.GraphicPropertyKey.kGraphicPropertyPivotY,"pivotY"],[i.GraphicPropertyKey.kGraphicPropertyRotation,"rotation"],[i.GraphicPropertyKey.kGraphicPropertyScaleX,"scaleX"],[i.GraphicPropertyKey.kGraphicPropertyScaleY,"scaleY"],[i.GraphicPropertyKey.kGraphicPropertyViewportHeightActual,"viewportHeight_actual"],[i.GraphicPropertyKey.kGraphicPropertyViewportWidthActual,"viewportWidth_actual"],[i.GraphicPropertyKey.kGraphicPropertyScaleTypeHeight,"scaleTypeHeight"],[i.GraphicPropertyKey.kGraphicPropertyScaleTypeWidth,"scaleTypeWidth"],[i.GraphicPropertyKey.kGraphicPropertyStroke,"stroke"],[i.GraphicPropertyKey.kGraphicPropertyStrokeOpacity,"strokeOpacity"],[i.GraphicPropertyKey.kGraphicPropertyStrokeWidth,"strokeWidth"],[i.GraphicPropertyKey.kGraphicPropertyTranslateX,"translateX"],[i.GraphicPropertyKey.kGraphicPropertyTranslateY,"translateY"],[i.GraphicPropertyKey.kGraphicPropertyVersion,"version"],[i.GraphicPropertyKey.kGraphicPropertyViewportHeightOriginal,"viewportHeight"],[i.GraphicPropertyKey.kGraphicPropertyViewportWidthOriginal,"viewportWidth"],[i.GraphicPropertyKey.kGraphicPropertyWidthActual,"width_actual"],[i.GraphicPropertyKey.kGraphicPropertyWidthOriginal,"width"]])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.APLRadii=class{constructor(e){this.values=e}topLeft(){return this.values[0]*n.APLContext.scaleFactor}topRight(){return this.values[1]*n.APLContext.scaleFactor}bottomLeft(){return this.values[2]*n.APLContext.scaleFactor}bottomRight(){return this.values[3]*n.APLContext.scaleFactor}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.APLRect=class{constructor(e){this.left=e[0]*n.APLContext.scaleFactor,this.top=e[1]*n.APLContext.scaleFactor,this.width=e[2]*n.APLContext.scaleFactor,this.height=e[3]*n.APLContext.scaleFactor}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(2),o=r(1);const a=new i.Bimap([[n.EventProperty.kEventPropertyAlign,"align"],[n.EventProperty.kEventPropertyArguments,"arguments"],[n.EventProperty.kEventPropertyAudioTrack,"audioTrack"],[n.EventProperty.kEventPropertyCommand,"command"],[n.EventProperty.kEventPropertyComponent,"component"],[n.EventProperty.kEventPropertyComponents,"components"],[n.EventProperty.kEventPropertyDirection,"direction"],[n.EventProperty.kEventPropertyHighlightMode,"highlightMode"],[n.EventProperty.kEventPropertyPosition,"position"],[n.EventProperty.kEventPropertySource,"source"],[n.EventProperty.kEventPropertyValue,"value"]]),s={[n.EventProperty.kEventPropertyPosition]:function(e,t,r){return e?t===n.EventType.kEventTypeScrollTo&&r!==n.ComponentType.kComponentTypePager?o.APLContext.scaleFactor*e:e:0}};t.APLEvent=class{constructor(e,t,r,n,i){this.client=e,this.renderer=t,this.context=r,this.seqno=i,this.calculated={},this.terminated=!1,this.resolved=!1,this.type=n.type,this.id=n.id,Object.keys(n).forEach(e=>{const t=a.at(e);null!=t&&(this.calculated[t]=t in s?s[t](n[e],this.type,this.renderer.componentMapping[this.id].getType()):n[e])})}getType(){return this.type}getValue(e){return this.calculated[e]}getComponent(){return this.renderer.componentMapping[this.id]}resolve(){this.resolved=!0,this.context.removeEvent(this.seqno),this.client.sendMessage({type:"response",payload:{event:this.seqno}})}resolveWithArg(e){this.resolved=!0,this.context.removeEvent(this.seqno),this.client.sendMessage({type:"response",payload:{event:this.seqno,argument:e}})}resolveWithRect(e,t,r,n){this.resolved=!0,this.context.removeEvent(this.seqno),this.client.sendMessage({type:"response",payload:{event:this.seqno,rectArgument:{x:e,y:t,width:r,height:n}}})}addTerminateCallback(e){this.terminateCallback=e}isPending(){return!(this.terminated||this.resolved)}isTerminated(){return this.terminated}isResolved(){return this.resolved}delete(){this.context.removeEvent(this.seqno)}terminate(){this.terminated=!0,this.context.removeEvent(this.seqno),this.terminateCallback&&this.terminateCallback()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APLAction=class{resolve(){}resolveWithArg(e){}addTerminateCallback(e){}then(e){}terminate(){}isPending(){return!0}isTerminated(){return!1}isResolved(){return!0}delete(){}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3);class o extends i.APLClient{constructor(e){super(),this.url=e,this.onWebsocketMessage=e=>{const t=JSON.parse(e.data);this.onMessage(t)},this.onWebsocketClose=e=>{this.onClose(),this.reconnect()},this.onWebsocketOpen=e=>{this.onOpen()},this.onWebsocketError=()=>{this.onError(),this.reconnect()}}start(){return n(this,void 0,void 0,(function*(){this.ws&&(this.ws.removeEventListener("error",this.onWebsocketError),this.ws.removeEventListener("open",this.onWebsocketOpen),this.ws.removeEventListener("close",this.onWebsocketClose),this.ws.removeEventListener("message",this.onWebsocketMessage)),this.ws=new WebSocket(this.url),this.ws.addEventListener("error",this.onWebsocketError),this.ws.addEventListener("open",this.onWebsocketOpen),this.ws.addEventListener("close",this.onWebsocketClose),this.ws.addEventListener("message",this.onWebsocketMessage)}))}sendMessage(e){this.ws.send(JSON.stringify(e))}reconnect(){this.start(),setTimeout(()=>{this.ws.readyState===WebSocket.CLOSED&&this.reconnect()},1e3)}}t.WebSocketClient=o}])}));